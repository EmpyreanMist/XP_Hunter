/*! For license information please see EzHeaderBidding.js.LICENSE.txt */
(()=>{var e={633:(e,t,r)=>{var i=r(738).default;function n(){"use strict";e.exports=n=function(){return r},e.exports.__esModule=!0,e.exports.default=e.exports;var t,r={},o=Object.prototype,a=o.hasOwnProperty,s=Object.defineProperty||function(e,t,r){e[t]=r.value},d="function"==typeof Symbol?Symbol:{},u=d.iterator||"@@iterator",l=d.asyncIterator||"@@asyncIterator",c=d.toStringTag||"@@toStringTag";function f(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(t){f=function(e,t,r){return e[t]=r}}function p(e,t,r,i){var n=t&&t.prototype instanceof _?t:_,o=Object.create(n.prototype),a=new j(i||[]);return s(o,"_invoke",{value:I(e,r,a)}),o}function v(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}r.wrap=p;var h="suspendedStart",m="suspendedYield",y="executing",b="completed",g={};function _(){}function w(){}function B(){}var k={};f(k,u,(function(){return this}));var O=Object.getPrototypeOf,P=O&&O(O(T([])));P&&P!==o&&a.call(P,u)&&(k=P);var S=B.prototype=_.prototype=Object.create(k);function C(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(n,o,s,d){var u=v(e[n],e,o);if("throw"!==u.type){var l=u.arg,c=l.value;return c&&"object"==i(c)&&a.call(c,"__await")?t.resolve(c.__await).then((function(e){r("next",e,s,d)}),(function(e){r("throw",e,s,d)})):t.resolve(c).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,d)}))}d(u.arg)}var n;s(this,"_invoke",{value:function(e,i){function o(){return new t((function(t,n){r(e,i,t,n)}))}return n=n?n.then(o,o):o()}})}function I(e,r,i){var n=h;return function(o,a){if(n===y)throw Error("Generator is already running");if(n===b){if("throw"===o)throw a;return{value:t,done:!0}}for(i.method=o,i.arg=a;;){var s=i.delegate;if(s){var d=A(s,i);if(d){if(d===g)continue;return d}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(n===h)throw n=b,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);n=y;var u=v(e,r,i);if("normal"===u.type){if(n=i.done?b:m,u.arg===g)continue;return{value:u.arg,done:i.done}}"throw"===u.type&&(n=b,i.method="throw",i.arg=u.arg)}}}function A(e,r){var i=r.method,n=e.iterator[i];if(n===t)return r.delegate=null,"throw"===i&&e.iterator.return&&(r.method="return",r.arg=t,A(e,r),"throw"===r.method)||"return"!==i&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+i+"' method")),g;var o=v(n,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,g;var a=o.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,g):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function z(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function F(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(z,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[u];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function r(){for(;++n<e.length;)if(a.call(e,n))return r.value=e[n],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(i(e)+" is not iterable")}return w.prototype=B,s(S,"constructor",{value:B,configurable:!0}),s(B,"constructor",{value:w,configurable:!0}),w.displayName=f(B,c,"GeneratorFunction"),r.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},r.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,B):(e.__proto__=B,f(e,c,"GeneratorFunction")),e.prototype=Object.create(S),e},r.awrap=function(e){return{__await:e}},C(x.prototype),f(x.prototype,l,(function(){return this})),r.AsyncIterator=x,r.async=function(e,t,i,n,o){void 0===o&&(o=Promise);var a=new x(p(e,t,i,n),o);return r.isGeneratorFunction(t)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},C(S),f(S,c,"Generator"),f(S,u,(function(){return this})),f(S,"toString",(function(){return"[object Generator]"})),r.keys=function(e){var t=Object(e),r=[];for(var i in t)r.push(i);return r.reverse(),function e(){for(;r.length;){var i=r.pop();if(i in t)return e.value=i,e.done=!1,e}return e.done=!0,e}},r.values=T,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(F),!e)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function i(i,n){return s.type="throw",s.arg=e,r.next=i,n&&(r.method="next",r.arg=t),!!n}for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n],s=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var d=a.call(o,"catchLoc"),u=a.call(o,"finallyLoc");if(d&&u){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(d){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&a.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var n=i;break}}n&&("break"===e||"continue"===e)&&n.tryLoc<=t&&t<=n.finallyLoc&&(n=null);var o=n?n.completion:{};return o.type=e,o.arg=t,n?(this.method="next",this.next=n.finallyLoc,g):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),F(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var i=r.completion;if("throw"===i.type){var n=i.arg;F(r)}return n}}throw Error("illegal catch attempt")},delegateYield:function(e,r,i){return this.delegate={iterator:T(e),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=t),g}},r}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports},738:e=>{function t(r){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},756:(e,t,r)=>{var i=r(633)();e.exports=i;try{regeneratorRuntime=i}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=i:Function("r","regeneratorRuntime = r")(i)}}},t={};function r(i){var n=t[i];if(void 0!==n)return n.exports;var o=t[i]={exports:{}};return e[i](o,o.exports,r),o.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var i in t)r.o(t,i)&&!r.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(t){var r=function(t){if("object"!=e(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!=e(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==e(r)?r:r+""}function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,i(n.key),n)}}function o(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function a(e,t){return function(){try{return e.apply(void 0,arguments)}catch(e){var r=function(e){return function(){reportEzError(e,"header-bidding."+t)}};"function"==typeof reportEzError?r(e):window.addEventListener("reportEzErrorDefined",r(e),{once:!0}),console.error(e)}}}function s(e,t){var r;void 0!==window.__ez&&null!==(r=window.__ez)&&void 0!==r&&null!==(r=r.queue)&&void 0!==r&&r.addFileOnce?window.__ez.queue.addFileOnce(e,t+"?cb=68&gcb=0",!0,[],!0,!1,!1,!0):setTimeout((function(){s(e,t)}),200)}function d(){var e;"undefined"!=typeof __ez&&__ez.fads&&__ez.fads.log&&(e=__ez.fads).log.apply(e,arguments)}var u={AD:"AND",AE:"ARE",AF:"AFG",AG:"ATG",AI:"AIA",AL:"ALB",AM:"ARM",AO:"AGO",AQ:"ATA",AR:"ARG",AS:"ASM",AT:"AUT",AU:"AUS",AW:"ABW",AX:"ALA",AZ:"AZE",BA:"BIH",BB:"BRB",BD:"BGD",BE:"BEL",BF:"BFA",BG:"BGR",BH:"BHR",BI:"BDI",BJ:"BEN",BL:"BLM",BM:"BMU",BN:"BRN",BO:"BOL",BQ:"BES",BR:"BRA",BS:"BHS",BT:"BTN",BV:"BVT",BW:"BWA",BY:"BLR",BZ:"BLZ",CA:"CAN",CC:"CCK",CD:"COD",CF:"CAF",CG:"COG",CH:"CHE",CI:"CIV",CK:"COK",CL:"CHL",CM:"CMR",CN:"CHN",CO:"COL",CR:"CRI",CU:"CUB",CV:"CPV",CW:"CUW",CX:"CXR",CY:"CYP",CZ:"CZE",DE:"DEU",DJ:"DJI",DK:"DNK",DM:"DMA",DO:"DOM",DZ:"DZA",EC:"ECU",EE:"EST",EG:"EGY",EH:"ESH",ER:"ERI",ES:"ESP",ET:"ETH",FI:"FIN",FJ:"FJI",FK:"FLK",FM:"FSM",FO:"FRO",FR:"FRA",GA:"GAB",GB:"GBR",GD:"GRD",GE:"GEO",GF:"GUF",GG:"GGY",GH:"GHA",GI:"GIB",GL:"GRL",GM:"GMB",GN:"GIN",GP:"GLP",GQ:"GNQ",GR:"GRC",GS:"SGS",GT:"GTM",GU:"GUM",GW:"GNB",GY:"GUY",HK:"HKG",HM:"HMD",HN:"HND",HR:"HRV",HT:"HTI",HU:"HUN",ID:"IDN",IE:"IRL",IL:"ISR",IM:"IMN",IN:"IND",IO:"IOT",IQ:"IRQ",IR:"IRN",IS:"ISL",IT:"ITA",JE:"JEY",JM:"JAM",JO:"JOR",JP:"JPN",KE:"KEN",KG:"KGZ",KH:"KHM",KI:"KIR",KM:"COM",KN:"KNA",KP:"PRK",KR:"KOR",KW:"KWT",KY:"CYM",KZ:"KAZ",LA:"LAO",LB:"LBN",LC:"LCA",LI:"LIE",LK:"LKA",LR:"LBR",LS:"LSO",LT:"LTU",LU:"LUX",LV:"LVA",LY:"LBY",MA:"MAR",MC:"MCO",MD:"MDA",ME:"MNE",MF:"MAF",MG:"MDG",MH:"MHL",MK:"MKD",ML:"MLI",MM:"MMR",MN:"MNG",MO:"MAC",MP:"MNP",MQ:"MTQ",MR:"MRT",MS:"MSR",MT:"MLT",MU:"MUS",MV:"MDV",MW:"MWI",MX:"MEX",MY:"MYS",MZ:"MOZ",NA:"NAM",NC:"NCL",NE:"NER",NF:"NFK",NG:"NGA",NI:"NIC",NL:"NLD",NO:"NOR",NP:"NPL",NR:"NRU",NU:"NIU",NZ:"NZL",OM:"OMN",PA:"PAN",PE:"PER",PF:"PYF",PG:"PNG",PH:"PHL",PK:"PAK",PL:"POL",PM:"SPM",PN:"PCN",PR:"PRI",PS:"PSE",PT:"PRT",PW:"PLW",PY:"PRY",QA:"QAT",RE:"REU",RO:"ROU",RS:"SRB",RU:"RUS",RW:"RWA",SA:"SAU",SB:"SLB",SC:"SYC",SD:"SDN",SE:"SWE",SG:"SGP",SH:"SHN",SI:"SVN",SJ:"SJM",SK:"SVK",SL:"SLE",SM:"SMR",SN:"SEN",SO:"SOM",SR:"SUR",SS:"SSD",ST:"STP",SV:"SLV",SX:"SXM",SY:"SYR",SZ:"SWZ",TC:"TCA",TD:"TCD",TF:"ATF",TG:"TGO",TH:"THA",TJ:"TJK",TK:"TKL",TL:"TLS",TM:"TKM",TN:"TUN",TO:"TON",TR:"TUR",TT:"TTO",TV:"TUV",TW:"TWN",TZ:"TZA",UA:"UKR",UG:"UGA",UM:"UMI",US:"USA",UY:"URY",UZ:"UZB",VA:"VAT",VC:"VCT",VE:"VEN",VG:"VGB",VI:"VIR",VN:"VNM",VU:"VUT",WF:"WLF",WS:"WSM",YE:"YEM",YT:"MYT",ZA:"ZAF",ZM:"ZMB",ZW:"ZWE"};function l(e){if(e){var t=e.toUpperCase();return u[t]}}function c(){var e,t="https://pbcache.ezoic.com/cache";return"undefined"!=typeof _ezaq&&_ezaq.hasOwnProperty("country")&&"true"!==(null===(e=window.__ez)||void 0===e||null===(e=e.tf)||void 0===e?void 0:e.PrebidServerEu)&&"US"!=_ezaq.country&&"CA"!=_ezaq.country&&(t="https://prebid.adnxs.com/pbc/v1/cache"),t}const f=function(){var e=[];function t(t){epbjs.que.push((function(){for(var r=epbjs.getConfig().userSync.userIds||[],i=!1,n=0;n<r.length;n++)if(r[n].name===t.name){if(JSON.stringify(r[n])===JSON.stringify(t))return;i=!0,r[n]=t;break}-1===e.indexOf(t.name)&&e.push(t.name),i||r.push(t),epbjs.setConfig({userSync:{userIds:r}})}))}function r(e,t){var r;window.googletag=window.googletag||{secureSignalProviders:[],cmd:[]},null===(r=window.googletag.secureSignalProviders)||void 0===r||r.push({id:e,collectorFunction:function(){return Promise.resolve(t)}})}window.ezoicIdentity.queue.push(a((function(){window.ezoicIdentity.onIdentity((function(i){var n,o,a,s,u;o=!1,"true"===(null===(n=window._ez)||void 0===n||null===(n=n.tf)||void 0===n?void 0:n.disIdm)&&(o=!0),o||(window.ezoicIdentity.isIdentityReady()?((u=window.ezoicIdentity.getProviderId("uid2"))&&(t({name:"uid2",params:{uid2Token:u}}),r("uidapi.com",u)),(s=window.ezoicIdentity.getProviderId("euid"))&&t({name:"euid",params:{euidToken:s}}),(a=window.ezoicIdentity.getProviderId("id5"))&&(t({name:"id5Id",params:{partner:457,externalModuleUrl:"https://cdn.id5-sync.com/api/1.0/id5PrebidModule.js"},storage:{type:"html5",name:"id5id",expires:90,refreshInSeconds:28800}}),r("id5-sync.com",a)),"undefined"!=typeof ez__sspDomain&&"undefined"!=typeof ez__uIdHash&&t({name:"pubProvidedId",params:{eids:[{source:ez__sspDomain,uids:[{id:ez__uIdHash,atype:3,ext:{stype:"ppuid"}}]}]}}),epbjs.que.push((function(){0!==e.length&&epbjs.refreshUserIds({submoduleNames:e},(function(){d("IDs setIDs: Updated modules: "+e.join(", ")),e=[],epbjs.registerSignalSources(),epbjs.que.push((function(){var e=epbjs.getUserIdsAsEids(),t=epbjs.getConfig("ortb2")||{};t.user=t.user||{},t.user.eids=e,epbjs.setConfig({ortb2:t})}))}))}))):setTimeout((function(){}),50))}))}),"init"))},p=function(){a((function(){"undefined"!=typeof window&&(s("identity","https://go.ezodn.com/detroitchicago/indy.js"),window.ezoicIdentity=window.ezoicIdentity||{},window.ezoicIdentity.queue=window.ezoicIdentity.queue||[],f())}),"modselect")()};function v(t,r){if(r&&("object"==e(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t)}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}function m(e,t){return m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},m(e,t)}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&m(e,t)}var b=function(){return o((function e(r){t(this,e),this.epbjs=r}),[{key:"createConfig",value:function(){return{}}},{key:"applyConfig",value:function(){}}])}();function g(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(g=function(){return!!e})()}var _=function(e){function r(){return t(this,r),e=this,n=arguments,i=h(i=r),v(e,g()?Reflect.construct(i,n||[],h(e).constructor):i.apply(e,n));var e,i,n}return y(r,e),o(r,[{key:"createConfig",value:function(){var e={analyticsProviders:[]};return 1==window.__enableAnalytics&&e.analyticsProviders.push({provider:"ga",options:{trackerName:"gatestprebid"}}),e.analyticsProviders.push({provider:"atsAnalytics",options:{pid:"14067"}}),!0===window.__s2smnettest&&e.analyticsProviders.push({provider:"medianetAnalytics",options:{cid:"8CUIXQW8H"}}),e}},{key:"applyConfig",value:function(){var e=this,t=this.createConfig();return t.analyticsProviders.forEach((function(t){e.epbjs.enableAnalytics([t])})),t}}])}(b);function w(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(w=function(){return!!e})()}var B=function(e){function r(){return t(this,r),e=this,n=arguments,i=h(i=r),v(e,w()?Reflect.construct(i,n||[],h(e).constructor):i.apply(e,n));var e,i,n}return y(r,e),o(r,[{key:"createConfig",value:function(){return[{original:"aol",alias:"onedisplay"},{original:"aol",alias:"onemobile"}]}},{key:"applyConfig",value:function(e){var t=this.createConfig();return t.forEach((function(t){e.aliasBidder(t.original,t.alias)})),t}}])}(b);function k(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(k=function(){return!!e})()}var O=function(e){function r(){return t(this,r),e=this,n=arguments,i=h(i=r),v(e,k()?Reflect.construct(i,n||[],h(e).constructor):i.apply(e,n));var e,i,n}return y(r,e),o(r,[{key:"createConfig",value:function(){return{}}},{key:"applyConfig",value:function(e){try{e.bidderSettings=e.bidderSettings||{},e.bidderSettings.standard={adserverTargeting:[{key:"epb",val:function(e){return e.bidderCode}},{key:"epa",val:function(e){return e.adId}},{key:"epp",val:function(e){return e.pbCg}},{key:"epf",val:function(e){return e.mediaType}},{key:"eps",val:function(t){var r=t.bidder;if("ehb"==t.bidder)return 0;if(void 0!==e.SS[r.toLowerCase()])return e.SS[r.toLowerCase()];if(void 0!==e.SS[r.toLowerCase()])return e.SS[r.toLowerCase()];if("video"!==t.mediaType)return console.error("epbjs: NO MATCH",t.bidder,e.SS),0;var i={};return"undefined"!=typeof __ezInstream&&__ezInstream.hasOwnProperty("prebidBidders")&&__ezInstream.prebidBidders.map((function(e){void 0!==e.ssid&&(i[e.bidder]=parseInt(e.ssid))})),"undefined"!=typeof __ezOutstream&&__ezOutstream.hasOwnProperty("prebidBidders")&&__ezOutstream.prebidBidders.map((function(e){void 0!==e.ssid&&(i[e.bidder]=parseInt(e.ssid))})),i.hasOwnProperty(t.bidder)?i[t.bidder]:void 0}},{key:"epr",val:function(e){return e.source}}],storageAllowed:!0},d("Applied bidder settings configuration",e.bidderSettings.standard)}catch(e){d("Error applying bidder settings configuration",e)}}}])}(b);function P(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(P=function(){return!!e})()}var S=function(e){function r(){return t(this,r),e=this,n=arguments,i=h(i=r),v(e,P()?Reflect.construct(i,n||[],h(e).constructor):i.apply(e,n));var e,i,n}return y(r,e),o(r,[{key:"createConfig",value:function(){var e={cache:{useLocal:!0},rubicon:{disableFloors:!0}};return this._setupCacheBids(e),e}},{key:"_setupCacheBids",value:function(e){e.useBidCache=!1,void 0===window.ezpbCache&&(e.useBidCache=!0)}},{key:"applyConfig",value:function(e){try{var t=this.createConfig();e.setConfig(t),d("Applied cache configuration",t)}catch(e){d("Error applying cache configuration",e)}}}])}(b);function C(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(C=function(){return!!e})()}var x=function(e){function r(){return t(this,r),e=this,n=arguments,i=h(i=r),v(e,C()?Reflect.construct(i,n||[],h(e).constructor):i.apply(e,n));var e,i,n}return y(r,e),o(r,[{key:"createConfig",value:function(){var e={usp:{cmpApi:"iab",timeout:0}};return"function"==typeof window.__gpp&&(e.gpp={cmpApi:"iab",timeout:0}),"function"==typeof window.__tcfapi&&(e.strictStorageEnforcement=!0,e.gdpr={cmpApi:"iab",timeout:12e4,defaultGdprScope:!0}),e}},{key:"applyConfig",value:function(e){try{var t=this.createConfig();e.setConfig({consentManagement:t}),d("[EPBJS] Applied consent configuration:",t)}catch(e){d("[EPBJS] Error applying consent configuration:",e)}}}])}(b);function I(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(I=function(){return!!e})()}var A=function(e){function r(){return t(this,r),e=this,n=arguments,i=h(i=r),v(e,I()?Reflect.construct(i,n||[],h(e).constructor):i.apply(e,n));var e,i,n}return y(r,e),o(r,[{key:"createConfig",value:function(){var e=[{name:"criteo"},{name:"unifiedId",params:{url:"//match.adsrvr.org/track/rid?ttd_pid=muno13d&fmt=json"},storage:{type:"cookie",name:"pbjs-unifiedid",expires:60}},{name:"quantcastId"},{name:"amxId",storage:{name:"amxId",type:"html5",expires:1}},{name:"sharedId",params:{},storage:{type:"cookie",name:"_sharedid",expires:365}},{name:"lotamePanoramaId"},{name:"hadronId",params:{partnerId:524}},{name:"33acrossId",params:{pid:"0010b00002MpnPqAAJ"},storage:{name:"33acrossId",type:"html5",expires:90,refreshInSeconds:28800}},{name:"pairId",params:{liveramp:{storageKey:"_lr_pairId"}}},{name:"FTrack",params:{url:"https://d9.flashtalking.com/d9core",ids:{"device id":!0,"single device id":!0,"household id":!0}},storage:{type:"html5",name:"FTrackId",expires:60,refreshInSeconds:28800}}];return e.push(this._createId5Config()),e.push(this._createLiveRampConfig()),e.push(this._createYahooConfig()),e}},{key:"_createId5Config",value:function(){var e={name:"id5Id",params:{partner:457,externalModuleUrl:"https://cdn.id5-sync.com/api/1.0/id5PrebidModule.js"},storage:{type:"html5",name:"id5id",expires:90,refreshInSeconds:28800}};return"undefined"!=typeof ez__id5pd&&(e.params.pd=ez__id5pd),e}},{key:"_createLiveRampConfig",value:function(){return{name:"identityLink",params:{pid:"14067",notUse3P:!1},storage:{type:"cookie",name:"idl_env",expires:15,refreshInSeconds:1800}}}},{key:"_createYahooConfig",value:function(){var e,t={name:"connectId",params:{pixelId:58713}};if(null!==(e=window.ezoicIdentity)&&void 0!==e&&e.getUID){var r,i=window.ezoicIdentity.getUID();i&&null!=i&&null!==(r=i.email)&&void 0!==r&&r.sha256&&(t.params.he=i.email.sha256)}return t}},{key:"applyConfig",value:function(){return this.createConfig()}}])}(b);function z(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(z=function(){return!!e})()}var F=function(e){function r(){var e,i,n,o,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t(this,r),i=this,o=[a],n=h(n=r),(e=v(i,z()?Reflect.construct(n,o||[],h(i).constructor):n.apply(i,o))).ortb2Config=a.ortb2Config||{},e.userIdConfig=a.userIdConfig||null,e}return y(r,e),o(r,[{key:"createConfig",value:function(){var e={};return this._setupDevMode(e),this._setupCurrency(e),this._setupTimeouts(e),this._setupMaxRequests(e),this._setupUserSync(e),this._setupDebugging(e),this._setupBidderTimeout(e),this._setupSendAllBids(e),this._setupTargeting(e),this._setupSizeConfig(e),this._setupCriteoBidVersion(e),e}},{key:"_setupDevMode",value:function(e){e.debug=Boolean(window.__ezpbdevmode)||window.location.search.indexOf("pbjs_debug=true")>-1||document.cookie.indexOf("pbjs_debug=true")>-1}},{key:"_setupCurrency",value:function(e){e.currency={adServerCurrency:"USD",granularityMultiplier:1,conversionRateFile:"https://cdn.jsdelivr.net/gh/prebid/currency-file@1/latest.json",defaultRates:{USD:{EUR:.85}}}}},{key:"_setupMaxRequests",value:function(e){e.maxRequestsPerOrigin=8,e.enableTIDs=!0,e.paapi={enabled:!0,gpt:{autoconfig:!1},defaultForSlots:1},e.disableAjaxTimeout=!0}},{key:"_setupTimeouts",value:function(e){e.bidderSequence="random",e.timeoutBuffer=400,e.eventHistoryTTL=10,e.minBidCacheTTL=300}},{key:"_setupUserSync",value:function(e){var t,r={filterSettings:{iframe:{bidders:t="undefined"!=typeof __allSiteApprovedBidders?__allSiteApprovedBidders:"*",filter:"include"},image:{bidders:t,filter:"include"}},syncDelay:3e3,syncEnabled:!0,aliasSyncEnabled:!0,auctionDelay:500};if(this.userIdConfig)r.userIds=this.userIdConfig;else{var i=new A;r.userIds=i.createConfig()}r.encryptedSignalSources={sources:[{source:["id5-sync.com","sharedid.org","pubcid.org","uidapi.com","criteo.com","liveramp.com","yahoo.com"],encrypt:!1}]},"function"==typeof window.document.browsingTopics&&(r.topics={maxTopicCaller:4,bidders:[{bidder:"pubmatic",iframeURL:"https://ads.pubmatic.com/AdServer/js/topics/topics_frame.html",expiry:7},{bidder:"openx",iframeURL:"https://pa.openx.net/topics_frame.html",expiry:7},{bidder:"onetag",iframeURL:"https://onetag-sys.com/static/topicsapi.html",expiry:7}]}),e.userSync=r}},{key:"_setupDebugging",value:function(e){if("1"===window.__ezmb||Boolean(window.__ezpbdevmode))try{e.testGroupId=1}catch(e){d("Error setting test group",e)}}},{key:"_setupBidderTimeout",value:function(e){window.__ez&&window.__ez.biddertimeout&&!isNaN(parseInt(window.__ez.biddertimeout))?e.bidderTimeout=parseInt(window.__ez.biddertimeout):window.__ez&&window.__ez.globalgtbidtimeout&&!isNaN(parseInt(window.__ez.globalgtbidtimeout))&&(e.bidderTimeout=parseInt(window.__ez.globalgtbidtimeout))}},{key:"_setupSendAllBids",value:function(e){e.enableSendAllBids=void 0===window.__ez.sendallbids||Boolean("true"===window.__ez.sendallbids)}},{key:"_setupTargeting",value:function(e){e.gptPreAuction={enabled:!0,mcmEnabled:!0},e.targetingControls={alwaysIncludeDeals:!0}}},{key:"_setupSizeConfig",value:function(e){e.sizeConfig=[{mediaQuery:"(min-width: 769px)",sizesSupported:[[970,250],[970,90],[728,90],[700,250],[300,250],[300,600],[160,600],[320,50]],labels:["desktop"]},{mediaQuery:"(min-width: 500px) and (max-width: 768px)",sizesSupported:[[300,250],[300,600],[728,90],[320,50]],labels:["tablet"]},{mediaQuery:"(min-width: 320px) and (max-width: 499px)",sizesSupported:[[300,250],[300,600],[320,50]],labels:["phone"]}]}},{key:"_setupCriteoBidVersion",value:function(e){e.criteo={fastBidVersion:"latest"}}},{key:"applyConfig",value:function(e){try{var t=this.createConfig();t.bidderTimeout=void 0===e.bidderTimeout||0===e.bidderTimeout?2500:e.bidderTimeout,Object.keys(this.ortb2Config).length>0&&e.mergeConfig({ortb2:this.ortb2Config}),e.setConfig(t),d("Applied main configuration",{mainConfig:t,ortb2:this.ortb2Config,userIdConfig:this.userIdConfig?"configured":"not provided"})}catch(e){d("Error applying main configuration",e)}}}])}(b);function j(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(j=function(){return!!e})()}var T=function(e){function r(){return t(this,r),e=this,n=arguments,i=h(i=r),v(e,j()?Reflect.construct(i,n||[],h(e).constructor):i.apply(e,n));var e,i,n}return y(r,e),o(r,[{key:"createConfig",value:function(){var e={};try{e=this._buildBaseOrtb2(),this._addAdvertiserRules(e),this._addIabCategories(e),this._addFirstPartySignals(e),this._addSiteInfo(e),this._addDeviceInfo(e),this._addGeoData(e)}catch(e){d("Error setting up ortb2",e)}return e}},{key:"_buildBaseOrtb2",value:function(){var e,t;return{site:{name:document.title,cattax:6,cat:[],sectioncat:[],pagecat:((null===(e=window._ezaq)||void 0===e?void 0:e.page_iab_categories)||[]).map((function(e){return e.toString()})),page:location.href,ref:document.referrer,keywords:(null===(t=document.querySelector('meta[name="keywords"]'))||void 0===t?void 0:t.content)||""},video:{minbitrate:300,maxbitrate:96e3}}}},{key:"_addAdvertiserRules",value:function(e){"undefined"!=typeof __advertiserRule&&(e.badv=__advertiserRule)}},{key:"_addIabCategories",value:function(e){var t,r,i;window.__ez&&window.__ez.tf&&"true"==window.__ez.tf.siteIAB&&(e.site.cat=((null===(r=window._ezaq)||void 0===r?void 0:r.site_iab_categories)||[]).map((function(e){return e.toString()}))),null!==(t=window._ezaq)&&void 0!==t&&t.iab_blocked_categories&&(e.site.bcat=((null===(i=window._ezaq)||void 0===i?void 0:i.iab_blocked_categories)||[]).split(",").map((function(e){return e.trim()})))}},{key:"_addFirstPartySignals",value:function(e){var t,r,i,n,o,a,s,d;null!==(t=window._ezaq)&&void 0!==t&&t.first_party_signals_page_categories&&(e.site.pagecat=((null===(o=window._ezaq)||void 0===o?void 0:o.first_party_signals_page_categories)||[]).split(",").map((function(e){return e.trim()}))),null!==(r=window._ezaq)&&void 0!==r&&r.first_party_signals_domain_categories&&(e.site.cat=((null===(a=window._ezaq)||void 0===a?void 0:a.first_party_signals_domain_categories)||[]).split(",").map((function(e){return e.trim()})),(!e.site.pagecat||e.site.pagecat&&0===e.site.pagecat.length)&&(e.site.pagecat=e.site.cat)),null!==(i=window._ezaq)&&void 0!==i&&i.first_party_signals_keywords&&(e.site.keywords=null===(s=window._ezaq)||void 0===s?void 0:s.first_party_signals_keywords),null!==(n=window._ezaq)&&void 0!==n&&n.ortb_signals_language&&(e.site.content=e.site.content||{},e.site.content.language=null===(d=window._ezaq)||void 0===d?void 0:d.ortb_signals_language)}},{key:"_addSiteInfo",value:function(e){var t="undefined"!=typeof _ezaq?_ezaq.domain:"";""!=t&&(e.site.domain=t),e.site.mobile=1,e.site.privacypolicy=1}},{key:"_addDeviceInfo",value:function(e){var t,r;e.device=e.device||{},e.device.ua=navigator.userAgent,e.device.dnt="1"===navigator.doNotTrack?1:0,e.device.devicetype=2,e.device.js=1,2===(null===(t=window._ezaq)||void 0===t?void 0:t.form_factor_id)?e.device.devicetype=4:3===(null===(r=window._ezaq)||void 0===r?void 0:r.form_factor_id)&&(e.device.devicetype=5)}},{key:"_addGeoData",value:function(e){var t;if(null!==(t=window._ezaq)&&void 0!==t&&t.country){var r=window._ezaq,i=r.country,n=r.state,o={country:l(i)||"USA"};if(n){var a=function(e,t){if(e&&t){var r=e.toUpperCase(),i=t.toUpperCase();return"US"===r?i:"".concat(r,"-").concat(i)}}(i,n);a&&(o.region=a)}e.user=e.user||{},e.user.geo=o,e.device=e.device||{},e.device.geo=o}}},{key:"applyConfig",value:function(e){d("ORTB2 configuration created but applied by MainConfigFactory")}}])}(b);function R(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(R=function(){return!!e})()}var E=function(e){function r(){return t(this,r),e=this,n=arguments,i=h(i=r),v(e,R()?Reflect.construct(i,n||[],h(e).constructor):i.apply(e,n));var e,i,n}return y(r,e),o(r,[{key:"createConfig",value:function(){var e={};return!0===window.ezhbopt?e.buckets=[{precision:2,min:0,max:300,increment:.01}]:e.buckets=[{precision:2,min:0,max:5,increment:.01},{precision:2,min:5,max:50,increment:.1},{precision:2,min:50,max:120,increment:5}],e}},{key:"applyConfig",value:function(e){try{var t=this.createConfig();e.setConfig({priceGranularity:t}),d("Applied price granularity configuration",t)}catch(e){d("Error applying price granularity configuration",e)}}}])}(b);function U(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(U=function(){return!!e})()}var M=function(e){function r(){return t(this,r),e=this,n=arguments,i=h(i=r),v(e,U()?Reflect.construct(i,n||[],h(e).constructor):i.apply(e,n));var e,i,n}return y(r,e),o(r,[{key:"createConfig",value:function(){var e={};return"undefined"!=typeof __s2sbidders&&__s2sbidders.length>0||"undefined"!=typeof __s2sinstreambidders&&__s2sinstreambidders.length>0||"undefined"!=typeof __s2soutstreambidders&&__s2soutstreambidders.length>0?("undefined"!=typeof __s2sbidders&&(__s2sbidders=__s2sbidders.filter((function(e){return e.endsWith("_s2s")}))),e=[this._generateS2SConfig("display"),this._generateS2SConfig("outstream"),this._generateS2SConfig("instream")],this._configureMediaNet(e),this._addS2SAliasesToSS(e),e):e}},{key:"_generateS2SConfig",value:function(e){var t=[],r={},i=!1;e&&"display"!==e?"outstream"===e?(t="undefined"!=typeof __s2soutstreambidders?__s2soutstreambidders:[],r=this._getOutstreamAliases(),i=!0):"instream"===e&&(t="undefined"!=typeof __s2sinstreambidders?__s2sinstreambidders:[],r=this._getInstreamAliases(),i=!0):(e="display",t="undefined"!=typeof __s2sbidders?__s2sbidders:[],r=this._getDisplayAliases());var n={name:e,accountId:"1",enabled:!0,endpoint:"https://pbserver.ezoic.com/openrtb2/auction",syncEndpoint:"https://pbserver.ezoic.com/cookie_sync",bidders:t,timeout:750,extPrebid:{targeting:{pricegranularity:{ranges:[{max:300,increment:.01}]},includewinners:!0,includebidderkeys:!0},cache:{vastxml:{returnCreative:!1}},aliases:r}};return i?n.defaultTtl=120:n.extPrebid.floors={enabled:!0,enforcement:{enforcepbs:!1},data:{currency:"USD",floorsschemaversion:2,modelgroups:[{modelversion:"1.0",currency:"USD",default:.01,schema:{delimiter:"|",fields:["mediaType","size"]},values:{"*|*":.01}}]}},n}},{key:"_getDisplayAliases",value:function(){return{"33across_s2s":"33across",adyoulike_s2s:"adyoulike",amx_s2s:"amx",appnexus_s2s:"appnexus",cadent_aperture_mx_s2s:"cadent_aperture_mx",criteo_s2s:"criteo",inmobi_s2s:"inmobi",insticator_s2s:"insticator",ix_s2s:"ix",medianet_s2s:"medianet",minutemedia_s2s:"minutemedia",onetag_s2s:"onetag",openx_s2s:"openx",pubmatic_s2s:"pubmatic",rubicon_s2s:"rubicon",sharethrough_s2s:"sharethrough",smartadserver_s2s:"smartadserver",sonobi_s2s:"sonobi",sovrn_s2s:"sovrn",triplelift_s2s:"triplelift",trustedstack_s2s:"trustedstack",unruly_s2s:"unruly",vidazoo_s2s:"vidazoo",yieldmo_s2s:"yieldmo"}}},{key:"_getOutstreamAliases",value:function(){return{"33across_o_s2s":"33across",adyoulike_o_s2s:"adyoulike",amx_o_s2s:"amx",appnexus_o_s2s:"appnexus",cadent_aperture_mx_o_s2s:"cadent_aperture_mx",criteo_o_s2s:"criteo",inmobi_o_s2s:"inmobi",insticator_o_s2s:"insticator",ix_o_s2s:"ix",medianet_o_s2s:"medianet",minutemedia_o_s2s:"minutemedia",onetag_o_s2s:"onetag",openx_o_s2s:"openx",pubmatic_o_s2s:"pubmatic",rubicon_o_s2s:"rubicon",sharethrough_o_s2s:"sharethrough",smartadserver_o_s2s:"smartadserver",sonobi_o_s2s:"sonobi",sovrn_o_s2s:"sovrn",triplelift_o_s2s:"triplelift",trustedstack_o_s2s:"trustedstack",unruly_o_s2s:"unruly",vidazoo_o_s2s:"vidazoo",yieldmo_o_s2s:"yieldmo"}}},{key:"_getInstreamAliases",value:function(){return{"33across_i_s2s":"33across",adyoulike_i_s2s:"adyoulike",amx_i_s2s:"amx",appnexus_i_s2s:"appnexus",cadent_aperture_mx_i_s2s:"cadent_aperture_mx",criteo_i_s2s:"criteo",inmobi_i_s2s:"inmobi",insticator_i_s2s:"insticator",ix_i_s2s:"ix",medianet_i_s2s:"medianet",minutemedia_i_s2s:"minutemedia",onetag_i_s2s:"onetag",openx_i_s2s:"openx",pubmatic_i_s2s:"pubmatic",rubicon_i_s2s:"rubicon",sharethrough_i_s2s:"sharethrough",smartadserver_i_s2s:"smartadserver",sonobi_i_s2s:"sonobi",sovrn_i_s2s:"sovrn",triplelift_i_s2s:"triplelift",trustedstack_i_s2s:"trustedstack",unruly_i_s2s:"unruly",vidazoo_i_s2s:"vidazoo",yieldmo_i_s2s:"yieldmo"}}},{key:"_configureMediaNet",value:function(e){var t;if("true"===(null===(t=window.__ez)||void 0===t||null===(t=t.tf)||void 0===t?void 0:t.MNetS2S)){var r="8CUIXQW8H";e.forEach((function(e){e.accountId=r,e.endpoint="https://prebid-s2s.media.net/openrtb2/auction",e.syncEndpoint="https://prebid-s2s.media.net/cookie_sync",e.extPrebid.cache={vastxml:{returnCreative:!0}},e.extPrebid.aliases.hasOwnProperty("rubicon_i_s2s")&&(e.extPrebid.aliases.rubicon_i_s2s=r),e.extPrebid.aliases.hasOwnProperty("rubicon_o_s2s")&&(e.extPrebid.aliases.rubicon_o_s2s=r)})),this.epbjs&&"function"==typeof this.epbjs.enableAnalytics&&this.epbjs.enableAnalytics([{provider:"medianetAnalytics",options:{cid:r}}])}}},{key:"_addS2SAliasesToSS",value:function(e){var t=this;void 0!==this.epbjs&&this.epbjs.SS&&e.forEach((function(e){for(var r in e.extPrebid.aliases){var i,n=e.extPrebid.aliases[r];if("true"===(null===(i=window.__ez)||void 0===i||null===(i=i.tf)||void 0===i?void 0:i.MNetS2S)&&"8CUIXQW8H"===n&&(n="rubicon"),t.epbjs.SS.hasOwnProperty(n)){var o=t.epbjs.SS[n];t.epbjs.SS[r]=o}}}))}},{key:"applyConfig",value:function(e){try{this.epbjs=e;var t=this.createConfig();Array.isArray(t)&&t.length>0?(e.setConfig({s2sConfig:t}),d("Applied S2S configuration",t)):d("No S2S configuration to apply")}catch(e){d("Error applying S2S configuration",e)}}}])}(b);function D(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(D=function(){return!!e})()}var L=function(e){function r(){var e,i,n,o,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ezoic.ai";return t(this,r),i=this,o=[a],n=h(n=r),(e=v(i,D()?Reflect.construct(n,o||[],h(i).constructor):n.apply(i,o))).schainDomain=s,e}return y(r,e),o(r,[{key:"createConfig",value:function(){var e="";return"undefined"!=typeof __sellerid&&(e=__sellerid),{validation:"strict",config:{ver:"1.0",complete:1,nodes:[{asi:this.schainDomain,sid:e,hp:1}]}}}},{key:"applyConfig",value:function(e){try{var t=this.createConfig();e.setConfig({schain:t}),d("Applied supply chain configuration",t)}catch(e){d("Error applying supply chain configuration",e)}}}])}(b),V=function(){return o((function e(r){t(this,e),this.epbjs=r,this.factories={},this._initializeFactories()}),[{key:"_initializeFactories",value:function(){this.factories.ortb=new T(this.epbjs),this.factories.consent=new x(this.epbjs),this.factories.priceGranularity=new E(this.epbjs),this.factories.userId=new A(this.epbjs),this.factories.supplyChain=new L(this.epbjs),this.factories.s2s=new M(this.epbjs),this.factories.analytics=new _(this.epbjs),this.factories.bidderAlias=new B(this.epbjs),this.factories.cache=new S(this.epbjs),this.factories.bidderSettings=new O(this.epbjs);var e=this.factories.ortb.createConfig(),t=this.factories.userId.createConfig();this.factories.main=new F({ortb2Config:e,userIdConfig:t})}},{key:"applyAllConfigurations",value:function(){try{d("Starting Prebid configuration"),this._applyConfiguration(),d("All Prebid configurations applied successfully")}catch(e){d("Error applying Prebid configurations",e)}}},{key:"_applyConfiguration",value:function(){this.factories.consent.applyConfig(this.epbjs),this.factories.priceGranularity.applyConfig(this.epbjs),this.factories.userId.applyConfig(this.epbjs),this.factories.supplyChain.applyConfig(this.epbjs),this.factories.s2s.applyConfig(this.epbjs),this.factories.main.applyConfig(this.epbjs),this.factories.bidderAlias.applyConfig(this.epbjs),this.factories.cache.applyConfig(this.epbjs),this.factories.bidderSettings.applyConfig(this.epbjs),this.factories.analytics.applyConfig(this.epbjs)}},{key:"getFactory",value:function(e){return this.factories[e]||null}}])}();void 0!==window.ezptlog&&!0===window.ezptlog&&(window.epbjs=window.epbjs||{},window.epbjs.que=window.epbjs.que||[]);const N=function(){return o((function e(){t(this,e),window.epbjs=window.epbjs||{},epbjs=window.epbjs||{},epbjs.que=epbjs.que||[],epbjs.ezAdUnits=epbjs.ezAdUnits||[],epbjs.ezdss=epbjs.ezdss||[],epbjs.ezas=epbjs.ezas||[],epbjs.ezobid=epbjs.ezobid||[],window.ezoptbid=window.ezoptbid||[],this.videoHBEnabled="undefined"!=typeof __ezInstream||"undefined"!=typeof __ezOutstream}),[{key:"init",value:function(){var e=this;a((function(){p(),e.setUpGlobalFunctions(),e.setUpConfigs(),void 0!==__ez.fads&&1!=__ez.fads.isJIT&&e.setUpEventListeners()}),"EpbjsController.init")()}},{key:"setUpGlobalFunctions",value:function(){window.getSlotForhb=a((function(e){for(var t in window.ezslots)if(window[window.ezslots[t]].getSlotElementId()==e)return window[window.ezslots[t]]}),"getSlotForhb"),window.epbjsRequestAdUnits=a((function(e){if(void 0!==window.ezoResponsiveSizes)for(var t=0;t<e.length;t++)e[t]=window.epbjsApplyResponsiveSizes(e[t]);void 0!==window.ezstandalone?epbjs.que.push(a((function(){for(var t in e){var r=e[t];epbjs.removeAdUnit(r.code);var i=!1;for(var n in epbjs.ezAdUnits)epbjs.ezAdUnits[n].code==r.code&&(epbjs.ezAdUnits[n]=JSON.parse(JSON.stringify(r)),i=!0);i||epbjs.ezAdUnits.push(JSON.parse(JSON.stringify(r)))}epbjs.addAdUnits(e)}),"epbjsRequestAdUnits.1")):epbjs.que.push(a((function(){epbjs.ezAdUnits=JSON.parse(JSON.stringify(e)),epbjs.addAdUnits(e)}),"epbjsRequestAdUnits.2")),epbjsBidRequest(e)}),"epbjsRequestAdUnits"),window.epbjsBidRequest=a((function(e){epbjs.que.push(a((function(){for(var t={},r=0;r<e.length;r++){if(void 0!==epbjs.ezBidCache&&epbjs.ezBidCache.hasBidForAdUnit(e[r].code)){var i=epbjs.ezBidCache.getTopBidEventForAdUnit(e[r].code);null!==i&&(t[e[r].code]={bids:i})}window.setAuctionActive(e[r].code)}t.length>0&&("function"==typeof window.ezosethbbids?window.ezosethbbids(t):window.ezosethbbidsInterval=setInterval((function(e){"function"==typeof ezosethbbids&&ezosethbbids(e)}),130,t)),epbjs.requestBids({adUnits:e,bidsBackHandler:function(e){"function"==typeof window.ezosethbbids?window.ezosethbbids(e):window.ezosethbbidsInterval=setInterval((function(e){"function"==typeof ezosethbbids&&ezosethbbids(e)}),130,e)}})}),"epbjsBidRequest.1"))}),"epbjsBidRequest"),window.epbjsApplyResponsiveSizes=a((function(e){if(void 0===window.ezoResponsiveSizes||void 0===window.ezoResponsiveSizes[e.code])return e;for(var t=!1,r=[],i=0;i<ezoResponsiveSizes[e.code].responsiveSizes.length;i++){var n=ezoResponsiveSizes[e.code].responsiveSizes[i];0===n.minWidth&&0===n.minHeight&&(t=!0);var o=n.sizes;n.altSizes&&(o=o.concat(n.altSizes)),r.push({minViewPort:[n.minWidth,n.minHeight],sizes:o})}return t||(r=[{minViewPort:[0,0],sizes:[]}].concat(r)),e.mediaTypes={banner:{sizeConfig:r}},e}),"epbjsApplyResponsiveSizes"),window.epbjsRefreshSlot=a((function(e){epbjs.que.push(a((function(){window.setAuctionActive(e.getSlotElementId()),epbjs.requestBids({adUnitCodes:[e.getSlotElementId()],bidsBackHandler:function(t){if(epbjs.setPAAPIConfigForGPT(),epbjs.fastLoadAuctionEnd=!0,window.ezosethbbids(t),void 0!==epbjs.ezBidCache){var r=epbjs.ezBidCache.getTopBidEventForAdUnit(e.getSlotElementId());null!==r&&(r.from_cache=!0,window.ezosethbbid(r))}}})}),"epbjsRefreshSlot.1"))}),"epbjsRefreshSlot"),window.setAuctionActive=a((function(e){window.activeAuctions=window.activeAuctions||{},window.activeAuctions[e]=!0}),"setAuctionActive"),window.setAuctionFinished=a((function(e){window.activeAuctions&&delete window.activeAuctions[e],window.isHbFinished=!0}),"setAuctionFinished"),window.isValid256Hash=a((function(e){return null!==e.match(/^[a-fA-F0-9]{64}$/g)}),"isValid256Hash")}},{key:"setUpEIDUserIds",value:function(e){var t,r=this;if(null!==(t=window.ezoicIdentity)&&void 0!==t&&t.getUID){if(!window.ezoicIdentity.getUID()&&e&&Date.now()-e<=2e3)return void setTimeout((function(){r.setUpEIDUserIds(e)}),50)}else if(e&&Date.now()-e<=2e3)return void setTimeout((function(){r.setUpEIDUserIds(e)}),50);var i=epbjs.getUserIdsAsEids(),n=epbjs.getConfig("ortb2")||{};n.user=n.user||{},n.user.eids=i,epbjs.setConfig({ortb2:n})}},{key:"setUpCriteoUserIds",value:function(e){var t,r,i=this;if("undefined"!=typeof ez__sspDomain){var n;if(null!==(t=window.ezoicIdentity)&&void 0!==t&&t.getUID){if(!(n=window.ezoicIdentity.getUID())&&e&&Date.now()-e<=2e3)return void setTimeout((function(){i.setUpCriteoUserIds(e)}),50)}else if(e&&Date.now()-e<=2e3)return void setTimeout((function(){i.setUpCriteoUserIds(e)}),50);var o=[];null!==(r=n)&&void 0!==r&&null!==(r=r.email)&&void 0!==r&&r.sha256?(o.push({id:n.email.sha256,atype:3,ext:{stype:"hemsha256"}}),n.email.md5&&o.push({id:n.email.md5,atype:3,ext:{stype:"hemmd5"}})):"undefined"!=typeof ez__uIdHash&&o.push({id:ez__uIdHash,atype:1,ext:{stype:"ppuid",persistence:"js"}}),o.length>0&&epbjs.setBidderConfig({bidders:["criteo"],config:{ortb2:{user:{ext:{data:{eids:[{source:ez__sspDomain,uids:o}]}}}}},fledgeEnabled:!0,defaultForSlots:1},!0)}}},{key:"setUpConfigs",value:function(){var e=this;epbjs.que.push(a((function(){new V(epbjs).applyAllConfigurations(),setTimeout((function(){var e;__ez&&__ez.ce&&"function"==typeof __ez.ce.AddPageviewEvent&&__ez.ce.AddPageviewEvent("has_page_iab_cats",((null===(e=window._ezaq)||void 0===e||null===(e=e.page_iab_categories)||void 0===e?void 0:e.length)||0)>0?1:0)}),1e3),e.setUpCriteoUserIds(Date.now()),e.setUpEIDUserIds(Date.now()),void 0!==__allBidders.find((function(e){return"yahoossp"===e.bidder}))&&epbjs.setConfig({yahoossp:{mode:"all"}}),d("Prebid configuration completed successfully")}),"setUpConfigs"))}},{key:"getAllVideoProviders",value:function(){var e=[];return videojs&&videojs.getAllPlayers().forEach((function(t){var r={divId:t.id_,vendorCode:2,playerConfig:{params:{adPluginConfig:{numRedirects:10},vendorConfig:{controls:!1,autoplay:!0,preload:"auto"}}}};e.push(r)})),e}},{key:"setUpEventListeners",value:function(){epbjs.que.push((function(){epbjs.onEvent("bidWon",(function(t){var r=getSlotForhb(t.adUnitCode);if("true"==new URL(window.location.href).searchParams.get("ez_hb_fill_debug")){console.log("[EZ_HB_FILL_DEBUG]:",t.adUnitCode,"\nAd Network:",t.bidder,"\nPlaceholder ID:",parseInt(r.getTargeting("ap")[0])%1e3,"\nSize:",t.size,"\nAdvertiser Info:",t.meta,"\nRequest params:",t.params,"\nSource:",t.source,"\nFull bid info:",t);var i=document.createElement("h4");i.innerText="Ad Network: "+t.bidder+" "+t.source,i.style="color:black;background-color:white;border:solid green;";var n=document.getElementById(t.adUnitCode);null!=n&&n.children.length>0&&n.children[0].insertAdjacentElement("afterbegin",i)}var o=r.getTargeting("ic")[0];if(void 0!==o){var a=parseInt(o);isNaN(a)||__ez.pel.Add(r,[new __ezDotData("refresh_count",a)])}var s=r.getTargeting("eb_br")[0];void 0!==s&&__ez.pel.Add(r,[new __ezDotData("filled_bid_hash",s)]);var d=0;void 0!==r.getTargeting("lb")[0]&&(d=parseInt(r.getTargeting("lb")[0])/1e5);var u=t.bidder.toLowerCase(),l=0;void 0!==epbjs.SS[u]&&(l=epbjs.SS[u],__ez.pel.Add(r,[new __ezDotData("stat_source_id",l)],t.cpm/1e3,0,t.cpm/1e3,d,l));var c=r.getTargeting("hb_rt");if(void 0!==e(c)&&c.length>0&&""!==String(c[0])){var f,p=String(c[0]);"true"===(null===(f=window.__ez)||void 0===f||null===(f=f.tf)||void 0===f?void 0:f.MNetS2S)&&"s2s"===p&&(p="mnet"),__ez.pel.Add(r,[new __ezDotData("prebid_source",p)])}var v=t.cpm/1e3;__ez.pel.Add(r,[new __ezDotData("loaded",1)],v,0,v,d,l),__ez.bit.Add(window._ezaq.page_view_id,[new __ezDotData("est_revenue_usd",v)])})),epbjs.onEvent("bidResponse",(function(t){if("object"==e(epbjs.bidderSettings)&&t.bidder in epbjs.bidderSettings&&"function"==typeof epbjs.bidderSettings[t.bidder].bidCpmAdjustment){var r=Math.floor(100*epbjs.bidderSettings[t.bidder].bidCpmAdjustment(t.cpm,t))/100;void 0===r||isNaN(r)||(t.cpm=r,t.pbCg=r,t.adserverTargeting.epp=r)}if(void 0!==epbjs.ezBidCache){epbjs.ezBidCache.setHigherBidForAdUnit(t);var i=epbjs.ezBidCache.getTopBidEventForAdUnit(t.adUnitCode);null!==i&&(t=i)}window.ezosethbbid(t)})),epbjs.onEvent("auctionEnd",(function(e){var t,r=function(r){window.setAuctionFinished(e.adUnitCodes[r]),void 0!==window.nbabt&&!0===window.nbabt&&(t=window.ezslots.filter((function(t){return window[t].getSlotElementId()===e.adUnitCodes[r]}))).length>0&&""!=window[t[0]].getTargeting("hb_opt")[0]&&window.adjustHbValues&&window.adjustHbValues(window[t[0]])};for(var i in e.adUnitCodes)r(i);window.PrebidImpressionController&&(window.PrebidImpressionController.recordAuctionEndImpressions(e),window.PrebidImpressionController.batchFireAll())})),epbjs.onEvent("bidWon",(function(e){window.triggerPbjsAdWin(e),window.PrebidImpressionController&&window.PrebidImpressionController.recordAndFireImpressionWonEvent(e)})),window.triggerPbjsAdWin=function(e){var t=e.bidder;epbjs.ezas[e.adUnitCode]=e.size,"ehb"==t?epbjs.ezdss[e.adUnitCode]=e.ss:void 0!==epbjs.SS[t.toLowerCase()]?(epbjs.ezdss[e.adUnitCode]=epbjs.SS[t.toLowerCase()],1==epbjs.useAdj&&epbjs.bidders.indexOf(e.bidder)>-1&&(epbjs.ezobid[e.adUnitCode]=e.cpm/epbjs.gadj)):void 0!==epbjs.SS[t.toLowerCase()]?(epbjs.ezdss[e.adUnitCode]=epbjs.SS[t.toLowerCase()],1==epbjs.useAdj&&epbjs.bidders.indexOf(t.toLowerCase())>-1&&(epbjs.ezobid[e.adUnitCode]=e.cpm/epbjs.gadj)):console.error("epbjs: NO MATCH",e.bidder,epbjs.SS),void 0!==epbjs.ezBidCache&&epbjs.ezBidCache.clearBidForUnit(e.adUnitCode,e.bidderCode)}}))}}])}();function H(e,t,r,i,n,o,a){try{var s=e[o](a),d=s.value}catch(e){return void r(e)}s.done?t(d):Promise.resolve(d).then(i,n)}function q(e){return function(){var t=this,r=arguments;return new Promise((function(i,n){var o=e.apply(t,r);function a(e){H(o,i,n,a,s,"next",e)}function s(e){H(o,i,n,a,s,"throw",e)}a(void 0)}))}}function W(e,t,r){return(t=i(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var G=r(756),K=r.n(G);function J(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=Array(t);r<t;r++)i[r]=e[r];return i}function Y(e,t){if(e){if("string"==typeof e)return J(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?J(e,t):void 0}}function Z(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var i,n,o,a,s=[],d=!0,u=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;d=!1}else for(;!(d=(i=o.call(r)).done)&&(s.push(i.value),s.length!==t);d=!0);}catch(e){u=!0,n=e}finally{try{if(!d&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw n}}return s}}(e,t)||Y(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Q={epb:"hb_bidder",epa:"hb_adid",epp:"hb_pb",epf:"hb_format",eps:"hb_ssid"},X="https://pubads.g.doubleclick.net/gampad/ads?iu=/21775744923/external/single_preroll_skippable&sz=640x480&ciu_szs=300x250%2C728x90&gdfp_req=1&output=vast&unviewed_position_start=1&env=vp&impl=s&correlator=",$="prebid",ee="-octx",te="https://vastproxy.ezoic.net",re={UNIFORM:"uniform",EXPONENTIAL:"exponential",GEOMETRIC:"geometric",HIGH_END:"highEnd",LOW_END:"lowEnd",HISTORICAL:"historical",HISTORICAL_BIDDER:"historicalBidder",RAMP_UP:"rampUp"};function ie(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return"undefined"!=typeof __ez&&__ez.tf&&"3"===__ez.tf.vabmf&&t&&"undefined"!=typeof __ezOutstream&&__ezOutstream.leastStatSourceFloors?null!==e&&__ezOutstream.leastStatSourceFloors.hasOwnProperty(e.ssid)?__ezOutstream.leastStatSourceFloors[e.ssid]:.02:0}function ne(e,t,r){return new Promise((function(i,n){var o=function(){window.hasOwnProperty(e)&&(clearTimeout(a),clearInterval(s),i(window[e]))},a=setTimeout((function(){n("Variable not found.")}),t),s=setInterval(o,r);o()}))}function oe(){if(ae()){var e=Array.from(arguments);e.unshift("[Video HB]"),console.log.apply(console,e)}}function ae(){return"1"===new URLSearchParams(window.location.search).get("ez_vhb_debug")}function se(){return"1"===new URLSearchParams(window.location.search).get("ez_fake_instream")}function de(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0]?window.__ezOutstream:window.__ezInstream;return void 0!==e&&void 0!==e.monetizationApproval&&e.monetizationApproval.MCMApproved}function ue(e){if(null==e)return e;try{if("function"==typeof structuredClone)return structuredClone(e)}catch(e){console.debug("structuredClone failed, falling back to JSON method",e)}try{return JSON.parse(JSON.stringify(e))}catch(t){return console.error("Deep clone failed:",t),e}}function le(e){var t;return null===(t=window.ezVideoAdConductor)||void 0===t||null===(t=t.getVideoAdConductor())||void 0===t?void 0:t.getPlayerById(e)}function ce(e){if(epbjs&&epbjs.SS&&epbjs.SS.hasOwnProperty(e))return epbjs.SS[e];var t={};return"undefined"!=typeof __ezInstream&&__ezInstream.prebidBidders&&Array.isArray(__ezInstream.prebidBidders)&&__ezInstream.prebidBidders.forEach((function(e){void 0!==e.ssid&&(t[e.bidder]=parseInt(e.ssid))})),"undefined"!=typeof __ezOutstream&&__ezOutstream.prebidBidders&&Array.isArray(__ezOutstream.prebidBidders)&&__ezOutstream.prebidBidders.forEach((function(e){void 0!==e.ssid&&(t[e.bidder]=parseInt(e.ssid))})),t[e]}ie();var fe=function(){return o((function e(r){t(this,e),this.bidderName=r}),[{key:"applyBidParams",value:function(e,t){return e}},{key:"applyAdUnitParams",value:function(e,t){return e}},{key:"applyAbTestParams",value:function(e,t){var r,i;if(e.bidder.includes("ttd"))return e;var n,o,a=t.isOutstream,s=t.player;return"true"===(null===(r=__ez)||void 0===r||null===(r=r.tf)||void 0===r?void 0:r.vappp)&&!a&&null!=s&&s.isCurrentlyFloating()&&3===(null===(n=e.params)||void 0===n||null===(n=n.video)||void 0===n?void 0:n.pos)&&(e.params.video.pos=2),"1"===(null===(i=__ez)||void 0===i||null===(i=i.tf)||void 0===i?void 0:i.vappp)&&(null==e||null===(o=e.params)||void 0===o||null===(o=o.video)||void 0===o?void 0:o.pos)>1&&(e.params.video.pos=1),e}},{key:"convertPlcmtToPlacement",value:function(e){return 1==e||2==e?1:5}},{key:"getBidFloor",value:function(e){return 0}},{key:"setBidFloor",value:function(e,t){return e}}])}();function pe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(pe=function(){return!!e})()}var ve=function(e){function r(){return t(this,r),e=this,n=["33across"],i=h(i=r),v(e,pe()?Reflect.construct(i,n||[],h(e).constructor):i.apply(e,n));var e,i,n}return y(r,e),o(r,[{key:"applyBidParams",value:function(e,t){var r,i=t.isOutstream,n=t.prebidParams,o=t.shouldSendBidFloor,a=t.floorVal;return o&&a>0&&(e.getFloor=function(){return{currency:"USD",floor:a}}),i&&("instream"===(null===(r=e.params)||void 0===r?void 0:r.productId)&&4===(null==n?void 0:n.plcmt)&&(e.params.productId="siab"),e.renderer={url:"https://imasdk.googleapis.com/js/sdkloader/ima3.js",render:function(e){},backupOnly:!0}),e}},{key:"setBidFloor",value:function(e,t){return t>0&&(e.getFloor=function(){return{currency:"USD",floor:t}}),e}},{key:"getBidFloor",value:function(e){return null!=e&&e.getFloor?e.getFloor().floor:0}}])}(fe);function he(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(he=function(){return!!e})()}var me=function(e){function r(){return t(this,r),e=this,n=["amx"],i=h(i=r),v(e,he()?Reflect.construct(i,n||[],h(e).constructor):i.apply(e,n));var e,i,n}return y(r,e),o(r,[{key:"applyBidParams",value:function(e,t){var r=t.shouldSendBidFloor,i=t.floorVal,n=t.isOutstream;return r&&i>0&&(e.params.floor=i),n&&(e.renderer={url:"https://imasdk.googleapis.com/js/sdkloader/ima3.js",render:function(e){},backupOnly:!0}),e}},{key:"getBidFloor",value:function(e){var t;return(null==e||null===(t=e.params)||void 0===t?void 0:t.floor)||0}},{key:"setBidFloor",value:function(e,t){return t>0&&(e.params.floor=t),e}}])}(fe);function ye(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ye=function(){return!!e})()}var be=function(e){function r(){return t(this,r),e=this,n=["amx"],i=h(i=r),v(e,ye()?Reflect.construct(i,n||[],h(e).constructor):i.apply(e,n));var e,i,n}return y(r,e),o(r,[{key:"applyBidParams",value:function(e,t){return t.isOutstream&&(e.renderer={url:"https://imasdk.googleapis.com/js/sdkloader/ima3.js",render:function(e){},backupOnly:!0}),e}}])}(fe);function ge(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ge=function(){return!!e})()}var _e=function(e){function r(){return t(this,r),e=this,n=["appnexus"],i=h(i=r),v(e,ge()?Reflect.construct(i,n||[],h(e).constructor):i.apply(e,n));var e,i,n}return y(r,e),o(r,[{key:"getContextParamValue",value:function(e,t){if(t)return"outstream";switch(e){case"start":return"pre_roll";case"end":return"post_roll";default:return"mid_roll"}}},{key:"applyBidParams",value:function(e,t){var r=t.shouldSendBidFloor,i=t.floorVal,n=t.isOutstream,o=t.minDur,a=t.maxDur,s=t.skippable,d=t.timeOffset,u=this.getContextParamValue(d,n);return r&&i>0&&(e.params.reserve=i),e.params.video||(e.params.video={}),e.params.video.context=u,e.params.video.playback_method="auto_play_sound_off",e.params.video.protocols=[2,6],e.params.video.minduration=o,e.params.video.maxduration=a,e.params.video.skippable=s,n&&(e.renderer={url:"https://imasdk.googleapis.com/js/sdkloader/ima3.js",render:function(e){},backupOnly:!0}),e}},{key:"getBidFloor",value:function(e){var t;return(null==e||null===(t=e.params)||void 0===t?void 0:t.reserve)||0}},{key:"setBidFloor",value:function(e,t){return t>0&&(e.params.reserve=t),e}}])}(fe);function we(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(we=function(){return!!e})()}var Be=function(e){function r(){return t(this,r),e=this,n=["appnexus"],i=h(i=r),v(e,we()?Reflect.construct(i,n||[],h(e).constructor):i.apply(e,n));var e,i,n}return y(r,e),o(r,[{key:"getContextParamValue",value:function(e,t){if(t)return"outstream";switch(e){case"start":return"pre_roll";case"end":return"post_roll";default:return"mid_roll"}}},{key:"applyBidParams",value:function(e,t){var r=t.isOutstream,i=t.minDur,n=t.maxDur,o=t.skippable,a=t.timeOffset,s=this.getContextParamValue(a,r);return e.params.video||(e.params.video={}),e.params.video.context=s,e.params.video.playback_method="auto_play_sound_off",e.params.video.protocols=[2,6],e.params.video.minduration=i,e.params.video.maxduration=n,e.params.video.skippable=o,r&&(e.renderer={url:"https://imasdk.googleapis.com/js/sdkloader/ima3.js",render:function(e){},backupOnly:!0}),e}},{key:"getBidFloor",value:function(e){var t;return(null==e||null===(t=e.params)||void 0===t?void 0:t.reserve)||0}},{key:"setBidFloor",value:function(e,t){return t>0&&(e.params.reserve=t),e}}])}(fe);function ke(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ke=function(){return!!e})()}var Oe=function(e){function r(){return t(this,r),e=this,n=["cadentaperturemx"],i=h(i=r),v(e,ke()?Reflect.construct(i,n||[],h(e).constructor):i.apply(e,n));var e,i,n}return y(r,e),o(r,[{key:"applyBidParams",value:function(e,t){var r=t.shouldSendBidFloor,i=t.floorVal,n=t.isOutstream;return r&&i>0&&(e.params.bidfloor=i.toString()),n&&(e.renderer={url:"https://imasdk.googleapis.com/js/sdkloader/ima3.js",render:function(e){},backupOnly:!0}),e}},{key:"getBidFloor",value:function(e){var t;return parseFloat(null==e||null===(t=e.params)||void 0===t?void 0:t.bidfloor)||0}},{key:"setBidFloor",value:function(e,t){return t>0&&(e.params.bidfloor=t.toString()),e}}])}(fe);function Pe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Pe=function(){return!!e})()}var Se=function(e){function r(){return t(this,r),e=this,n=["cadentaperturemx"],i=h(i=r),v(e,Pe()?Reflect.construct(i,n||[],h(e).constructor):i.apply(e,n));var e,i,n}return y(r,e),o(r,[{key:"applyBidParams",value:function(e,t){return t.isOutstream&&(e.renderer={url:"https://imasdk.googleapis.com/js/sdkloader/ima3.js",render:function(e){},backupOnly:!0}),e}},{key:"getBidFloor",value:function(e){var t;return parseFloat(null==e||null===(t=e.params)||void 0===t?void 0:t.bidfloor)||0}},{key:"setBidFloor",value:function(e,t){return t>0&&(e.params.bidfloor=t.toString()),e}}])}(fe);function Ce(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function xe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ce(Object(r),!0).forEach((function(t){W(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ce(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ie(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ie=function(){return!!e})()}var Ae=function(e){function r(){return t(this,r),e=this,n=["criteo"],i=h(i=r),v(e,Ie()?Reflect.construct(i,n||[],h(e).constructor):i.apply(e,n));var e,i,n}return y(r,e),o(r,[{key:"applyBidParams",value:function(e,t){var r=t.prebidParams,i=t.shouldSendBidFloor,n=t.floorVal;return i&&n>0&&(e.params.bidFloor=n,e.params.bidFloorCur="USD"),e.params.video=xe(xe({},ue(r)),{},{placement:this.convertPlcmtToPlacement(r.plcmt)}),e}},{key:"getBidFloor",value:function(e){var t;return(null==e||null===(t=e.params)||void 0===t?void 0:t.bidFloor)||0}},{key:"setBidFloor",value:function(e,t){return t>0&&(e.params.bidFloor=t,e.params.bidFloorCur="USD"),e}}])}(fe);function ze(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ze=function(){return!!e})()}var Fe=function(e){function r(){return t(this,r),e=this,n=["criteo"],i=h(i=r),v(e,ze()?Reflect.construct(i,n||[],h(e).constructor):i.apply(e,n));var e,i,n}return y(r,e),o(r,[{key:"applyBidParams",value:function(e,t){var r=t.isOutstream;return e.params.zoneId&&delete e.params.zoneId,r&&(e.renderer={url:"https://imasdk.googleapis.com/js/sdkloader/ima3.js",render:function(e){},backupOnly:!0}),e}}])}(fe);function je(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(je=function(){return!!e})()}var Te=function(e){function r(){return t(this,r),e=this,n=["inmobi"],i=h(i=r),v(e,je()?Reflect.construct(i,n||[],h(e).constructor):i.apply(e,n));var e,i,n}return y(r,e),o(r,[{key:"applyBidParams",value:function(e,t){var r=t.shouldSendBidFloor,i=t.floorVal,n=t.isOutstream;return r&&i>0&&(e.params.bidfloor=i),n&&(e.renderer={url:"https://imasdk.googleapis.com/js/sdkloader/ima3.js",render:function(e){},backupOnly:!0}),e}},{key:"getBidFloor",value:function(e){var t;return(null==e||null===(t=e.params)||void 0===t?void 0:t.bidfloor)||0}},{key:"setBidFloor",value:function(e,t){return t>0&&(e.params.bidfloor=t),e}}])}(fe);function Re(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Re=function(){return!!e})()}var Ee=function(e){function r(){return t(this,r),e=this,n=["inmobi"],i=h(i=r),v(e,Re()?Reflect.construct(i,n||[],h(e).constructor):i.apply(e,n));var e,i,n}return y(r,e),o(r,[{key:"applyBidParams",value:function(e,t){return t.isOutstream&&(e.renderer={url:"https://imasdk.googleapis.com/js/sdkloader/ima3.js",render:function(e){},backupOnly:!0}),e}},{key:"getBidFloor",value:function(e){var t;return(null==e||null===(t=e.params)||void 0===t?void 0:t.bidfloor)||0}},{key:"setBidFloor",value:function(e,t){return t>0&&(e.params.bidfloor=t),e}}])}(fe);function Ue(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ue=function(){return!!e})()}var Me=function(e){function r(){return t(this,r),e=this,n=["insticator"],i=h(i=r),v(e,Ue()?Reflect.construct(i,n||[],h(e).constructor):i.apply(e,n));var e,i,n}return y(r,e),o(r,[{key:"applyBidParams",value:function(e,t){var r=t.shouldSendBidFloor,i=t.floorVal;return r&&i>0&&(e.params.floor=i),e}},{key:"getBidFloor",value:function(e){var t;return(null==e||null===(t=e.params)||void 0===t?void 0:t.floor)||0}},{key:"setBidFloor",value:function(e,t){return t>0&&(e.params.floor=t),e}}])}(fe);function De(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(De=function(){return!!e})()}var Le=function(e){function r(){return t(this,r),e=this,n=["insticator"],i=h(i=r),v(e,De()?Reflect.construct(i,n||[],h(e).constructor):i.apply(e,n));var e,i,n}return y(r,e),o(r,[{key:"applyBidParams",value:function(e,t){var r=t.isOutstream;return e.params.publisherId||(e.params.publisherId="ezoic"),r&&(e.renderer={url:"https://imasdk.googleapis.com/js/sdkloader/ima3.js",render:function(e){},backupOnly:!0}),e}},{key:"getBidFloor",value:function(e){var t;return(null==e||null===(t=e.params)||void 0===t?void 0:t.floor)||0}},{key:"setBidFloor",value:function(e,t){return t>0&&(e.params.floor=t),e}}])}(fe);function Ve(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function Ne(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ne=function(){return!!e})()}var He=function(e){function r(){return t(this,r),e=this,n=["ix"],i=h(i=r),v(e,Ne()?Reflect.construct(i,n||[],h(e).constructor):i.apply(e,n));var e,i,n}return y(r,e),o(r,[{key:"applyBidParams",value:function(e,t){var r=t.prebidParams,i=t.shouldSendBidFloor,n=t.floorVal;return i&&n>0&&(e.params.bidFloor=n,e.params.bidFloorCur="USD"),e.params.video=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ve(Object(r),!0).forEach((function(t){W(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ve(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},ue(r)),Array.isArray(e.params.video.api)&&(e.params.video.api=[2]),e}},{key:"getBidFloor",value:function(e){var t;return(null==e||null===(t=e.params)||void 0===t?void 0:t.bidFloor)||0}},{key:"setBidFloor",value:function(e,t){return t>0&&(e.params.bidFloor=t,e.params.bidFloorCur="USD"),e}}])}(fe);function qe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function We(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?qe(Object(r),!0).forEach((function(t){W(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ge(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ge=function(){return!!e})()}var Ke=function(e){function r(){return t(this,r),e=this,n=["ix"],i=h(i=r),v(e,Ge()?Reflect.construct(i,n||[],h(e).constructor):i.apply(e,n));var e,i,n}return y(r,e),o(r,[{key:"applyBidParams",value:function(e,t){var r=t.prebidParams;return e.params.video=We(We({},ue(r)),{},{placement:this.convertPlcmtToPlacement(r.plcmt)}),Array.isArray(e.params.video.api)&&(e.params.video.api=[2]),Array.isArray(e.params.video.protocols),e.params.video.protocols=[2,3,5,6],e}}])}(fe);function Je(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function Ye(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ye=function(){return!!e})()}var Ze=function(e){function r(){return t(this,r),e=this,n=["medianet"],i=h(i=r),v(e,Ye()?Reflect.construct(i,n||[],h(e).constructor):i.apply(e,n));var e,i,n}return y(r,e),o(r,[{key:"applyBidParams",value:function(e,t){var r=t.shouldSendBidFloor,i=t.floorVal,n=t.prebidParams,o=t.isOutstream;return r&&i>0&&(e.params.bidfloor=i),e.params.video=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Je(Object(r),!0).forEach((function(t){W(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Je(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},ue(n)),o&&(e.renderer={url:"https://imasdk.googleapis.com/js/sdkloader/ima3.js",render:function(e){},backupOnly:!0}),e}},{key:"getBidFloor",value:function(e){var t;return(null==e||null===(t=e.params)||void 0===t?void 0:t.bidfloor)||0}},{key:"setBidFloor",value:function(e,t){return t>0&&(e.params.bidfloor=t),e}}])}(fe);function Qe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function Xe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Xe=function(){return!!e})()}var $e=function(e){function r(){return t(this,r),e=this,n=["medianet"],i=h(i=r),v(e,Xe()?Reflect.construct(i,n||[],h(e).constructor):i.apply(e,n));var e,i,n}return y(r,e),o(r,[{key:"applyBidParams",value:function(e,t){var r=t.prebidParams,i=t.isOutstream;return e.params.video=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Qe(Object(r),!0).forEach((function(t){W(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Qe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},ue(r)),i&&(e.renderer={url:"https://imasdk.googleapis.com/js/sdkloader/ima3.js",render:function(e){},backupOnly:!0}),e}},{key:"getBidFloor",value:function(e){var t;return(null==e||null===(t=e.params)||void 0===t?void 0:t.bidfloor)||0}},{key:"setBidFloor",value:function(e,t){return t>0&&(e.params.bidfloor=t),e}}])}(fe);function et(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(et=function(){return!!e})()}var tt=function(e){function r(){return t(this,r),e=this,n=["minutemedia"],i=h(i=r),v(e,et()?Reflect.construct(i,n||[],h(e).constructor):i.apply(e,n));var e,i,n}return y(r,e),o(r,[{key:"applyBidParams",value:function(e,t){return t.isOutstream&&(e.renderer={url:"https://imasdk.googleapis.com/js/sdkloader/ima3.js",render:function(e){},backupOnly:!0}),e}},{key:"getBidFloor",value:function(e){var t;return(null==e||null===(t=e.params)||void 0===t?void 0:t.floorPrice)||0}}])}(fe);function rt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(rt=function(){return!!e})()}var it=function(e){function r(){return t(this,r),e=this,n=["onetag"],i=h(i=r),v(e,rt()?Reflect.construct(i,n||[],h(e).constructor):i.apply(e,n));var e,i,n}return y(r,e),o(r,[{key:"applyBidParams",value:function(e,t){var r=t.shouldSendBidFloor,i=t.floorVal,n=t.shouldForceFloors,o=t.isOutstream;return r&&i>0&&n&&(e.getFloor=function(){return{currency:"USD",floor:i}}),o&&(e.renderer={url:"https://imasdk.googleapis.com/js/sdkloader/ima3.js",render:function(e){},backupOnly:!0}),e}},{key:"getBidFloor",value:function(e){return null!=e&&e.getFloor?e.getFloor().floor:0}},{key:"setBidFloor",value:function(e,t){return t>0&&(e.getFloor=function(){return{currency:"USD",floor:t}}),e}}])}(fe);function nt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(nt=function(){return!!e})()}var ot=function(e){function r(){return t(this,r),e=this,n=["openx"],i=h(i=r),v(e,nt()?Reflect.construct(i,n||[],h(e).constructor):i.apply(e,n));var e,i,n}return y(r,e),o(r,[{key:"applyBidParams",value:function(e,t){var r=t.shouldSendBidFloor,i=t.floorVal,n=t.isOutstream;return r&&i>0&&(e.params.customFloor=i),n&&(e.renderer={url:"https://imasdk.googleapis.com/js/sdkloader/ima3.js",render:function(e){},backupOnly:!0}),e}},{key:"getBidFloor",value:function(e){var t;return(null==e||null===(t=e.params)||void 0===t?void 0:t.customFloor)||0}},{key:"setBidFloor",value:function(e,t){return t>0&&(e.params.customFloor=t),e}}])}(fe);function at(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(at=function(){return!!e})()}var st=function(e){function r(){return t(this,r),e=this,n=["openx"],i=h(i=r),v(e,at()?Reflect.construct(i,n||[],h(e).constructor):i.apply(e,n));var e,i,n}return y(r,e),o(r,[{key:"applyBidParams",value:function(e,t){return t.isOutstream&&(e.renderer={url:"https://imasdk.googleapis.com/js/sdkloader/ima3.js",render:function(e){},backupOnly:!0}),e}},{key:"getBidFloor",value:function(e){var t;return(null==e||null===(t=e.params)||void 0===t?void 0:t.customFloor)||0}},{key:"setBidFloor",value:function(e,t){return t>0&&(e.params.customFloor=t),e}}])}(fe);function dt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function ut(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?dt(Object(r),!0).forEach((function(t){W(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function lt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(lt=function(){return!!e})()}var ct=function(e){function r(){return t(this,r),e=this,n=["pubmatic"],i=h(i=r),v(e,lt()?Reflect.construct(i,n||[],h(e).constructor):i.apply(e,n));var e,i,n}return y(r,e),o(r,[{key:"applyBidParams",value:function(e,t){var r=t.shouldSendBidFloor,i=t.floorVal,n=t.prebidParams,o=t.isOutstream;return e.params.kadfloor=r&&i>0?i.toString():"0.02",o&&(e.renderer={url:"https://imasdk.googleapis.com/js/sdkloader/ima3.js",render:function(e){},backupOnly:!0}),e.params.video=ut(ut({},ue(n)),{},{placement:this.convertPlcmtToPlacement(n.plcmt)}),e}},{key:"getBidFloor",value:function(e){var t;return null!=e&&null!==(t=e.params)&&void 0!==t&&t.kadfloor?parseFloat(e.params.kadfloor):0}},{key:"setBidFloor",value:function(e,t){return t>0&&(e.params.kadfloor=t.toString()),e}}])}(fe);function ft(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function pt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ft(Object(r),!0).forEach((function(t){W(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ft(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function vt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(vt=function(){return!!e})()}var ht=function(e){function r(){return t(this,r),e=this,n=["pubmatic"],i=h(i=r),v(e,vt()?Reflect.construct(i,n||[],h(e).constructor):i.apply(e,n));var e,i,n}return y(r,e),o(r,[{key:"applyBidParams",value:function(e,t){var r=t.prebidParams,i=t.isOutstream;return e.params.kadfloor="0.02",i&&(e.renderer={url:"https://imasdk.googleapis.com/js/sdkloader/ima3.js",render:function(e){},backupOnly:!0}),e.params.video=pt(pt({},ue(r)),{},{placement:this.convertPlcmtToPlacement(r.plcmt)}),e}},{key:"getBidFloor",value:function(e){var t;return null!=e&&null!==(t=e.params)&&void 0!==t&&t.kadfloor?parseFloat(e.params.kadfloor):0}},{key:"setBidFloor",value:function(e,t){return t>0&&(e.params.kadfloor=t.toString()),e}}])}(fe);function mt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(mt=function(){return!!e})()}var yt=function(e){function r(){return t(this,r),e=this,n=["rubicon"],i=h(i=r),v(e,mt()?Reflect.construct(i,n||[],h(e).constructor):i.apply(e,n));var e,i,n}return y(r,e),o(r,[{key:"applyBidParams",value:function(e,t){var r=t.isOutstream,i=t.language,n=(t.skippable,t.shouldSendBidFloor),o=t.floorVal;return t.shouldForceFloors,n&&o>0&&(e.params.floor=o),r&&"undefined"!=typeof _ezaq&&"US"!==_ezaq.country&&(e.params.floor=.1),r?e.params.video={playerWidth:400,playerHeight:300}:(e.params.video||(e.params.video={}),i&&(e.params.video.language=i),e.params.video.playerWidth=640,e.params.video.playerHeight=480),e}},{key:"getBidFloor",value:function(e){var t;return(null==e||null===(t=e.params)||void 0===t?void 0:t.floor)||0}},{key:"setBidFloor",value:function(e,t){return t>0&&(e.params.floor=t),e}}])}(fe);function bt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(bt=function(){return!!e})()}var gt=function(e){function r(){return t(this,r),e=this,n=["rubicon"],i=h(i=r),v(e,bt()?Reflect.construct(i,n||[],h(e).constructor):i.apply(e,n));var e,i,n}return y(r,e),o(r,[{key:"applyBidParams",value:function(e,t){var r=t.isOutstream,i=t.language,n=t.skippable;return r?(e.params.video={playerWidth:400,playerHeight:300,size_id:203},e.renderer={url:"https://imasdk.googleapis.com/js/sdkloader/ima3.js",render:function(e){},backupOnly:!0}):(e.params.video||(e.params.video={}),i&&(e.params.video.language=i),e.params.video.playerWidth=640,e.params.video.playerHeight=480,e.params.video.size_id=201,e.params.video.skip=n?1:0,n&&(e.params.video.skipdelay=5)),e}},{key:"getBidFloor",value:function(e){var t;return(null==e||null===(t=e.params)||void 0===t?void 0:t.floor)||0}},{key:"setBidFloor",value:function(e,t){return t>0&&(e.params.floor=t),e}}])}(fe);function _t(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(_t=function(){return!!e})()}var wt=function(e){function r(){return t(this,r),e=this,n=["sharethrough"],i=h(i=r),v(e,_t()?Reflect.construct(i,n||[],h(e).constructor):i.apply(e,n));var e,i,n}return y(r,e),o(r,[{key:"applyBidParams",value:function(e,t){var r=t.shouldSendBidFloor,i=t.floorVal;return r&&i>0&&(e.params.floor=i),e}},{key:"getBidFloor",value:function(e){var t;return(null==e||null===(t=e.params)||void 0===t?void 0:t.floor)||0}},{key:"setBidFloor",value:function(e,t){return t>0&&(e.params.floor=t),e}}])}(fe);function Bt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Bt=function(){return!!e})()}var kt=function(e){function r(){return t(this,r),e=this,n=["sharethrough"],i=h(i=r),v(e,Bt()?Reflect.construct(i,n||[],h(e).constructor):i.apply(e,n));var e,i,n}return y(r,e),o(r,[{key:"applyBidParams",value:function(e,t){return e}},{key:"getBidFloor",value:function(e){var t;return(null==e||null===(t=e.params)||void 0===t?void 0:t.floor)||0}},{key:"setBidFloor",value:function(e,t){return t>0&&(e.params.floor=t),e}}])}(fe);function Ot(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ot=function(){return!!e})()}var Pt=function(e){function r(){return t(this,r),e=this,n=["smartadserver"],i=h(i=r),v(e,Ot()?Reflect.construct(i,n||[],h(e).constructor):i.apply(e,n));var e,i,n}return y(r,e),o(r,[{key:"applyBidParams",value:function(e,t){var r=t.shouldSendBidFloor,i=t.floorVal,n=t.isOutstream,o=t.timeOffset;return r&&i>0&&(e.params.bidfloor=i),n||(e.params.video={protocol:8,startDelay:this.getStartDelayIntFromTimeOffset(o)}),e}},{key:"getStartDelayIntFromTimeOffset",value:function(e){switch(e){case"start":return 1;case"end":return 3;default:return 2}}},{key:"getBidFloor",value:function(e){var t;return(null==e||null===(t=e.params)||void 0===t?void 0:t.bidfloor)||0}},{key:"setBidFloor",value:function(e,t){return t>0&&(e.params.bidfloor=t),e}}])}(fe);function St(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(St=function(){return!!e})()}var Ct=function(e){function r(){return t(this,r),e=this,n=["smartadserver"],i=h(i=r),v(e,St()?Reflect.construct(i,n||[],h(e).constructor):i.apply(e,n));var e,i,n}return y(r,e),o(r,[{key:"applyBidParams",value:function(e,t){var r=t.isOutstream,i=t.timeOffset;return e.params&&["networkId","siteId","pageId","formatId"].forEach((function(t){e.params[t]&&"string"==typeof e.params[t]&&(e.params[t]=parseInt(e.params[t],10))})),r?e.renderer={url:"https://imasdk.googleapis.com/js/sdkloader/ima3.js",render:function(e){},backupOnly:!0}:e.params.video={protocol:8,startDelay:this.getStartDelayIntFromTimeOffset(i)},e}},{key:"getStartDelayIntFromTimeOffset",value:function(e){switch(e){case"start":return 1;case"end":return 3;default:return 2}}},{key:"getBidFloor",value:function(e){var t;return(null==e||null===(t=e.params)||void 0===t?void 0:t.bidfloor)||0}},{key:"setBidFloor",value:function(e,t){return t>0&&(e.params.bidfloor=t),e}}])}(fe);function xt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(xt=function(){return!!e})()}var It=function(e){function r(){return t(this,r),e=this,n=["sonobi"],i=h(i=r),v(e,xt()?Reflect.construct(i,n||[],h(e).constructor):i.apply(e,n));var e,i,n}return y(r,e),o(r,[{key:"applyBidParams",value:function(e,t){var r=t.shouldSendBidFloor,i=t.floorVal;return r&&i>0&&(e.params.floor=i),e}},{key:"getBidFloor",value:function(e){var t;return(null==e||null===(t=e.params)||void 0===t?void 0:t.floor)||0}},{key:"setBidFloor",value:function(e,t){return t>0&&(e.params.floor=t),e}}])}(fe);function At(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(At=function(){return!!e})()}var zt=function(e){function r(){return t(this,r),e=this,n=["sonobi"],i=h(i=r),v(e,At()?Reflect.construct(i,n||[],h(e).constructor):i.apply(e,n));var e,i,n}return y(r,e),o(r,[{key:"applyBidParams",value:function(e,t){var r=t.isOutstream;return!e.params.hasOwnProperty("TagID")&&e.params.hasOwnProperty("placement_id")&&(e.params.TagID=e.params.placement_id,delete e.params.placement_id),r&&(e.renderer={url:"https://imasdk.googleapis.com/js/sdkloader/ima3.js",render:function(e){},backupOnly:!0}),e}}])}(fe);function Ft(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function jt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ft(Object(r),!0).forEach((function(t){W(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ft(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Tt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Tt=function(){return!!e})()}var Rt=function(e){function r(){return t(this,r),e=this,n=["sovrn"],i=h(i=r),v(e,Tt()?Reflect.construct(i,n||[],h(e).constructor):i.apply(e,n));var e,i,n}return y(r,e),o(r,[{key:"applyBidParams",value:function(e,t){var r=t.shouldSendBidFloor,i=t.floorVal,n=t.prebidParams;return r&&i>0&&(e.params.bidfloor=i),e.params.video=jt(jt({},ue(n)),{},{placement:this.convertPlcmtToPlacement(n.placement)}),e}},{key:"getBidFloor",value:function(e){var t;return(null==e||null===(t=e.params)||void 0===t?void 0:t.bidfloor)||0}},{key:"setBidFloor",value:function(e,t){return t>0&&(e.params.bidfloor=t),e}}])}(fe);function Et(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function Ut(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Et(Object(r),!0).forEach((function(t){W(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Et(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Mt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Mt=function(){return!!e})()}var Dt=function(e){function r(){return t(this,r),e=this,n=["sovrn"],i=h(i=r),v(e,Mt()?Reflect.construct(i,n||[],h(e).constructor):i.apply(e,n));var e,i,n}return y(r,e),o(r,[{key:"applyBidParams",value:function(e,t){var r=t.prebidParams;return e.params.video=Ut(Ut({},ue(r)),{},{placement:this.convertPlcmtToPlacement(r.placement)}),e}},{key:"getBidFloor",value:function(e){var t;return(null==e||null===(t=e.params)||void 0===t?void 0:t.bidfloor)||0}},{key:"setBidFloor",value:function(e,t){return t>0&&(e.params.bidfloor=t),e}}])}(fe);function Lt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Lt=function(){return!!e})()}var Vt=function(e){function r(){return t(this,r),e=this,n=["triplelift"],i=h(i=r),v(e,Lt()?Reflect.construct(i,n||[],h(e).constructor):i.apply(e,n));var e,i,n}return y(r,e),o(r,[{key:"applyBidParams",value:function(e,t){var r=t.shouldSendBidFloor,i=t.floorVal,n=t.prebidParams;return r&&i>0&&(e.params.floor=i),n&&1!==n.plcmt&&(e.params||(e.params={}),e.params.inventoryCode="ezoic_RON_outstream"),e.params||(e.params={}),e.params.video||(e.params.video={}),e.params.video.placement=this.convertPlcmtToPlacement(n.plcmt),e}},{key:"getBidFloor",value:function(e){var t;return(null==e||null===(t=e.params)||void 0===t?void 0:t.floor)||0}},{key:"setBidFloor",value:function(e,t){return t>0&&(e.params||(e.params={}),e.params.floor=t),e}}])}(fe);function Nt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Nt=function(){return!!e})()}var Ht=function(e){function r(){return t(this,r),e=this,n=["triplelift"],i=h(i=r),v(e,Nt()?Reflect.construct(i,n||[],h(e).constructor):i.apply(e,n));var e,i,n}return y(r,e),o(r,[{key:"applyBidParams",value:function(e,t){var r=t.prebidParams,i=t.isOutstream;return r&&1!==r.plcmt&&(e.params.inventoryCode="ezoic_RON_outstream_PbS2S"),e.params||(e.params={}),e.params.video||(e.params.video={}),e.params.video.placement=this.convertPlcmtToPlacement(r.plcmt),i&&(e.renderer={url:"https://imasdk.googleapis.com/js/sdkloader/ima3.js",render:function(e){},backupOnly:!0}),e}},{key:"getBidFloor",value:function(e){var t;return(null==e||null===(t=e.params)||void 0===t?void 0:t.floor)||0}},{key:"setBidFloor",value:function(e,t){return t>0&&(e.params||(e.params={}),e.params.floor=t),e}}])}(fe);function qt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(qt=function(){return!!e})()}var Wt=function(e){function r(){return t(this,r),e=this,n=["ttd"],i=h(i=r),v(e,qt()?Reflect.construct(i,n||[],h(e).constructor):i.apply(e,n));var e,i,n}return y(r,e),o(r,[{key:"applyBidParams",value:function(e,t){var r=t.floorVal;return Math.random()<.2&&r>0&&(e.params.bidfloor=r),e}},{key:"getBidFloor",value:function(e){var t;return(null==e||null===(t=e.params)||void 0===t?void 0:t.bidfloor)||0}},{key:"setBidFloor",value:function(e,t){return t>0&&(e.params||(e.params={}),e.params.bidfloor=t),e}}])}(fe);function Gt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Gt=function(){return!!e})()}var Kt=function(e){function r(){return t(this,r),e=this,n=["unruly"],i=h(i=r),v(e,Gt()?Reflect.construct(i,n||[],h(e).constructor):i.apply(e,n));var e,i,n}return y(r,e),o(r,[{key:"applyBidParams",value:function(e,t){var r=t.shouldSendBidFloor,i=t.floorVal,n=t.isOutstream;return r&&i>0&&(e.params.floor=i),e.params.siteId=parseInt(e.params.siteId,10),e.params.siteid&&(e.params.siteId=parseInt(e.params.siteid,10),delete e.params.siteid),n&&(e.params.featureOverrides={canRunUnmissable:!0}),e}},{key:"getBidFloor",value:function(e){var t;return(null==e||null===(t=e.params)||void 0===t?void 0:t.floor)||0}},{key:"setBidFloor",value:function(e,t){return t>0&&(e.params||(e.params={}),e.params.floor=t),e}}])}(fe);function Jt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Jt=function(){return!!e})()}var Yt=function(e){function r(){return t(this,r),e=this,n=["unruly"],i=h(i=r),v(e,Jt()?Reflect.construct(i,n||[],h(e).constructor):i.apply(e,n));var e,i,n}return y(r,e),o(r,[{key:"applyBidParams",value:function(e,t){var r=t.isOutstream;return e.params.siteId=parseInt(e.params.siteId,10),e.params.siteid&&(e.params.siteId=parseInt(e.params.siteid,10),delete e.params.siteid),r&&(e.params.featureOverrides={canRunUnmissable:!0},e.renderer={url:"https://imasdk.googleapis.com/js/sdkloader/ima3.js",render:function(e){},backupOnly:!0}),e}}])}(fe);function Zt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function Qt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Qt=function(){return!!e})()}var Xt=function(e){function r(){return t(this,r),e=this,n=["vidazoo"],i=h(i=r),v(e,Qt()?Reflect.construct(i,n||[],h(e).constructor):i.apply(e,n));var e,i,n}return y(r,e),o(r,[{key:"applyBidParams",value:function(e,t){var r=t.shouldSendBidFloor,i=t.floorVal,n=t.prebidParams,o=t.playerWidth,a=t.playerHeight;r&&"number"==typeof i&&i>0&&(e.params.bidFloor=i);var s=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Zt(Object(r),!0).forEach((function(t){W(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Zt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({sizes:[[o||400,a||300]]},n);return e.params.ext={customParameters:{mediaTypes:{video:s}}},e}},{key:"getBidFloor",value:function(e){var t;return(null==e||null===(t=e.params)||void 0===t?void 0:t.bidFloor)||0}},{key:"setBidFloor",value:function(e,t){return"number"==typeof t&&t>0&&(e.params||(e.params={}),e.params.bidFloor=t),e}}])}(fe);function $t(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function er(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(er=function(){return!!e})()}var tr=function(e){function r(){return t(this,r),e=this,n=["vidazoo"],i=h(i=r),v(e,er()?Reflect.construct(i,n||[],h(e).constructor):i.apply(e,n));var e,i,n}return y(r,e),o(r,[{key:"applyBidParams",value:function(e,t){var r=t.prebidParams,i=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?$t(Object(r),!0).forEach((function(t){W(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$t(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({sizes:[[t.playerWidth||400,t.playerHeight||300]]},r);return e.params.ext={customParameters:{mediaTypes:{video:i}}},e}},{key:"getBidFloor",value:function(e){var t;return(null==e||null===(t=e.params)||void 0===t?void 0:t.bidFloor)||0}},{key:"setBidFloor",value:function(e,t){return"number"==typeof t&&t>0&&(e.params||(e.params={}),e.params.bidFloor=t),e}}])}(fe);function rr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function ir(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ir=function(){return!!e})()}var nr=function(e){function r(){return t(this,r),e=this,n=["yieldmo"],i=h(i=r),v(e,ir()?Reflect.construct(i,n||[],h(e).constructor):i.apply(e,n));var e,i,n}return y(r,e),o(r,[{key:"applyBidParams",value:function(e,t){var r=t.shouldSendBidFloor,i=t.floorVal,n=t.prebidParams;return r&&i>0&&(e.params.bidFloor=i),e.params.video=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?rr(Object(r),!0).forEach((function(t){W(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},ue(n)),Array.isArray(e.params.video.api)?e.params.video.api=e.params.video.api.filter((function(e){return e>=1&&e<=6})):e.params.video.api=[2],e}},{key:"getBidFloor",value:function(e){var t;return(null==e||null===(t=e.params)||void 0===t?void 0:t.bidFloor)||0}},{key:"setBidFloor",value:function(e,t){return t>0&&(e.params.bidFloor=t),e}}])}(fe);function or(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function ar(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?or(Object(r),!0).forEach((function(t){W(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):or(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function sr(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(sr=function(){return!!e})()}var dr=function(e){function r(){return t(this,r),e=this,n=["yieldmo"],i=h(i=r),v(e,sr()?Reflect.construct(i,n||[],h(e).constructor):i.apply(e,n));var e,i,n}return y(r,e),o(r,[{key:"applyBidParams",value:function(e,t){var r=t.prebidParams;return e.params.video=ar(ar({},ue(r)),{},{placement:this.convertPlcmtToPlacement(r.plcmt)}),Array.isArray(e.params.video.api)?e.params.video.api=e.params.video.api.filter((function(e){return e>=1&&e<=6})):e.params.video.api=[2],e}}])}(fe);function ur(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ur=function(){return!!e})()}var lr=function(e){function r(){return t(this,r),e=this,n=["noop"],i=h(i=r),v(e,ur()?Reflect.construct(i,n||[],h(e).constructor):i.apply(e,n));var e,i,n}return y(r,e),o(r,[{key:"applyBidParams",value:function(e,t){return e}},{key:"applyAdUnitParams",value:function(e,t){return e}},{key:"getBidFloor",value:function(e){return 0}}])}(fe),cr=function(){function e(){t(this,e)}return o(e,null,[{key:"getStrategy",value:function(t){var r,i=null!==(r=function(e,t,r){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:r;throw new TypeError("Private element is not present on this object")}(e,this,fr)._.get(t))&&void 0!==r?r:lr;return new i}}])}(),fr={_:new Map([["33across",ve],["33across_i_s2s",ve],["33across_o_s2s",ve],["amx",me],["amx_i_s2s",be],["amx_o_s2s",be],["appnexus",_e],["appnexus_i_s2s",Be],["appnexus_o_s2s",Be],["cadent_aperture_mx",Oe],["cadent_aperture_mx_i_s2s",Se],["cadent_aperture_mx_o_s2s",Se],["criteo",Ae],["criteo_i_s2s",Fe],["criteo_o_s2s",Fe],["inmobi",Te],["inmobi_i_s2s",Ee],["inmobi_o_s2s",Ee],["insticator",Me],["insticator_i_s2s",Le],["insticator_o_s2s",Le],["ix",He],["ix_i_s2s",Ke],["ix_o_s2s",Ke],["medianet",Ze],["medianet_i_s2s",$e],["medianet_o_s2s",$e],["minutemedia",tt],["onetag",it],["onetag_i_s2s",it],["onetag_o_s2s",it],["openx",ot],["openx_i_s2s",st],["openx_o_s2s",st],["pubmatic",ct],["pubmatic_i_s2s",ht],["pubmatic_o_s2s",ht],["rubicon",yt],["rubicon_i_s2s",gt],["rubicon_o_s2s",gt],["sharethrough",wt],["sharethrough_i_s2s",kt],["sharethrough_o_s2s",kt],["smartadserver",Pt],["smartadserver_i_s2s",Ct],["smartadserver_o_s2s",Ct],["sonobi",It],["sonobi_i_s2s",zt],["sonobi_o_s2s",zt],["sovrn",Rt],["sovrn_i_s2s",Dt],["sovrn_o_s2s",Dt],["triplelift",Vt],["triplelift_i_s2s",Ht],["triplelift_o_s2s",Ht],["ttd",Wt],["unruly",Kt],["unruly_i_s2s",Yt],["unruly_o_s2s",Yt],["vidazoo",Xt],["vidazoo_i_s2s",tr],["vidazoo_o_s2s",tr],["yieldmo",nr],["yieldmo_i_s2s",dr],["yieldmo_o_s2s",dr]])};function pr(e,t,r){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:r;throw new TypeError("Private element is not present on this object")}var vr=new WeakSet;function hr(e){if(null!==e&&"undefined"!==e&&void 0!==e){if(void 0!==e.cpm&&e.cpm>this.maxHBBid)return e.cpm;if(void 0!==e.originalCpm&&e.originalCpm>this.maxHBBid)return e.originalCpm}return this.maxHBBid>0?this.maxHBBid:0}function mr(e){var t=window.epbjs;if(!t||!t.markWinningBidAsUsed||!t.adServers)return this.vastURL;if(e.adserverTargeting){if(e.adserverTargeting.hasOwnProperty("epp")&&(e.adserverTargeting.epp=function(e){var t,r=e;return r>300&&(r=300),arguments.length>1&&void 0!==arguments[1]&&!arguments[1]?((r=r<=0?0:r<=1?10*Math.floor(10*r+.5):r<=3?20*Math.floor(100*r/20+.5):r<=10?50*Math.floor(100*r/50+.5):r<=30?100*Math.floor(100*r/100+.5):r<=50?200*Math.floor(100*r/200+.5):r<=120?500*Math.floor(100*r/500+.5):1e3*Math.floor(100*r/1e3+.5))/100>e&&r>2&&(r-=r<=100?10:r<=300?20:r<=1e3?50:r<=3e3?100:r<=5e3?200:r<=12e3?500:1e3),(r/100).toFixed(2)):(r>=0&&r<=5?t=Math.floor(100*r)/100:r>5&&r<=50?t=Math.floor(10*r)/10:r>50&&r<=110?t=5*Math.floor(r/5):r>110&&r<=300&&(t=10*Math.floor(r/10)),t.toFixed(2))}(e.adserverTargeting.epp,this.isOutstream?__ezOutstream.IsEzDfpAccount:__ezInstream.IsEzDfpAccount),e.adserverTargeting.epp<=0))return this.vastURL;e.adserverTargeting=Object.entries(e.adserverTargeting).reduce((function(e,t){var r=Z(t,2),i=r[0],n=r[1];return e[Q[i]||i]=n,e}),{})}return t.adServers.dfp.buildVideoUrl({adUnit:this.prebidAdUnits,url:this.origVastURL,bid:e})}function yr(e){var t=this,r=e.filter((function(e){return!t.bidders.includes(e)}));this.bidders=this.bidders.concat(r)}function br(e){this.receivedBidders.includes(e)||this.receivedBidders.push(e)}const gr=function(){return o((function e(r){var i,n,o=this;t(this,e),function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(i=this,n=vr),n.add(i),W(this,"addedAPSToVAST",void 0),W(this,"addedPrebidToVAST",void 0),W(this,"apsBidCount",void 0),W(this,"apsBid",void 0),W(this,"bidFloorActions",void 0),W(this,"bidFloorGen",void 0),W(this,"bidFloorIndex",void 0),W(this,"bidFloorType",void 0),W(this,"bidders",void 0),W(this,"bidRetries",void 0),W(this,"breakID",void 0),W(this,"didS2SBidderWin",void 0),W(this,"fallbackVastBid",void 0),W(this,"fallbackVastCPM",void 0),W(this,"fallbackVastURL",void 0),W(this,"gpid",void 0),W(this,"hadAPSBid",void 0),W(this,"impressionCnt",void 0),W(this,"impressionId",void 0),W(this,"initialBidFloor",void 0),W(this,"isBackfillMode",void 0),W(this,"isComplete",void 0),W(this,"isFloating",void 0),W(this,"isMultiAuction",void 0),W(this,"isOutstream",void 0),W(this,"IsSkipped",void 0),W(this,"isTriggered",void 0),W(this,"key",void 0),W(this,"lastBidHash",void 0),W(this,"maxHBBid",void 0),W(this,"maxHBBidder",void 0),W(this,"multiplier",void 0),W(this,"noFill",void 0),W(this,"origVastURL",void 0),W(this,"params",void 0),W(this,"played",void 0),W(this,"pmpDealsToConsider",void 0),W(this,"positionGen",void 0),W(this,"prebidBidderRequests",void 0),W(this,"prebidBids",void 0),W(this,"prebidCPM",void 0),W(this,"prebidAdUnits",void 0),W(this,"prebidParams",void 0),W(this,"queryType",void 0),W(this,"receivedBidders",void 0),W(this,"retryCount",void 0),W(this,"startingBidFloorIndex",void 0),W(this,"statSourceId",void 0),W(this,"timeOffset",void 0),W(this,"timeOffsetSeconds",void 0),W(this,"vastURL",void 0),W(this,"videoAdBidFloor",void 0),W(this,"videoAdBidFloorAmazon",void 0),W(this,"videoAdBidHash",void 0),W(this,"videoAdBidFloorUnmodified",void 0),W(this,"videoFallbackFloors",void 0),W(this,"videoFallbackHashes",void 0),W(this,"videoFallbackType",void 0),W(this,"videoPmpDeal",void 0),W(this,"statSourceFloors",void 0),W(this,"multiFloorStatSourceFloors",void 0),Object.keys(r).forEach((function(e){o[e]=r[e]})),this.origVastURL||(this.origVastURL=this.vastURL),this.retryCount||(this.retryCount=0,null==r.startingBidFloorIndex&&(this.bidFloorIndex=0),this.lastBidHash=this.videoAdBidHash,this.maxHBBid=0,this.maxHBBidder=void 0,this.initialBidFloor=this.videoAdBidFloor),this.hasOwnProperty("apsBidCount")||(this.apsBidCount=0),this.isComplete=!1,this.isTriggered=!1,this.bidders=[],this.receivedBidders=[],this.statSourceId=void 0,this.prebidCPM=void 0,this.played=!1,this.hadAPSBid=!1,this.addedAPSToVAST=!1,this.addedPrebidToVAST=!1,this.pmpDealsToConsider=[],this.isMultiAuction=0,this.didS2SBidderWin=!1,this.isBackfillMode=!1,this.hasOwnProperty("gpid")||(this.gpid=this.breakID)}),[{key:"getAPSStatSourceId",value:function(){return"undefined"!=typeof __ezInstream&&!this.isOutstream&&__ezInstream.apsSlot.slotID?11324:"undefined"!=typeof __ezOutstream&&this.isOutstream&&__ezOutstream.apsSlot.slotID?11337:""}},{key:"assembleTagURL",value:function(e){if(e||this.onlyUseVastProxy())return this.chooseHighestBidForPrebidRenderer();var t=this.addBidsToVAST(),r=t.prebidBid,i=t.apsBid;return this.isInstreamTruePrice()&&!this.isOutstream&&r&&r.cpm<=.18&&r.cpm>0&&(this.fallbackVastURL=this.getVastProxyPrebidUrl(r),this.fallbackVastCPM=r.cpm,this.fallbackVastBid=r,oe("No bids above 0.18, using fallback",this.fallbackVastBid)),this.updatePmpTargetingDeals(),this.isComplete=!0,this.markBreakAsComplete(this.key,this.isFloating),this.recordBiddersForBreak(),oe(this.key+"\nVAST URL: ",this.vastURL+"\nPrebid:",r,"\nAPS:",i),!!r||!!i}},{key:"fillInAdBreakForMultiFormatAd",value:function(){var e=this.getWinningPrebidBid();this.maxHBBidder=e,this.maxHBBid=pr(vr,this,hr).call(this,e),this.isComplete=!0,this.markBreakAsComplete(this.key,this.isFloating),this.recordBiddersForBreak()}},{key:"chooseHighestBidForPrebidRenderer",value:function(){oe("Choosing highest bid for prebid renderer");var e=this.getWinningPrebidBid(),t=this.apsBid||null;this.maxHBBidder=e,this.maxHBBid=pr(vr,this,hr).call(this,e);var r,i,n=!1;if(oe("Prebid bid: ",e," APS bid: ",t," Max HB bid: ",this.maxHBBid),t&&(!e||t.bidVal>this.maxHBBid))this.vastURL=this.getVastProxyAPSUrl(t),null===(r=window.__ezDevtools)||void 0===r||null===(i=r.recordWinningBid)||void 0===i||i.call(r,this.impressionId,"amzn",t.bidVal),n=!0;else if(e){var o,a;this.vastURL=this.getVastProxyPrebidUrl(e),null===(o=window.__ezDevtools)||void 0===o||null===(a=o.recordWinningBid)||void 0===a||a.call(o,this.impressionId,e.bidder,e.cpm)}if(this.isComplete=!0,this.markBreakAsComplete(this.key,this.isFloating),this.recordBiddersForBreak(),this.noFill=!e&&!t,!this.noFill&&"undefined"!=typeof _ezaq&&_ezaq.hasOwnProperty("ab_test_id")){this.vastURL+="&mod="+_ezaq.ab_test_id;var s=n?this.getAPSStatSourceId():ce(e.bidder);""!=s&&(this.vastURL+="&ssid="+s)}return!!e||!!t}},{key:"getVastProxyAPSUrl",value:function(e){var t=encodeURIComponent("https://aax.amazon-adsystem.com/e/dtb/vast?b="+e.amzniid+"&rnd="+Math.random().toString(36).substring(2,15)+"&pp="+e.amznbid);return"".concat(te,"/vast?adId=aps&vastUrl=").concat(t)}},{key:"getVastProxyPrebidUrl",value:function(e){var t=e&&e.ezVideoCacheKey?e.ezVideoCacheKey:e.videoCacheKey,r=encodeURIComponent("https://prebid.adnxs.com/pbc/v1/cache?uuid=".concat(t));return"".concat(te,"/vast?adId=").concat(e.videoCacheKey,"&vastUrl=").concat(r)}},{key:"getHighestBidWithSource",value:function(){var e,t,r,i=-1,n="",o=null,a=null,s=this.getWinningPrebidBid(),d=this.apsBid||null;return s&&(i=s.cpm,this.isInstreamTruePrice()&&!this.isOutstream&&s.cpm>=.19&&(i=s.cpm-.18),n=$,o=s,a=(null===(r=s.adserverTargeting)||void 0===r?void 0:r.hb_format)||s.mediaType||"video"),d&&d.bidVal>i&&(i=d.bidVal,n="aps",o=d,a="video"),{cpm:i,source:n,bid:o,format:a,adId:(null===(e=o)||void 0===e?void 0:e.adId)||(null===(t=o)||void 0===t?void 0:t.amzniid)}}},{key:"shouldAddBidToVAST",value:function(e,t,r){return e?!(t||r===$&&e<=.18&&this.isInstreamTruePrice()&&(oe("Prebid bid is less than 0.18, not adding to VAST",e),1)):(oe("shouldAddBidToVAST: falsy bid floor received"),!0)}},{key:"addBidsToVAST",value:function(){var e=this.getWinningPrebidBid(),t=this.apsBid||null;if(this.addedAPSToVAST&&this.addedPrebidToVAST)return{prebidBid:e,apsBid:t};this.maxHBBidder=e,this.maxHBBid=pr(vr,this,hr).call(this,e),e&&this.shouldAddBidToVAST(e.cpm,this.addedPrebidToVAST,$)&&(this.vastURL=pr(vr,this,mr).call(this,e),this.addedPrebidToVAST=!0);var r=!1;return(window.__ezInstream&&window.__ezInstream.PreferPrebidOverAmzn>0||window.__ezOutstream&&window.__ezOutstream.PreferPrebidOverAmzn>0)&&(r=!0),""==this.getAPSStatSourceId()||e&&r||(t?void 0!==t.encodedQsParams&&this.shouldAddBidToVAST(t.bidVal,this.addedAPSToVAST,"aps")&&(this.vastURL+=t.encodedQsParams,this.addedAPSToVAST=!0,"undefined"!=typeof __ezOutstream&&(this.hadAPSBid=!0)):"undefined"!=typeof __ezOutstream&&(this.hadAPSBid=!1)),{prebidBid:e,apsBid:t}}},{key:"resetPrebidBid",value:function(){this.maxHBBid=0,this.maxHBBidder=void 0,this.addedPrebidToVAST=!1;var e=this.vastURL.startsWith(te);this.vastURL=this.origVastURL,this.addedAPSToVAST=!1,this.assembleTagURL(e)}},{key:"recordBiddersForBreak",value:function(){var e=[];if("undefined"!=typeof __ezInstream&&!this.isOutstream&&__ezInstream.prebidBidders&&0!=__ezInstream.prebidBidders.length){var t=__ezInstream.prebidBidders.map((function(e){return"string"==typeof e.ssid?parseInt(e.ssid):e.ssid}));e=e.concat(t)}if("undefined"!=typeof __ezOutstream&&this.isOutstream&&__ezOutstream.prebidBidders&&0!=__ezOutstream.prebidBidders.length){var r=__ezOutstream.prebidBidders.map((function(e){return"string"==typeof e.ssid?parseInt(e.ssid):e.ssid}));e=e.concat(r)}var i=this.getAPSStatSourceId();""!=i&&(e.push(i),this.apsBid&&pr(vr,this,br).call(this,i)),pr(vr,this,yr).call(this,e)}},{key:"getVideoBidCacheTopBid",value:function(){var e,t=null,r=this.getPlayerId();if("function"==typeof(null===(e=__ez)||void 0===e||null===(e=e.vbf)||void 0===e?void 0:e.getCache)){var i=__ez.vbf.getCache();i&&((t=i.getTopBid(r))?oe("Top bid from videoBidCache:",t):oe("No valid bids found in videoBidCache for player:",r))}return t}},{key:"getWinningPrebidBid",value:function(){return this.maxHBBidder?(oe("Using previous set top bid:",this.maxHBBidder),this.maxHBBidder):this.getVideoBidCacheTopBid()}},{key:"isBidCacheLoaded",value:function(){var e;return void 0!==(null===(e=__ez)||void 0===e||null===(e=e.vbf)||void 0===e?void 0:e.getCache())}},{key:"updatePrebidBidCacheWithBids",value:function(e){var t=this;oe("bids already cached in bidResponse event, only updating received bidders"),e.forEach((function(e){var r=ce(e.bidder);r&&pr(vr,t,br).call(t,r)}))}},{key:"handleWinningAdIdOrHbUUId",value:function(e){if(oe("winning ad id",e),this.apsBid&&(this.apsBid.adId===e||"aps"==e))return oe("found ad id or hbUUId: ",e," in aps bid: ",this.apsBid),void(this.statSourceId=this.getAPSStatSourceId());var t=__ez.vbf.getCache();if(t){oe("Checking videoBidCache for ad id or hbUUId:",e);var r=t.getBidByVideoCacheKey(e);if(r)return oe("Found ad id or hbUUId:",e," in videoBidCache:",r),t.removeBid(e),void this.recordWinAndFirePrebidImpression(r)}oe("neither aps nor prebid won the ad id or hbUUId: ",e)}},{key:"setStatSourceIdFromAdIdOrHbUUId",value:function(e){if(this.apsBid&&(this.apsBid.adId===e||"aps"==e))return oe("found ad id or hbUUId: ",e," in aps bid: ",this.apsBid),void(this.statSourceId=this.getAPSStatSourceId());var t=__ez.vbf.getCache();if(t){oe("Checking videoBidCache for ad id or hbUUId:",e);var r=t.getBidByVideoCacheKey(e);if(r)return void(this.statSourceId=ce(r.bidder))}}},{key:"recordWinAndFirePrebidImpression",value:function(e){var t,r;e&&(this.statSourceId=ce(e.bidder),this.prebidCPM=e.cpm,__ez.vhb.recordWinForBidder(e.bidder,e.cpm),null===(t=window.__ezDevtools)||void 0===t||null===(r=t.recordWinningBid)||void 0===r||r.call(t,this.impressionId,e.bidder,e.cpm),window.PrebidImpressionController&&window.PrebidImpressionController.recordAndFireImpressionWonEvent(e),void 0!==e&&"string"==typeof e.bidder&&e.bidder.endsWith("_s2s")&&(this.didS2SBidderWin=!0),epbjs.markWinningBidAsUsed({adUnitCode:this.breakID,adId:e.adId}))}},{key:"getAdBreakPosition",value:function(e){var t=e.split("-");if(t.length<3)return console.error("Failed to parse ad break position - malformed breakId: "+e),"";var r=t[t.length-2];return"preroll"!==r&&"midroll"!==r&&"postroll"!==r&&"outstream"!==r?(console.error("Failed to parse ad break position - unknown position on breakId: "+e),""):"-"+r}},{key:"getPlayerId",value:function(){return this.key.split("$")[0]}},{key:"getStatSourceFloors",value:function(){return this.statSourceFloors}},{key:"getMultiFloorStatSourceFloors",value:function(){return this.multiFloorStatSourceFloors}},{key:"getIsPlayerCurrentlyFloating",value:function(){var e;return null===(e=le(this.getPlayerId()))||void 0===e?void 0:e.isCurrentlyFloating()}},{key:"setFallbackPosition",value:function(e){oe("bid: getting highest floor below",e);for(var t=0,r=-1,i=0;i<this.videoFallbackFloors.length;i++)this.videoFallbackFloors[i]<=e&&this.videoFallbackFloors[i]>t&&(t=this.videoFallbackFloors[i],r=i);if(r>-1){if(this.bidFloorIndex>=r)return;this.videoAdBidFloor=t,this.videoAdBidHash=this.videoFallbackHashes[r],this.bidFloorIndex=r,this.startingBidFloorIndex=this.bidFloorIndex}else this.videoAdBidFloor=0,this.videoAdBidHash="zero",this.bidFloorIndex=this.videoFallbackFloors.length,this.startingBidFloorIndex=this.bidFloorIndex;oe("bid: setting fallback position to",this.videoAdBidFloor,this.videoAdBidHash)}},{key:"setStartingBidFloor",value:function(e){var t=e;oe("bid: previous floor",t),t>0&&(t*=3),oe("bid: getting highest floor below",t);var r=0,i=-1;if(t>0){for(var n=0;n<this.videoFallbackFloors.length;n++)if(this.videoFallbackFloors[n]<=t&&this.videoFallbackFloors[n]>r){i=n,(r=this.videoFallbackFloors[n])===e&&n>0?(i=n-1,oe("bid: set floor up one step from last fill",r=this.videoFallbackFloors[n-1])):oe("bid: set floor below 3x last fill",r);break}}else if(0===t){oe("bid: finding floor ".concat(3," above ").concat(t));var o=this.videoFallbackFloors.indexOf(0);-1===o&&(o=this.videoFallbackFloors.length-1);var a=o-3;a<0&&(a=0),i=a,r=this.videoFallbackFloors[a]}i>-1?(this.videoAdBidFloor=r,this.videoAdBidHash=this.videoFallbackHashes[i],this.bidFloorIndex=i,this.startingBidFloorIndex=this.bidFloorIndex):(this.videoAdBidFloor=0,this.videoAdBidHash="zero",this.bidFloorIndex=this.videoFallbackFloors.length,this.startingBidFloorIndex=this.bidFloorIndex),oe("bid: updated ".concat(this.isOutstream?"outstream":"in-content"," fallback floor to ").concat(this.videoAdBidFloor," ").concat(this.videoAdBidHash))}},{key:"updatePmpTargetingDeals",value:function(){var e=this;if(void 0!==this.videoPmpDeal&&Array.isArray(this.videoPmpDeal)&&0!==this.videoPmpDeal.length){var t=[];this.videoAdBidFloor>.2&&this.videoPmpDeal.forEach((function(r){"undefined"!==r.adjustedDealFloor&&(r.adjustedDealFloor>=99999||e.videoAdBidFloor>r.adjustedLowerDealFloor&&e.videoAdBidFloor<r.adjustedUpperDealFloor)&&t.push(r.dealId)})),this.pmpDealsToConsider=t,this.vastURL=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(null===t)return oe("No key specified for VAST Tag custom targeting, returning VAST URL: "+e),e;if(!URL.canParse(e))return oe("Invalid/Cannot parse VAST Tag URL: "+e),e;var i=new URL(e),n=i.searchParams;if(!n.has("cust_params"))return e;var o=new URLSearchParams(n.get("cust_params"));return null===r||r.length<1?o.has(t)?(oe("Empty or null value specified for targeting key: ".concat(t,", val: ").concat(r,". Removing ").concat(t," from cust_params")),o.delete(t),n.set("cust_params",o.toString()),oe("VAST Custom Targeting Params: ",Array.from(o.entries())),i.toString()):(oe("No targeting key to remove because it is not in cust_params or the key is null here"),i.toString()):(Array.isArray(r)&&(r=r.join(",")),oe("Setting VAST Custom Targeting Params with key: ".concat(t,", val: ").concat(r)),o.set(t,r),n.set("cust_params",o.toString()),oe("VAST Custom Targeting Params: ",Array.from(o.entries())),i.toString())}(this.vastURL,"deal1",t)}}},{key:"markBreakAsComplete",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];__ez&&__ez.vhb&&__ez.vhb.breaks&&t&&"object"==e(__ez.vhb.breaks[t])&&!r?__ez.vhb.breaks[t].isComplete=!0:__ez&&__ez.vhb&&__ez.vhb.floatingBreaks&&t&&"object"==e(__ez.vhb.floatingBreaks[t])&&(__ez.vhb.floatingBreaks[t].isComplete=!0)}},{key:"onlyUseVastProxy",value:function(){return!!(this.isOutstream&&("undefined"!=typeof __ezOutstream&&__ezOutstream.hasOwnProperty("OnlyUseVastProxy")&&__ezOutstream.OnlyUseVastProxy||"undefined"!=typeof __ez&&__ez.tf&&"true"===__ez.tf.vaosg))}},{key:"getVideoLanguage",value:function(t){if(void 0!==window.ezVideo&&"object"===e(window.ezVideo.playerLanguage)&&"string"==typeof t){var r=window.ezVideo.playerLanguage[t];if(r&&"string"==typeof r&&2===r.length)return r}return null}},{key:"isAdBreakFrontloaded",value:function(){return"FrontLoad"===this.positionGen||"FrontLoadOverridden"===this.positionGen}},{key:"isAdBreakCustomPosition",value:function(){return"pub-midroll"===this.positionGen||"pub-midrollOverridden"===this.positionGen}},{key:"isInstreamTruePrice",value:function(){var e;return"true"===(null===(e=__ez)||void 0===e||null===(e=e.tf)||void 0===e?void 0:e.vaitp)}},{key:"getNextBid",value:function(){var e=this.videoFallbackFloors[this.bidFloorIndex];if(void 0===this.videoFallbackHashes||this.bidFloorIndex>=this.videoFallbackHashes.length)return{hash:"zero",bidValue:0};var t=ie();return e=Math.max(t,e),{hash:this.videoFallbackHashes[this.bidFloorIndex],bidValue:e}}},{key:"updateBidHash",value:function(e){this.lastBidHash.includes(",")&&(this.lastBidHash=encodeURIComponent(this.lastBidHash)),e.includes(",")&&(e=encodeURIComponent(e));var t=this.vastURL.replace(/(eb_br%3D)[^%&]+/,"$1".concat(e));if(this.lastBidHash!==e&&t===this.vastURL)throw new Error("failed to replace old bid hash (".concat(this.lastBidHash,") with new hash (").concat(e,") in VAST ").concat(this.vastURL));this.vastURL=t,this.lastBidHash=e}},{key:"getMaxPrebidBidCpm",value:function(){var e;return(null===(e=this.prebidBids)||void 0===e?void 0:e.reduce((function(e,t){var r,i;return Math.max(e,null!==(r=null!==(i=t.cpm)&&void 0!==i?i:t.originalCpm)&&void 0!==r?r:0)}),0))||0}},{key:"getIsBackfillMode",value:function(){var e,t;return"1"===new URLSearchParams(window.location.search).get("test_enhanced_vastproxy")||!!this.isBackfillMode||(this.isOutstream?"undefined"!=typeof __ezOutstream&&(null===(e=__ezOutstream)||void 0===e||null===(e=e.vatc)||void 0===e?void 0:e.ibm):"undefined"!=typeof __ezInstream&&(null===(t=__ezInstream)||void 0===t||null===(t=t.vatc)||void 0===t?void 0:t.ibm))}},{key:"getWinningBidFloorAction",value:function(){var e;if(null===(e=this.bidFloorActions)||void 0===e||!e.length)return null;if(this.prebidBids){var t=this.prebidBids.reduce((function(e,t){return((null==t?void 0:t.cpm)||0)>((null==e?void 0:e.cpm)||0)?t:e})),r=(this.prebidBidderRequests||[]).flatMap((function(e){return e.bids})).find((function(e){return e.bidId===t.requestId}));if(!r){var i=cr.getStrategy(r.bidder).getBidFloor(r);if(i){var n=this.bidFloorActions.find((function(e){return e.prebidFloor===i}));if(n)return n}}}return this.bidFloorActions[0]}}])}();function _r(e){return function(e){if(Array.isArray(e))return J(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Y(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var wr=function(){return o((function e(r){t(this,e),this.id=r.bidId||r.adId||Math.random().toString(36).substr(2,9),this.adId=r.adId||this.id,this.adUnitCode=r.adUnitCode,this.bidder=r.bidder,this.bidderCode=r.bidderCode||r.bidder,this.cpm=r.cpm,this.originalCpm=r.originalCpm,this.mediaType=r.mediaType,this.videoCacheKey=r.videoCacheKey||this.adId||this.id,this.ezVideoCacheKey=r.ezVideoCacheKey||this.videoCacheKey,this.vastUrl=r.vastUrl,this.mediaTypes=r.mediaTypes,this.adserverTargeting=r.adserverTargeting,this.requestId=r.requestId,this.responseTimestamp=r.responseTimestamp||Date.now(),this.ttl=r.ttl||300,this.source=r.source,this.appliedFloor=r.appliedFloor,this.playerId=null}),[{key:"isExpired",value:function(){return Date.now()>this.responseTimestamp+1e3*this.ttl-3e3}},{key:"timeRemaining",value:function(){var e=Date.now(),t=this.responseTimestamp+1e3*this.ttl;return Math.floor((t-e)/1e3)}},{key:"isBetterThan",value:function(e){return!e||!(this.isExpired()&&!e.isExpired())&&(!(this.isExpired()||!e.isExpired())||this.cpm>e.cpm)}}])}(),Br=function(){return o((function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:30;t(this,e),this.items=[],this.maxSize=r,this._needsExpiredCheck=!0}),[{key:"size",value:function(){return this._needsExpiredCheck&&this.removeExpired(),this.items.length}},{key:"isEmpty",value:function(){return this._needsExpiredCheck&&this.removeExpired(),0===this.items.length}},{key:"dequeue",value:function(){return this.isEmpty()?null:this.items.shift()}},{key:"peek",value:function(){return this.isEmpty()?null:this.items[0]}},{key:"enqueue",value:function(e){this._needsExpiredCheck&&this.removeExpired();for(var t=0;t<this.items.length&&this.items[t].cpm>e.cpm;)t++;if(this.size()>=this.maxSize&&t>=this.maxSize)return{added:!1,removedBid:null};this.items.splice(t,0,e);var r=null;return this.size()>this.maxSize&&(r=this.items.pop()),{added:!0,removedBid:r}}},{key:"removeExpired",value:function(){var e=this,t=_r(this.items);return this.items=this.items.filter((function(e){return!e.isExpired()})),this._needsExpiredCheck=!1,t.filter((function(t){return!e.items.includes(t)}))}},{key:"markForExpiredCheck",value:function(){this._needsExpiredCheck=!0}},{key:"getHighestCPM",value:function(){return this.isEmpty()?0:this.items[0].cpm}},{key:"getLowestCPM",value:function(){return this.isEmpty()?0:this.items[this.size()-1].cpm}},{key:"isWorthCaching",value:function(e){return this._needsExpiredCheck&&this.removeExpired(),this.size()<this.maxSize||e.cpm>this.getLowestCPM()}},{key:"getAllBids",value:function(){return this._needsExpiredCheck&&this.removeExpired(),_r(this.items)}},{key:"findBidByVideoCacheKey",value:function(e){return this._needsExpiredCheck&&this.removeExpired(),this.items.find((function(t){return t.videoCacheKey===e}))||null}},{key:"removeBid",value:function(e){this._needsExpiredCheck&&this.removeExpired();var t=this.items.findIndex((function(t){return t.videoCacheKey===e}));return-1===t?null:this.items.splice(t,1)[0]}}])}();const kr=new(function(){return o((function e(){t(this,e),this.playerCaches={},this.bidIndex={},this.defaultMaxQueueSize=12,this.lastCleanup=Date.now(),this.cleanupInterval=15e3}),[{key:"getPlayerCache",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.defaultMaxQueueSize;return this.playerCaches[e]||(this.playerCaches[e]=new Br(t)),this.playerCaches[e]}},{key:"addBid",value:function(e,t){var r=new wr(t);r.playerId=e,this.maybeCleanup();var i=this.getPlayerCache(e);if(!i.isWorthCaching(r))return oe("Bid ".concat(r.videoCacheKey," from ").concat(r.bidder," with CPM $").concat(r.cpm," not worth caching for player ").concat(e)),!1;var n=i.enqueue(r);return n.added&&(this.bidIndex[r.videoCacheKey]={playerId:e,bid:r},n.removedBid&&delete this.bidIndex[n.removedBid.videoCacheKey],oe("Cached ".concat(r.mediaType," bid ").concat(r.videoCacheKey," from ").concat(r.bidder," with CPM $").concat(r.cpm," for player ").concat(e))),n.added}},{key:"isWorthCaching",value:function(e,t){return this.getPlayerCache(e).isWorthCaching(t)}},{key:"getTopBid",value:function(e){return this.maybeCleanup(!0),this.getPlayerCache(e).peek()||null}},{key:"getBidByVideoCacheKey",value:function(e){var t=this.bidIndex[e];return t?t.bid.isExpired()?(this.removeBid(e),null):t.bid:null}},{key:"removeBid",value:function(e){var t=this.bidIndex[e];if(!t)return!1;var r=t.playerId;return!!this.getPlayerCache(r).removeBid(e)&&(delete this.bidIndex[e],!0)}},{key:"maybeCleanup",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=Date.now();if(!(r-this.lastCleanup<this.cleanupInterval)||t){oe("Cleaning up expired bids from video bid cache"),this.lastCleanup=r,Object.values(this.playerCaches).forEach((function(e){e.markForExpiredCheck()}));var i=0;Object.entries(this.playerCaches).forEach((function(t){var r=Z(t,2),n=r[0],o=r[1].removeExpired();o.length>0&&(o.forEach((function(t){delete e.bidIndex[t.videoCacheKey]})),oe("Removed ".concat(o.length," expired bids from player ").concat(n)),i+=o.length)})),i>0&&oe("Total of ".concat(i," expired bids removed from cache"))}}},{key:"getStats",value:function(){var e={totalPlayers:Object.keys(this.playerCaches).length,totalBids:Object.keys(this.bidIndex).length,playerStats:{}};return Object.entries(this.playerCaches).forEach((function(t){var r=Z(t,2),i=r[0],n=r[1];e.playerStats[i]={bidCount:n.size(),highestCPM:n.getHighestCPM(),lowestCPM:n.getLowestCPM()}})),e}},{key:"setDefaultMaxQueueSize",value:function(e){"number"==typeof e&&e>0&&(this.defaultMaxQueueSize=e)}},{key:"setPlayerMaxQueueSize",value:function(e,t){if(!("number"!=typeof t||t<=0)){var r=this.getPlayerCache(e),i=r.maxSize;if(r.maxSize=t,i>t)for(;r.size()>t;){var n=r.items.pop();n&&delete this.bidIndex[n.videoCacheKey]}}}},{key:"getPlayerCacheCapacityPercentage",value:function(e){var t=this.getPlayerCache(e);return t&&0!==t.maxSize?Math.round(t.size()/t.maxSize*100):0}},{key:"isAnyCacheAtCapacityThreshold",value:function(){for(var e=0,t=Object.keys(this.playerCaches);e<t.length;e++){var r=t[e];if(this.getPlayerCacheCapacityPercentage(r)>=55)return!0}return!1}},{key:"isPlayerCacheAtCapacityThreshold",value:function(e){return this.getPlayerCacheCapacityPercentage(e)>=55}}])}());function Or(){var e;"1"===new URLSearchParams(window.location.search).get("ez_vbf_debug")&&(e=console).log.apply(e,["[VideoBidFilter]"].concat(Array.prototype.slice.call(arguments)))}var Pr=c();function Sr(e){if(!e)return{vastXml:null,contentFound:!1};if(e.vastXml)return{vastXml:e.vastXml,contentFound:!0};if(e.vastUrl){if(function(e){try{if(!e||"string"!=typeof e)return!1;if(!e.startsWith("data:text/xml;base64,"))return!1;var t=e.split(",")[1],r=atob(t.split("?")[0]);return r.trim().startsWith("<")&&(r.includes("<VAST")||r.includes("<vast")||r.includes("<Vast")||r.includes("<?xml"))}catch(e){return!1}}(e.vastUrl))try{Or("Found base64 encoded VAST XML in vastUrl for bid from ".concat(e.bidder));var t=atob(e.vastUrl.split(",")[1].split("?")[0]);return e.vastXml=t,{vastXml:t,contentFound:!0}}catch(e){Or("Error decoding base64 vastUrl: ".concat(e.message))}Or("Creating VAST wrapper for bid from ".concat(e.bidder," with vastUrl"));var r=(i=e.vastUrl,o=(n=(n=e.vastImpUrl)&&(Array.isArray(n)?n:[n]))?n.map((function(e){return"<Impression><![CDATA[".concat(e,"]]></Impression>")})).join(""):"",'<VAST version="3.0">\n    <Ad>\n      <Wrapper>\n        <AdSystem>prebid.org wrapper</AdSystem>\n        <VASTAdTagURI><![CDATA['.concat(i,"]]></VASTAdTagURI>\n        ").concat(o,"\n        <Creatives></Creatives>\n      </Wrapper>\n    </Ad>\n  </VAST>"));return e.vastXml=r,{vastXml:r,contentFound:!0}}var i,n,o;return{vastXml:null,contentFound:!1}}function Cr(e){return xr.apply(this,arguments)}function xr(){return(xr=q(K().mark((function e(t){var r,i,n,o,a,s;return K().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=3;break}return Or("Cannot cache bid externally, missing required data (bid is null or undefined)"),e.abrupt("return",null);case 3:if(r=Sr(t),i=r.vastXml,r.contentFound){e.next=7;break}return Or("Cannot cache bid externally, no VAST content found",t),e.abrupt("return",null);case 7:return e.prev=7,n={puts:[{type:"xml",value:i,ttlseconds:Number(t.ttl)+15}]},e.next=11,fetch(Pr,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});case 11:if((o=e.sent).ok){e.next=14;break}throw new Error("HTTP error ".concat(o.status));case 14:return e.next=16,o.json();case 16:if((a=e.sent)&&a.responses&&a.responses.length){e.next=19;break}throw new Error("Invalid response from cache server");case 19:return s=a.responses[0].uuid,Or("Successfully cached bid externally, cache key: ".concat(s)),e.abrupt("return",s);case 24:return e.prev=24,e.t0=e.catch(7),Or("Error caching bid externally: ".concat(e.t0.message)),e.abrupt("return",null);case 28:case"end":return e.stop()}}),e,null,[[7,24]])})))).apply(this,arguments)}function Ir(e,t){if(!e||!t)return e;if(e.videoCacheKey=t,e.ezVideoCacheKey=t,e.adserverTargeting){e.adserverTargeting.hb_cache_id=t,e.adserverTargeting.hb_uuid=t;var r=new URL(Pr);e.adserverTargeting.hb_cache_host=r.host,e.adserverTargeting.hb_cache_path=r.pathname}return e}function Ar(e){return zr.apply(this,arguments)}function zr(){return(zr=q(K().mark((function e(t){var r;return K().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Cr(t);case 2:return r=e.sent,Ir(t,r),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Fr(){return(Fr=q(K().mark((function e(t){var r,i,n,o,a,s;return K().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=3;break}return Or("bid is null or undefined"),e.abrupt("return",t);case 3:if(n=jr(t.adUnitCode)){e.next=6;break}return e.abrupt("return",t);case 6:if((o=(null===(r=__ez)||void 0===r||null===(r=r.vhb)||void 0===r?void 0:r.breaks[t.adUnitCode])||(null===(i=__ez)||void 0===i||null===(i=i.vhb)||void 0===i?void 0:i.floatingBreaks[t.adUnitCode]))&&!t.mediaTypes&&"video"===t.mediaType&&(t.mediaTypes={},t.mediaTypes.video=o.prebidParams),!Tr(t)){e.next=11;break}return Or("Bid from ".concat(t.bidder," with CPM $").concat(t.cpm," is excluded due to advertiser rule for player ").concat(n)),e.abrupt("return",t);case 11:if(!(kr.isWorthCaching(n,t)&&t.cpm>0)){e.next=30;break}if(Or("Adding high value bid from ".concat(t.bidder," with CPM $").concat(t.cpm," to priority queue for player ").concat(n)),"video"!==t.mediaType){e.next=26;break}if(!(t&&t.vastUrl&&t.vastUrl.startsWith(Pr))){e.next=20;break}a=new URL(t.vastUrl),(s=a.searchParams.get("uuid"))&&(t=Ir(t,s)),e.next=24;break;case 20:if(t.vastUrl&&t.vastUrl.startsWith(Pr)){e.next=24;break}return e.next=23,Ar(t);case 23:t=e.sent;case 24:e.next=27;break;case 26:Or("Received ".concat(t.mediaType," bid for player ").concat(n));case 27:kr.addBid(n,t),e.next=34;break;case 30:__ez.vbf.filteredBidCount||(__ez.vbf.filteredBidCount={}),__ez.vbf.filteredBidCount[n]||(__ez.vbf.filteredBidCount[n]=0),__ez.vbf.filteredBidCount[n]++,Or("Skipping bid from ".concat(t.bidder," with CPM $").concat(t.cpm," for player ").concat(n,", total bids filtered: ").concat(__ez.vbf.filteredBidCount[n]));case 34:return e.abrupt("return",t);case 35:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function jr(e){if(!e)return null;if(e.startsWith("ez-"))return e.split("$")[0];if(e.includes("prebid-video-")){var t=e.match(/prebid-video-(instream|outstream)([^_]*)/);if(t)return"outstream"===t[1]?"ez-o":"ez-i"}return e}function Tr(e){if(!e||!e.meta)return!1;var t=[];if("undefined"!=typeof __advertiserRule&&(t=__advertiserRule),void 0!==e.meta.advertiserDomains&&t.length>0){var r=e.meta.advertiserDomains,i=function(e,t,r){for(var i=0;i<e;i++)if(t[i].length>0)for(var n=0;n<r.length;n++)if(t[i].includes(r[n]))return!0;return!1}(t.length,t,r);if(!0===i)return!0}return!1}const Rr={initVideoBidFilter:function(){return Or("Initializing video bid filter with VideoBidCache integration"),{getCache:function(){return kr}}},videoBidCache:kr,cacheExternally:Cr,getVastToCache:Sr,cacheExternallyAndUpdateTargeting:Ar,cacheOrFilterBid:function(e){return Fr.apply(this,arguments)}};function Er(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return Ur(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ur(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var i=0,n=function(){};return{s:n,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}function Ur(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=Array(t);r<t;r++)i[r]=e[r];return i}function Mr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function Dr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Mr(Object(r),!0).forEach((function(t){W(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Mr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Lr(e,t,r){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:r;throw new TypeError("Private element is not present on this object")}var Vr=new WeakSet,Nr=function(){return o((function e(){var r,i,n,o;t(this,e),function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(n=this,o=Vr),o.add(n),(null!==(r=window.__ezInstream)&&void 0!==r&&null!==(r=r.apsSlot)&&void 0!==r&&r.slotID||null!==(i=window.__ezOutstream)&&void 0!==i&&null!==(i=i.apsSlot)&&void 0!==i&&i.slotID)&&Lr(Vr,this,Gr).call(this),this.videoGPIDDefined=[]}),[{key:"fetchBids",value:function(e,t,r){var i=r&&e.isOutstream&&Lr(Vr,this,Kr).call(this);return e.hadAPSBid||i?(i&&oe("APS auction skipped for outstream break due to single APS auction test"),Promise.resolve()):Lr(Vr,this,Hr).call(this,e,t)}}])}();function Hr(e,t){var r,i=this,n=e.videoAdBidFloor;if((null===(r=e.bidFloorActions)||void 0===r||null===(r=r[0])||void 0===r?void 0:r.apsFloor)>0&&(n=e.bidFloorActions[0].apsFloor),void 0!==e.videoAdBidFloorAmazon&&e.videoAdBidFloorAmazon>0&&(n=e.videoAdBidFloorAmazon),oe("unmodified bid floor"+e.videoAdBidFloorUnmodified+"vid floor"+n+" bidcount "+e.apsBidCount),e.apsBidCount>0)return oe("Already requested APS bid for this adBreak, returning"),Promise.reject();var o=30;e&&e.prebidParams&&e.prebidParams.hasOwnProperty("maxduration")&&(o=e.prebidParams.maxduration);var a=e.isOutstream?__ezOutstream:__ezInstream;return a.apsSlot.slotID?(Lr(Vr,this,Gr).call(this),oe("Setting up APS"),new Promise(function(){var r=q(K().mark((function r(s,d){var u,l,c,f,p,v,h,m,y,b,g;return K().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,ne("ez_aps",12e4,100).catch((function(){d("APS timed out")}));case 2:if(u=function(t){return Dr({id:t.slotID,video:{startdelay:e.prebidParams.startdelay,plcmt:e.prebidParams.plcmt,pos:e.prebidParams.pos,w:e.prebidParams.w,h:e.prebidParams.h},sizes:t.sizes},n>0&&{bidfloor:Math.round(100*n),bidfloorcur:"USD"})},(l=a.apsSlot).slotID){r.next=8;break}return oe("No APS slot ID"),d("No APS slot ID"),r.abrupt("return");case 8:if(c=[],void 0!==a.allApsSlots&&a.allApsSlots.length>0){for(f=0;f<a.allApsSlots.length;f++)(p=a.allApsSlots[f]).Duration<=o&&c.push(u(p.Slot));0===c.length&&c.push(u(l))}else c.push(u(l));r.prev=11,ez_aps.record("ad/slot/define",{imp:c}),oe("APS requesting bids for key =",e.key),h=c.map((function(e){return e.id})),m={},y=Er(h);try{for(y.s();!(b=y.n()).done;)g=b.value,i.videoGPIDDefined.includes(g)||(m[g]=e.gpid)}catch(e){y.e(e)}finally{y.f()}return ez_aps.record("ad/gpid/define",{map:m}),(v=i.videoGPIDDefined).push.apply(v,_r(Object.keys(m))),r.next=22,Lr(Vr,i,qr).call(i,c,h,e,t,true);case 22:if(!r.sent.success){r.next=27;break}return oe("APS bid successful at floor:",n),s(),r.abrupt("return");case 27:oe("No APS bids received for adBreak"),s(),r.next=35;break;case 31:r.prev=31,r.t0=r.catch(11),oe("Error during APS bidding:",r.t0),s();case 35:case"end":return r.stop()}}),r,null,[[11,31]])})));return function(e,t){return r.apply(this,arguments)}}())):(oe("No APS slots"),Promise.reject())}function qr(e,t,r,i,n){return Wr.apply(this,arguments)}function Wr(){return(Wr=q(K().mark((function e(t,r,i,n,o){var a,s,d,u,l,c,f,p,v,h,m,y,b,g,_,w,B,k,O,P;return K().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=function(e){if("string"!=typeof e)return 30;var t=e.match(/(\d+)-(\d+)seconds/);return t?parseInt(t[2],10):30},e.prev=1,e.next=4,ez_aps.record("ad/slot/define",{imp:t});case 4:return l=new Promise((function(e,t){u=setTimeout((function(){t(new Error("APS bid timeout"))}),n)})),e.prev=5,e.next=8,Promise.race([ez_aps.record("ad/targeting/fetch",{itemIds:r,params:{iid1:i.impressionId}}),l]);case 8:e.next=16;break;case 10:return e.prev=10,e.t0=e.catch(5),oe("APS request failed:",e.t0.message||String(e.t0)),clearTimeout(u),e.abrupt("return",{success:!1});case 16:clearTimeout(u),oe("APS fetch completed"),c=ez_aps.read("ad/targeting"),f=_r(c.keys()).filter((function(e){return r.includes(e)})),null===(s=window.__ezDevtools)||void 0===s||null===(d=s.addAmazonImpression)||void 0===d||d.call(s,{impressionId:i.impressionId,items:t.map((function(e){return{slot:e,targetingData:Object.fromEntries((null==c?void 0:c.get(e.id))||[])}}))}),p=Er(f),e.prev=22,p.s();case 24:if((v=p.n()).done){e.next=64;break}if(h=v.value,!o){e.next=56;break}if(m=void 0,y=[],!(b=c.get(h))||!b.has("amznbid")){e.next=48;break}if(e.prev=31,g=.01,"undefined"==typeof __ez||void 0===__ez.fads||"function"!=typeof __ez.fads.getAmazonBidFromHash){e.next=37;break}return e.next=36,__ez.fads.getAmazonBidFromHash(b.get("amznbid"));case 36:g=e.sent;case 37:_="",w=Er(b);try{for(w.s();!(B=w.n()).done;)k=B.value,_+="&".concat(k[0],"=").concat(k[1])}catch(e){w.e(e)}finally{w.f()}O={slotID:h,amzniid:b.get("amzniid"),amznbid:b.get("amznbid"),bidVal:g,bps:g/a(h),encodedQsParams:encodeURIComponent(_)},y.push(O),(!m||O.bps>m.bps)&&(m=O),e.next=48;break;case 45:e.prev=45,e.t1=e.catch(31),oe("Error processing APS bid",e.t1);case 48:if(!m){e.next=54;break}return oe("Highest APS bid returned: ",m),i.apsBid=m,i.apsBidCount=1,i.hadAPSBid=!0,e.abrupt("return",{success:!0});case 54:e.next=62;break;case 56:if(!(P=c.get(h))||!P.has("amznbid")){e.next=62;break}return i.apsBid={slotID:h,amznbid:P.get("amznbid")},i.apsBidCount=1,i.hadAPSBid=!0,e.abrupt("return",{success:!0});case 62:e.next=24;break;case 64:e.next=69;break;case 66:e.prev=66,e.t2=e.catch(22),p.e(e.t2);case 69:return e.prev=69,p.f(),e.finish(69);case 72:return e.abrupt("return",{success:!1});case 75:return e.prev=75,e.t3=e.catch(1),oe("Error in fetchAPSBids:",e.t3),e.abrupt("return",{success:!1});case 79:case"end":return e.stop()}}),e,null,[[1,75],[5,10],[22,66,69,72],[31,45]])})))).apply(this,arguments)}function Gr(){"undefined"==typeof __ez||void 0===__ez.fads||void 0===__ez.fads.amznH2Bid||__ez.fads.amznH2Bid.loaded||"function"==typeof __ez.fads.loadLibrary&&__ez.fads.loadLibrary(__ez.fads.amznH2Bid.url,"amznH2Bid")}function Kr(){var e;return"true"===(null===(e=__ez)||void 0===e||null===(e=e.tf)||void 0===e?void 0:e.vamacsaa)}function Jr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function Yr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Jr(Object(r),!0).forEach((function(t){W(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Jr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Zr(e,t,r){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:r;throw new TypeError("Private element is not present on this object")}var Qr=new WeakSet,Xr=function(){return o((function e(r){var i,n;t(this,e),function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(i=this,n=Qr),n.add(i),this.key=r.key,this.gpid=r.gpid,this.breakID=r.breakID,this.prebidParams=r.prebidParams,this.videoAdBidFloor=r.videoAdBidFloor,this.isOutstream=r.isOutstream,this.isRewarded=r.isRewarded,this.params=r.params,this.timeOffset=r.timeOffset,this.adBreakPosition=r.adBreakPosition,this.playerId=r.playerId,this.videoLanguage=r.videoLanguage,this.reset()}),[{key:"withTTDConfiguration",value:function(){return delete this.adUnit.mediaTypes.video.placement,delete this.adUnit.ortb2Imp.rwdd,this}},{key:"withPlacement",value:function(){return this.adUnit.mediaTypes.video.placement=Zr(Qr,this,ei).call(this,this.prebidParams.plcmt),this}},{key:"withOutstreamContext",value:function(){return 1!==this.prebidParams.plcmt&&(this.adUnit.mediaTypes.video.context="outstream"),this}},{key:"withMultiFormat",value:function(){return this.adUnit.mediaTypes=Yr(Yr({},this.adUnit.mediaTypes),{},{banner:{sizes:[[300,250]],renderer:{url:"https://cdn.jsdelivr.net/npm/in-renderer-js@1/dist/in-renderer.umd.min.js",render:function(e){(new window.InRenderer).render("ez-video-container",e,{onImpressionViewable:function(){window.dispatchEvent(new CustomEvent("ezVideoAdRendered",{detail:{adId:e.adId,bid:e}}))}})}}}}),this}},{key:"withNative",value:function(){var e=[300,250];return this.adUnit.mediaTypes=Yr(Yr({},this.adUnit.mediaTypes),{},{native:{adTemplate:'<div style="width: 300px; height:250px; background-image: url(##hb_native_asset_id_1##);"></div>',ortb:{assets:[{id:1,required:1,img:{type:3,w:e[0],h:e[1]}}]},renderer:{url:"https://cdn.jsdelivr.net/npm/in-renderer-js@1/dist/in-renderer.umd.min.js",render:function(e){(new window.InRenderer).render("ez-video-container",e,{onImpressionViewable:function(){window.dispatchEvent(new CustomEvent("ezVideoAdRendered",{detail:{adId:e.adId,bid:e}}))}})}}}}),this}},{key:"withFloor",value:function(e){return e>0&&(this.adUnit.floors={currency:"USD",schema:{delimiter:"|",fields:["mediaType","size"]},values:{"video|*":e}},this.adUnit.mediaTypes.banner&&(this.adUnit.floors.values["banner|*"]=e),this.adUnit.mediaTypes.native&&(this.adUnit.floors.values["native|*"]=e)),this}},{key:"withS2SFloor",value:function(e){if(e&&e.length>0){var t=this.adUnit.ortb2Imp||{};t.ext=t.ext||{},t.ext.prebid=t.ext.prebid||{},1===e.length?(t.bidfloor=e[0],t.bidfloorcur="USD",t.ext.prebid.floors={floormin:e[0],floormincur:"USD"}):t.ext.prebid.floors={tfl:e},this.adUnit.ortb2Imp=t}return this}},{key:"withBidders",value:function(e){return this.adUnit.bids=e,this}},{key:"withBidPoolId",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return this.adUnit.bidPoolId=Zr(Qr,this,$r).call(this,e,t,r,i),this}},{key:"build",value:function(){return this.cloneAdUnit(this.adUnit)}},{key:"cloneAdUnit",value:function(t){var r=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new WeakMap;if(null===t||"object"!==e(t))return t;if(i.has(t))return i.get(t);if(t instanceof Date)return new Date(t.getTime());if(Array.isArray(t)){var n=[];return i.set(t,n),t.forEach((function(e,t){n[t]=r.cloneAdUnit(e,i)})),n}var o={};return i.set(t,o),Object.keys(t).forEach((function(e){o[e]=r.cloneAdUnit(t[e],i)})),o}},{key:"updateAdUnitForAbTests",value:function(){var e,t;if("true"===(null===(e=__ez)||void 0===e||null===(e=e.tf)||void 0===e?void 0:e.vappp)&&!this.isOutstream){var r=getPlayerById(this.playerId);null!=r&&r.isCurrentlyFloating()&&3===this.adUnit.mediaTypes.video.pos&&(this.adUnit.mediaTypes.video.pos=2)}"1"===(null===(t=__ez)||void 0===t||null===(t=t.tf)||void 0===t?void 0:t.vappp)&&(this.adUnit.mediaTypes.video.pos=1)}},{key:"reset",value:function(){return this.adUnit={code:this.key,ortb2Imp:{ext:{gpid:this.gpid},rwdd:this.isRewarded?1:0},mediaTypes:{video:ue(this.prebidParams)},bids:[]},this}}])}();function $r(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],n=this.isOutstream?"prebid-video-outstream":"prebid-video-instream"+this.adBreakPosition,o=t?"-placement":"",a=i?"-s2s":"";return"".concat(n).concat(o).concat(r).concat(a,"_").concat(e)}function ei(e){return W(W(W({},1,1),2,1),4,5)[e]||5}var ti=function(){return o((function e(){t(this,e),this.shouldSendPlacement={"33across_i_s2s":!0,"33across_o_s2s":!0,"33across_o_mnet_s2s":!0,"33across_i_mnet_s2s":!0,criteo:!0,criteo_i_s2s:!0,criteo_o_s2s:!0,criteo_i_mnet_s2s:!0,criteo_o_mnet_s2s:!0,insticator_i_s2s:!0,insticator_o_s2s:!0,insticator_i_mnet_s2s:!0,insticator_o_mnet_s2s:!0,ix_i_s2s:!0,ix_o_s2s:!0,ix_i_mnet_s2s:!0,ix_o_mnet_s2s:!0,medianet:!0,medianet_i_s2s:!0,medianet_o_s2s:!0,medianet_i_mnet_s2s:!0,medianet_o_mnet_s2s:!0,pubmatic:!0,pubmatic_i_s2s:!0,pubmatic_o_s2s:!0,pubmatic_i_mnet_s2s:!0,pubmatic_o_mnet_s2s:!0,sovrn:!0,sovrn_i_s2s:!0,sovrn_o_s2s:!0,sovrn_i_mnet_s2s:!0,sovrn_o_mnet_s2s:!0,triplelift_o_s2s:!0,triplelift_i_s2s:!0,triplelift_o_mnet_s2s:!0,triplelift_i_mnet_s2s:!0,trustedstack:!0,trustedstack_i_s2s:!0,trustedstack_o_s2s:!0,vidazoo:!0,vidazoo_i_s2s:!0,vidazoo_o_s2s:!0,vidazoo_i_mnet_s2s:!0,vidazoo_o_mnet_s2s:!0,yieldmo:!0,yieldmo_i_s2s:!0,yieldmo_o_s2s:!0,yieldmo_i_mnet_s2s:!0,yieldmo_o_mnet_s2s:!0},this.shouldSendMultipleFloorsInstream={appnexus:!0,medianet:!0,onetag:!0,openx:!0,rubicon:!0,sharethrough:!0,yieldmo:!0},this.shouldSendMultipleFloorsOutstream={onetag:!0,openx:!0,rubicon:!0,sharethrough:!0},this.shouldAlwaysSendOutstreamContext={},this.willBidOnMultiFormat={"33across":!0,appnexus:!0,criteo:!0,criteo_o_s2s:!0,criteo_o_mnet_s2s:!0,insticator:!0,ix:!0,ix_o_s2s:!0,ix_o_mnet_s2s:!0,medianet:!0,medianet_i_s2s:!0,medianet_o_s2s:!0,medianet_i_mnet_s2s:!0,medianet_o_mnet_s2s:!0,smartadserver:!0,smartadserver_o_s2s:!0,smartadserver_o_mnet_s2s:!0,yieldmo:!0,yieldmo_o_s2s:!0},this.willBidOnMultiFormatBannerOnly={"33across_o_s2s":!0,"33across_o_mnet_s2s":!0,insticator_o_s2s:!0,insticator_o_mnet_s2s:!0},this.TTD_BIDDERS={ttd:!0,ttd_i_s2s:!0,ttd_o_s2s:!0,ttd_i_mnet_s2s:!0,ttd_o_mnet_s2s:!0},this.s2sBidderSets=new Map}),[{key:"hasS2SBidders",value:function(e){return e?"undefined"!=typeof __s2soutstreambidders&&__s2soutstreambidders.length>0:"undefined"!=typeof __s2sinstreambidders&&__s2sinstreambidders.length>0}},{key:"isS2SBidder",value:function(e,t){if("string"!=typeof e||!e)return!1;var r=t?"outstream":"instream";if(!this.s2sBidderSets.has(r)){var i=t?"undefined"!=typeof __s2soutstreambidders?__s2soutstreambidders:[]:"undefined"!=typeof __s2sinstreambidders?__s2sinstreambidders:[],n=Array.isArray(i)?i.filter((function(e){return"string"==typeof e})):[];this.s2sBidderSets.set(r,new Set(n))}return this.s2sBidderSets.get(r).has(e)}},{key:"getS2SBidderSet",value:function(e){var t=e?"outstream":"instream";if(!this.s2sBidderSets.has(t)){var r=e?"undefined"!=typeof __s2soutstreambidders?__s2soutstreambidders:[]:"undefined"!=typeof __s2sinstreambidders?__s2sinstreambidders:[],i=Array.isArray(r)?r.filter((function(e){return"string"==typeof e})):[];this.s2sBidderSets.set(t,new Set(i))}return this.s2sBidderSets.get(t)}},{key:"shouldBidderSendPlacement",value:function(e){return!!this.shouldSendPlacement[e]}},{key:"shouldBidderSendMultipleFloors",value:function(e,t){return!!(t?this.shouldSendMultipleFloorsOutstream:this.shouldSendMultipleFloorsInstream)[e]}},{key:"shouldBidderAlwaysSendOutstreamContext",value:function(e,t){return!t&&!!this.shouldAlwaysSendOutstreamContext[e]}},{key:"willBidderBidOnMultiFormat",value:function(e){return!!this.willBidOnMultiFormat[e]}},{key:"willBidderBidOnMultiFormatBannerOnly",value:function(e){return!!this.willBidOnMultiFormatBannerOnly[e]}},{key:"isTTDBidder",value:function(e){return!!this.TTD_BIDDERS[e]}},{key:"getBidderProfile",value:function(e,t){var r=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)||this.getS2SBidderSet(t);return{isMultiformat:this.willBidderBidOnMultiFormat(e),isMultiformatBannerOnly:this.willBidderBidOnMultiFormatBannerOnly(e),isMultifloor:this.shouldBidderSendMultipleFloors(e,t),isS2S:r.has(e),needsPlacement:this.shouldBidderSendPlacement(e),needsOutstream:this.shouldBidderAlwaysSendOutstreamContext(e,t),isTTD:this.isTTDBidder(e)}}}])}(),ri=function(){return o((function e(){t(this,e)}),[{key:"calculate",value:function(e,t,r){throw new Error("calculate method must be implemented")}},{key:"getMinFloorValue",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return void 0!==e.minFloor?e.minFloor:ie()}},{key:"roundByTier",value:function(e){return e<=ie()?ie():e<.5?.01*Math.ceil(e/.01):e<1?.1*Math.round((e+1e-6)/.1):e<5?.25*Math.round((e+1e-6)/.25):e<10?.5*Math.round((e+1e-6)/.5):Math.round(e+1e-6)}}])}();function ii(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ii=function(){return!!e})()}var ni=function(e){function r(){return t(this,r),e=this,n=arguments,i=h(i=r),v(e,ii()?Reflect.construct(i,n||[],h(e).constructor):i.apply(e,n));var e,i,n}return y(r,e),o(r,[{key:"calculate",value:function(e,t,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=this.getMinFloorValue(i);if(t<=1)return Math.max(n,e);var o=(t-1)/2,a=e+e/o*(r-o);return Math.max(n,a)}}])}(ri);function oi(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(oi=function(){return!!e})()}var ai=function(e){function r(){return t(this,r),e=this,n=arguments,i=h(i=r),v(e,oi()?Reflect.construct(i,n||[],h(e).constructor):i.apply(e,n));var e,i,n}return y(r,e),o(r,[{key:"calculate",value:function(e,t,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=this.getMinFloorValue(i),o=e/Math.pow(2,(t-1)/2)*Math.pow(2,r);return Math.max(n,o)}}])}(ri);function si(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(si=function(){return!!e})()}var di=function(e){function r(){return t(this,r),e=this,n=arguments,i=h(i=r),v(e,si()?Reflect.construct(i,n||[],h(e).constructor):i.apply(e,n));var e,i,n}return y(r,e),o(r,[{key:"calculate",value:function(e,t,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=this.getMinFloorValue(i),o=Math.floor(t/2),a=e/Math.pow(1.5,o)*Math.pow(1.5,r);return Math.max(n,a)}}])}(ri);function ui(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ui=function(){return!!e})()}var li=function(e){function r(){return t(this,r),e=this,n=arguments,i=h(i=r),v(e,ui()?Reflect.construct(i,n||[],h(e).constructor):i.apply(e,n));var e,i,n}return y(r,e),o(r,[{key:"calculate",value:function(e,t,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=this.getMinFloorValue(i);if(t<=1)return Math.max(n,e);var o=.5*e,a=o+(3*e-o)*Math.pow(r/(t-1),.5);return Math.max(n,a)}}])}(ri);function ci(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ci=function(){return!!e})()}var fi=function(e){function r(){return t(this,r),e=this,n=arguments,i=h(i=r),v(e,ci()?Reflect.construct(i,n||[],h(e).constructor):i.apply(e,n));var e,i,n}return y(r,e),o(r,[{key:"calculate",value:function(e,t,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=this.getMinFloorValue(i);if(t<=1)return Math.max(n,e);var o=.5*e,a=o+(3*e-o)*Math.pow(r/(t-1),2);return Math.max(n,a)}}])}(ri);function pi(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(pi=function(){return!!e})()}var vi=function(e){function r(){return t(this,r),e=this,n=arguments,i=h(i=r),v(e,pi()?Reflect.construct(i,n||[],h(e).constructor):i.apply(e,n));var e,i,n}return y(r,e),o(r,[{key:"calculate",value:function(e,t,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=i.bidHistory,o=i.bidder,a=i.strategyName,s=this.getMinFloorValue(i);if(!n||0===Object.keys(n).length)return Math.max(s,e);var d=36e5,u=Date.now();if(o&&n[o]&&a===re.HISTORICAL_BIDDER)return this.calculateBidderSpecificFloor(o,n[o],e,t,r,u,d,i);var l=0,c=0;Object.values(n).forEach((function(e){e.bids.forEach((function(e){if(u-e.timestamp<=d){var t=e.wasWinner?2:1;c+=e.cpm*t,l+=t}}))}));var f=l>0?c/l:e,p=Math.floor(t/2);if(r===p)return Math.max(s,f);var v=1.5*f/(t-1);return Math.max(s,Math.max(.5*f,f+(r-p)*v))}},{key:"calculateBidderSpecificFloor",value:function(e,t,r,i,n,o,a){var s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:{},d=0,u=0,l=0,c=this.getMinFloorValue(s),f=t.bids.filter((function(e){return o-e.timestamp<=a}));if(0===f.length)return Math.max(c,r);f.forEach((function(e){var t=e.wasWinner?2:1;u+=e.cpm*t,d+=t,e.wasWinner&&l++}));var p,v=u/d;p=(l/=f.length)>.7?.9*v:l>.3?.75*v:.6*v,p=Math.max(.8*r,p);var h=Math.floor(i/2);if(n===h)return Math.max(c,p);var m=1.5*p/(i-1);return Math.max(c,Math.max(.5*p,p+(n-h)*m))}}])}(ri);function hi(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(hi=function(){return!!e})()}var mi=function(e){function r(){return t(this,r),e=this,n=arguments,i=h(i=r),v(e,hi()?Reflect.construct(i,n||[],h(e).constructor):i.apply(e,n));var e,i,n}return y(r,e),o(r,[{key:"calculate",value:function(e,t,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=this.getMinFloorValue(i);if(t<=1)return this.roundByTier(Math.max(n,e));if(0===r)return this.roundByTier(n);if(r>=t-1)return this.roundByTier(Math.max(n,e));var o=r/(t-1),a=e*Math.pow(o,3),s=Math.max(n,a);return this.roundByTier(s)}}])}(ri);function yi(e,t,r){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:r;throw new TypeError("Private element is not present on this object")}var bi,gi=function(){function e(){t(this,e)}return o(e,null,[{key:"getStrategy",value:function(t){return yi(e,this,_i)._[t]||new ni}},{key:"hasStrategy",value:function(t){return t in yi(e,this,_i)._}}])}(),_i={_:W(W(W(W(W(W(W(W({},re.UNIFORM,new ni),re.EXPONENTIAL,new ai),re.GEOMETRIC,new di),re.HIGH_END,new li),re.LOW_END,new fi),re.HISTORICAL,new vi),re.HISTORICAL_BIDDER,new vi),re.RAMP_UP,new mi)},wi=function(){function e(){t(this,e)}return o(e,null,[{key:"determineFloorSendingLogic",value:function(t,r,i){var n,o,a,s,d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.01,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,c="ez-o"===i,f="undefined"!=typeof __ez&&__ez.tf&&__ez.tf.vafsl;if(f){var p=Si.call(e,f,i,c,d,u,r);if(p)return p}if(null!=t&&null!==(n=t.bidFloorActions)&&void 0!==n&&null!==(n=n[0])&&void 0!==n&&n.prebidFloor)return{shouldActuallySendBidFloor:!0,shouldForceFloors:!0};if(c&&null!==(o=window.__ez)&&void 0!==o&&null!==(o=o.tf)&&void 0!==o&&o.vassf)return d&&l?l.isS2SBidder(d,c)?(oe("[VASSF TEST] Not sending floors to S2S bidder ".concat(d," for outstream")),{shouldActuallySendBidFloor:!1,shouldForceFloors:!1}):(oe("[VASSF TEST] Sending floors to non-S2S bidder ".concat(d," for outstream")),{shouldActuallySendBidFloor:!0,shouldForceFloors:!0}):{shouldActuallySendBidFloor:!0,shouldForceFloors:!0};var v="undefined"!=typeof __ez&&("1"===(null===(a=__ez)||void 0===a||null===(a=a.tf)||void 0===a?void 0:a.vabmf)||"2"===(null===(s=__ez)||void 0===s||null===(s=s.tf)||void 0===s?void 0:s.vabmf)),h=!1;h=h||v;var m=kr.isPlayerCacheAtCapacityThreshold(i)||h;return{shouldActuallySendBidFloor:!(!window.is_humix_app&&!m)||r,shouldForceFloors:m}}},{key:"getBidFloor",value:function(t,r){var i,n,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;if(null!==(i=t.adBreak)&&void 0!==i&&null!==(i=i.bidFloorActions)&&void 0!==i&&i.length){var d=r.shouldBidderSendMultipleFloors(s,t.isOutstream);if(d&&o>0){var u,l=t.adBreak.bidFloorActions.filter((function(e){return e.prebidFloor}));if(null!==(u=l[o-1])&&void 0!==u&&u.prebidFloor)return l[o-1].prebidFloor}else if(!d&&t.adBreak.bidFloorActions[0].prebidFloor)return t.adBreak.bidFloorActions[0].prebidFloor}var c=function(e,t,r){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:r;throw new TypeError("Private element is not present on this object")}(e,this,Ci).call(this,t,s);c=c>=0?c:0,c=Pi.call(e,c,t.playerId,t.isOutstream,s);var f=re.UNIFORM,p=Ii.call(e,t.isOutstream);p&&re[p]&&(f=re[p]),f||(f=re.UNIFORM),window.is_humix_app&&(c*=.3,f=re.RAMP_UP);var v=gi.getStrategy(f),h={bidHistory:"undefined"!=typeof __ez&&__ez.vhb&&__ez.vhb.globalBidHistory?__ez.vhb.globalBidHistory:{},bidder:s,strategyName:f,minFloor:ie(s,t.isOutstream)},m=a>0?a:1,y=o>=0?o:0,b=v.calculate(c,m,y,h);if(null!==(n=window.__ez)&&void 0!==n&&null!==(n=n.tf)&&void 0!==n&&n.vassf){var g=xi.call(e,t,o,s);g&&(b=g)}return Math.max(ie(s,t.isOutstream),b)}},{key:"getMultifloorFloors",value:function(t,r,i){for(var n,o,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,d=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1,u=[],l={adBreak:t,playerId:i,videoAdBidFloor:arguments.length>4&&void 0!==arguments[4]?arguments[4]:.01,isOutstream:"ez-o"===i,shouldSendBidFloor:r,statSourceFloors:null!==(n=window.__ez)&&void 0!==n&&null!==(n=n.tf)&&void 0!==n&&n.vassf&&window.__ezStatSourceFloors||{},multiFloorStatSourceFloors:null!==(o=window.__ez)&&void 0!==o&&null!==(o=o.tf)&&void 0!==o&&o.vassf&&window.__ezMultiFloorStatSourceFloors||{}},c=0;c<d;c++){var f=e.getBidFloor(l,s,c,d,a);f<=0&&(f=.01),u.push(f)}return u}}])}();function Bi(e){var t,r,i=e?null===(t=__ezOutstream)||void 0===t?void 0:t.vatc:null===(r=__ezInstream)||void 0===r?void 0:r.vatc;return(null==i?void 0:i.bcds)||"d"}function ki(e,t,r,i){var n,o=(null===(n=kr.getPlayerCache(t))||void 0===n?void 0:n.size())||0,a=Ai.call(bi,r),s=Ui.call(bi,i,r);if(o<=(a="core"!==s?Math.max(3,a-1):7))return e;var d=Mi.call(bi,s),u=d.inc,l=d.cap,c=1+u*(o-a);return e*Math.min(c,l)}function Oi(e,t,r,i,n){var o,a=(null===(o=kr.getPlayerCache(t))||void 0===o?void 0:o.size())||0,s=7;"conservative"===n?"t"!==Bi.call(bi,r)&&(s-=1):s=Ri.call(bi,i,r,e);var d=e;if(a>s){var u=ji.call(bi,r),l=u.curve,c=u.inc,f=u.max;d=e*Ti.call(bi,l,c,a-s,f)}return d}function Pi(e,t,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,n="undefined"!=typeof __ez&&__ez.tf&&__ez.tf.vafsl;if(n)return"split"===n&&i?ki.call(bi,e,t,r,i):Oi.call(bi,e,t,r,i,n);var o,a=(null===(o=kr.getPlayerCache(t))||void 0===o?void 0:o.size())||0;return a>=7?e*Math.min(1+.1*(a-7),1.75):e}function Si(e,t,r,i,n,o){if("split"===e){var a,s=(null===(a=kr.getPlayerCache(t))||void 0===a?void 0:a.size())||0,d=Ai.call(bi,r),u=s>=(d="core"!==Ui.call(bi,i,r)?Math.max(3,d-1):7);return{shouldActuallySendBidFloor:!!u||o,shouldForceFloors:u}}if("conservative"===e){var l,c=7;if("t"!==Bi.call(bi,r)&&(c-=1),((null===(l=kr.getPlayerCache(t))||void 0===l?void 0:l.size())||0)>=c)return{shouldActuallySendBidFloor:!0,shouldForceFloors:!0}}else if(e){var f,p=Ri.call(bi,i,r,n);if(((null===(f=kr.getPlayerCache(t))||void 0===f?void 0:f.size())||0)>p)return{shouldActuallySendBidFloor:!0,shouldForceFloors:!0}}return null}function Ci(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null==r)return oe("No bidder specified, returning default floor: ".concat(e.videoAdBidFloor)),e.videoAdBidFloor;var i=ce(r);return null!==(t=window.__ez)&&void 0!==t&&null!==(t=t.tf)&&void 0!==t&&t.vassf&&void 0!==e.statSourceFloors[i]?(oe("Using stat source floor for ".concat(r," (").concat(i,"): ").concat(e.statSourceFloors[i])),e.statSourceFloors[i]):(oe("No specific stat source floor found for ".concat(r," (").concat(i,"), returning default floor: ").concat(e.videoAdBidFloor)),e.videoAdBidFloor)}function xi(e,t){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(null==i)return oe("No bidder specified, returning default floor: ".concat(e.videoAdBidFloor)),null;var n=ce(i);if(null!==(r=window.__ez)&&void 0!==r&&null!==(r=r.tf)&&void 0!==r&&r.vassf&&void 0!==e.multiFloorStatSourceFloors[n]){oe("Using multi-floor stat source for ".concat(i," (").concat(n,"): ").concat(e.multiFloorStatSourceFloors[n]));var o=t%e.multiFloorStatSourceFloors[n].length;return e.multiFloorStatSourceFloors[n][o]}return oe("No specific multi-floor stat source found for ".concat(i," (").concat(n,"), returning default floor: ").concat(e.videoAdBidFloor)),null}function Ii(e){return e?"undefined"!=typeof __ezOutstream&&__ezOutstream.vatc&&__ezOutstream.vatc.fs?__ezOutstream.vatc.fs:null:"undefined"!=typeof __ezInstream&&__ezInstream.vatc&&__ezInstream.vatc.fs?__ezInstream.vatc.fs:null}function Ai(e){var t,r,i=e?null===(t=__ezOutstream)||void 0===t?void 0:t.vatc:null===(r=__ezInstream)||void 0===r?void 0:r.vatc,n=7;switch(Bi.call(bi,e)){case"v":n=4;break;case"r":n=5;break;case"m":n=6;break;default:n=7}return"d"!==((null==i?void 0:i.bcdsds)||"g")&&n<7&&n++,n}function zi(e,t,r){var i;if(!e)return t;var n=__ez.vhb,o=Ei.call(bi,r);if(!n||o<=3)return t;var a=null===(i=n.bidders)||void 0===i?void 0:i[e];return(a?a.bidsResponded/o:0)>=.6?Math.max(3,t-1):t}function Fi(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.01,i=__ez.vhb;if(!i)return null;var n=null===(t=i.globalBidHistory)||void 0===t?void 0:t[e];if(!n||n.totalBids<6)return null;var o=n.winCount/n.totalBids,a=n.avgBid/r;return.6*o+.4*Math.min(a,2)}function ji(e){return{curve:"lin",inc:.12,max:1.85}}function Ti(e,t,r,i){var n;return n="exp"===e?1+t*Math.pow(r,1.2):"log"===e?1+t*Math.log(r+1):1+t*r,Math.min(n,i)}function Ri(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.01,i=Ai.call(bi,t);i=zi.call(bi,e,i,t);var n=Bi.call(bi,t),o=e?Fi.call(bi,e,r):null;return"t"===n&&null!==o&&o<.15&&(i+=1),i}function Ei(e){var t,r,i,n;return e?null!==(t=null===(r=__ezOutstream)||void 0===r?void 0:r.AdIndex)&&void 0!==t?t:0:null!==(i=null===(n=__ezInstream)||void 0===n?void 0:n.AdIndex)&&void 0!==i?i:0}function Ui(e,t){var r,i=__ez.vhb;if(!i||!e)return"core";var n=null===(r=i.bidders)||void 0===r?void 0:r[e],o=Ei.call(bi,t);if(!o||o<=3)return"core";var a=n?n.bidsResponded:0,s=o>0?a/o:0;return s<.05?"rare":s<.1?"peripheral":"core"}function Mi(e){return{core:{inc:.1,cap:1.75},peripheral:{inc:.125,cap:2},rare:{inc:.2,cap:2}}[e]||{inc:.1,cap:1.75}}function Di(e,t,r){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:r;throw new TypeError("Private element is not present on this object")}bi=wi;var Li=new WeakSet,Vi=function(){return o((function e(r){var i,n;t(this,e),function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(i=this,n=Li),n.add(i),this.config=r,this.bidderConfig=new ti,this.builder=new Xr(r),this.videoOnlyAdUnitConfigurations=[{type:"non-ttd",method:Di(Li,this,Gi),suffix:""},{type:"ttd",method:Di(Li,this,Ki),suffix:"_ttd"},{type:"placement",method:Di(Li,this,Ji),suffix:""},{type:"outstream",method:Di(Li,this,Yi),suffix:ee},{type:"outstream-placement",method:Di(Li,this,Zi),suffix:ee}],this.multiformatAdUnitConfigurations=[{type:"multiformat-nonnative",method:Di(Li,this,Qi),suffix:""},{type:"multiformat-nonnative-placement",method:Di(Li,this,Xi),suffix:""},{type:"multiformat-allformats",method:Di(Li,this,$i),suffix:""},{type:"multiformat-allformats-placement",method:Di(Li,this,en),suffix:""}]}),[{key:"createAdUnitsForBidders",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2?arguments[2]:void 0;this.config.shouldSendBidFloor=i;try{if(!t||"object"!==e(t))return console.warn("No categorized bidders provided for ad unit creation"),[];var n=[],o=wi.getMultifloorFloors(this.config.adBreak,this.config.shouldSendBidFloor,this.config.playerId,null,this.config.videoAdBidFloor,this.bidderConfig,3);if(t.nonMultifloor&&n.push.apply(n,_r(Di(Li,this,Ni).call(this,t.nonMultifloor,0,1,!1,o))),t.multifloor)for(var a=0;a<r;a++)n.push.apply(n,_r(Di(Li,this,Ni).call(this,t.multifloor,a,r,!0)));return n}catch(e){return console.error("Error creating ad units for categorized bidders:",e),[]}}}])}();function Ni(e,t,r,i){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],o=[];return e.videoOnly&&o.push.apply(o,_r(Di(Li,this,Hi).call(this,e.videoOnly,this.videoOnlyAdUnitConfigurations,t,r,i,!1))),e.s2s&&e.s2s.videoOnly&&o.push.apply(o,_r(Di(Li,this,Hi).call(this,e.s2s.videoOnly,this.videoOnlyAdUnitConfigurations,t,r,i,!0,n))),this.config.isOutstream&&e.multiformat&&o.push.apply(o,_r(Di(Li,this,Hi).call(this,e.multiformat,this.multiformatAdUnitConfigurations,t,r,i,!1))),this.config.isOutstream&&e.s2s&&e.s2s.multiformat&&o.push.apply(o,_r(Di(Li,this,Hi).call(this,e.s2s.multiformat,this.multiformatAdUnitConfigurations,t,r,i,!0,n))),o}function Hi(e,t,r,i,n){var o=this,a=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:[],d=[];return t.forEach((function(t){var u=Di(Li,o,qi).call(o,Di(Li,o,Wi).call(o,e,t.type),n,r,i);if(u.length>0){t.method.call(o,o.builder);var l,c=t.type.includes("placement");o.builder.withBidPoolId(r,c,t.suffix,a),a&&!(null===(l=window.__ez)||void 0===l||null===(l=l.tf)||void 0===l?void 0:l.vassf)&&a&&a&&o.builder.withS2SFloor(s),"ttd"!==t.type&&o.builder.updateAdUnitForAbTests(),o.builder.withBidders(u);var f=o.builder.build();d.push(f),o.builder.reset()}})),d}function qi(e,t,r,i){var n=this;if(!e||!Array.isArray(e)||0===e.length)return[];var o={minDur:this.config.params.min/1e3,maxDur:this.config.params.max/1e3,skippable:this.config.params.skip,shouldSendBidFloor:t,prebidParams:this.config.prebidParams,isOutstream:this.config.isOutstream,language:this.config.videoLanguage,timeOffset:this.config.timeOffset||0,playerId:this.config.playerId,player:le(this.config.playerId)};return e.map((function(e){var a=ue(e),s=a.bidder,d=cr.getStrategy(s),u=wi.determineFloorSendingLogic(n.config.adBreak,t,n.config.playerId,a.bidder,n.config.videoAdBidFloor,n.bidderConfig),l=u.shouldActuallySendBidFloor,c=u.shouldForceFloors;if(o.shouldSendBidFloor=l,o.shouldForceFloors=c,d){var f=wi.getBidFloor(n.config,n.bidderConfig,r,i,s);o.floorVal=0,o.shouldSendBidFloor&&(o.floorVal=f),a=d.applyBidParams(a,o),a=d.applyAbTestParams(a,o)}return a}))}function Wi(e,t){switch(t){case"ttd":return e.ttd||[];case"non-ttd":return e.nonTtd||[];case"placement":return e.placement||[];case"outstream":return e.outstream||[];case"outstream-placement":return e.outstreamPlacement||[];case"multiformat-nonnative":return e.nonNative||[];case"multiformat-nonnative-placement":return e.nonNativePlacement||[];case"multiformat-allformats":return e.allFormats||[];case"multiformat-allformats-placement":return e.allFormatsPlacement||[];default:return[]}}function Gi(e){return e}function Ki(e){return e.withTTDConfiguration()}function Ji(e){return e.withPlacement()}function Yi(e){return e.withOutstreamContext()}function Zi(e){return e.withOutstreamContext().withPlacement()}function Qi(e){return e.withOutstreamContext().withMultiFormat()}function Xi(e){return e.withOutstreamContext().withPlacement().withMultiFormat()}function $i(e){return e.withOutstreamContext().withMultiFormat().withNative()}function en(e){return e.withOutstreamContext().withPlacement().withMultiFormat().withNative()}function tn(e,t,r){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:r;throw new TypeError("Private element is not present on this object")}var rn=new WeakSet,nn=function(){return o((function e(r){var i,n;t(this,e),function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(i=this,n=rn),n.add(i),this.config=r,this.director=new Vi(r),this.bidderConfig=new ti}),[{key:"createAdUnits",value:function(e,t){try{var r=tn(rn,this,un).call(this),i=tn(rn,this,on).call(this,r);return this.director.createAdUnitsForBidders(i,e,t)}catch(e){return console.error("Error creating ad units for auction:",e),[]}}}])}();function on(e){var t=this,r={nonMultifloor:{videoOnly:{ttd:[],nonTtd:[],placement:[],outstream:[],outstreamPlacement:[]},multiformat:{nonNative:[],nonNativePlacement:[],allFormats:[],allFormatsPlacement:[]},s2s:{videoOnly:{nonTtd:[],placement:[],outstream:[],outstreamPlacement:[]},multiformat:{nonNative:[],nonNativePlacement:[],allFormats:[],allFormatsPlacement:[]}}},multifloor:{videoOnly:{ttd:[],nonTtd:[],placement:[],outstream:[],outstreamPlacement:[]},multiformat:{nonNative:[],nonNativePlacement:[],allFormats:[],allFormatsPlacement:[]},s2s:{videoOnly:{nonTtd:[],placement:[],outstream:[],outstreamPlacement:[]},multiformat:{nonNative:[],nonNativePlacement:[],allFormats:[],allFormatsPlacement:[]}}}},i=this.bidderConfig.getS2SBidderSet(this.config.isOutstream);return e.forEach((function(e){var n=t.bidderConfig.getBidderProfile(e.bidder,t.config.isOutstream,i);tn(rn,t,an).call(t,e,n,r)})),r}function an(e,t,r){var i=t.isMultifloor?"multifloor":"nonMultifloor";this.config.isOutstream&&(t.isMultiformat||t.isMultiformatBannerOnly)&&this.config.isMultiformatEnabled?tn(rn,this,sn).call(this,e,t,r[i]):tn(rn,this,dn).call(this,e,t,r[i])}function sn(e,t,r){var i=t.isS2S?r.s2s.multiformat:r.multiformat,n="allFormats";t.isMultiformatBannerOnly&&(n="nonNative");var o=n+(t.needsPlacement?"Placement":"");i[o]&&i[o].push(e)}function dn(e,t,r){if(t.isTTD)r.videoOnly.ttd.push(e);else{var i=t.isS2S?r.s2s.videoOnly:r.videoOnly;t.needsOutstream&&t.needsPlacement?i.outstreamPlacement.push(e):t.needsOutstream?i.outstream.push(e):t.needsPlacement?i.placement.push(e):i.nonTtd.push(e)}}function un(){var e=this.config.isOutstream?__ezOutstream:__ezInstream;if(!e||!Array.isArray(e.prebidBidders)){var t=this.config.isOutstream?"outstream":"instream";throw new Error("Prebid bidders not found or invalid in ".concat(t," global"))}return e.prebidBidders}function ln(e,t,r){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:r;throw new TypeError("Private element is not present on this object")}var cn=new WeakSet,fn=function(){return o((function e(){var r,i;t(this,e),function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(r=this,i=cn),i.add(r),ae()&&epbjs.que.push((function(){epbjs.setConfig({debug:!1})}))}),[{key:"fetchBids",value:function(e,t){var r,i=this;oe("startPrebidBidding");var n=e.isOutstream?__ezOutstream.prebidBidders:__ezInstream.prebidBidders;if(null==n||!n.length)return oe("No Prebid bidders"),Promise.reject();if(!epbjs||!epbjs.requestBids||!epbjs.que)return oe("something wrong with epbjs"),Promise.reject();ln(cn,this,yn).call(this),(e.getIsBackfillMode()||e.isRewarded)&&(e.isMultiformatEnabled=!1);var o=!(null!==(r=window.__ezInstream)&&void 0!==r&&r.DoNotPassBidFloorToPreBid),a=_ezaq.country||"US",s=1;"US"===a?s=5:{PR:!0,CA:!0,GB:!0,ES:!0,FR:!0,AU:!0,DE:!0,CH:!0,IE:!0,NL:!0,AE:!0,ZA:!0}[a]&&(s=2);var d=ln(cn,this,pn).call(this,e,s,o);ln(cn,this,bn).call(this,e),ln(cn,this,_n).call(this,e);var u="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})),l=function(t){t.auctionId===u&&(e.prebidBidderRequests=t.bidderRequests,epbjs.offEvent("auctionEnd",l))};return epbjs.onEvent("auctionEnd",l),new Promise((function(r,n){var o=setTimeout((function(){oe("Prebid timed out"),n("Prebid timed out")}),12e4);epbjs.que.push((function(){oe("Prebid.js requesting bids",d,"timeout",t);var n,a={auctionId:u,timeout:t,adUnits:d,bidsBackHandler:(n=q(K().mark((function t(n,a,s){var d;return K().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return clearTimeout(o),oe("Current ad break: ",e),oe("Prebid received bids: ",n,"\nTimed Out: ",a,"\nAuction ID: ",s),d=null==n?void 0:n[e.key],t.next=6,ln(cn,i,hn).call(i,d);case 6:d&&(e.prebidBids=d.bids,e.updatePrebidBidCacheWithBids(d.bids)),r({bids:(null==d?void 0:d.bids)||[],timedOut:a});case 8:case"end":return t.stop()}}),t)}))),function(e,t,r){return n.apply(this,arguments)}),labels:["iid1:".concat(e.impressionId)],ortb2:ln(cn,i,vn).call(i,e)};epbjs.requestBids(a)}))}))}}])}();function pn(e,t,r){var i={adBreak:e,key:e.key,gpid:e.gpid,breakID:e.breakID,prebidParams:e.prebidParams,videoAdBidFloor:e.videoAdBidFloor,isOutstream:e.isOutstream,isRewarded:e.isRewarded,params:e.params,timeOffset:e.timeOffset,isMultiformatEnabled:e.isMultiformatEnabled,adBreakPosition:e.isOutstream?void 0:e.getAdBreakPosition(e.breakID),playerId:e.getPlayerId(),videoLanguage:e.getVideoLanguage(e.getPlayerId()),statSourceFloors:e.getStatSourceFloors(),multiFloorStatSourceFloors:e.getMultiFloorStatSourceFloors()},n=new nn(i).createAdUnits(t,r);return e.prebidAdUnits=n,n}function vn(e){var t={};try{var r=le(e.getPlayerId());if(r){var i,n,o=r.adRenderer.videoPlayer_.player.player;if(o.videos){var a=o.playlist.currentIndex();i=o.videos[a]}else i=r.adRenderer.videoPlayer_.videoObject.Video;i&&(t.site={content:{id:i.VideoContentId,title:i.Title,cattax:6,cat:(null===(n=i.IABCategoryIds)||void 0===n?void 0:n.split(","))||[],keywords:i.Keywords,len:Math.round(i.VideoDurationMs/1e3),language:i.Language}})}}catch(e){oe("Error setting ORTB2",e)}return t}function hn(e){return mn.apply(this,arguments)}function mn(){return(mn=q(K().mark((function e(t){var r,i,n,o;return K().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(null==t||null===(r=t.bids)||void 0===r?void 0:r.length)>1&&t.bids.sort((function(e,t){var r,i,n,o,a=null!==(r=null!==(i=e.cpm)&&void 0!==i?i:e.originalCpm)&&void 0!==r?r:0;return(null!==(n=null!==(o=t.cpm)&&void 0!==o?o:t.originalCpm)&&void 0!==n?n:0)-a})),i=0;case 2:if(!(i<(null==t||null===(n=t.bids)||void 0===n?void 0:n.length))){e.next=10;break}return o=t.bids[i],e.next=6,Rr.cacheOrFilterBid(o);case 6:t.bids[i]=e.sent;case 7:i++,e.next=2;break;case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function yn(){var e,t,r,i;"undefined"!=typeof __ez&&!0===(null===(e=__ez)||void 0===e||null===(e=e.fads)||void 0===e||null===(e=e.adLoadHB)||void 0===e?void 0:e.loaded)&&!0===(null===(t=__ez)||void 0===t||null===(t=t.fads)||void 0===t?void 0:t.isJIT)&&!1===(null===(r=__ez)||void 0===r||null===(r=r.fads)||void 0===r||null===(r=r.adLoadHB)||void 0===r?void 0:r.preBidEventsSetup)&&"function"==typeof(null===(i=__ez)||void 0===i||null===(i=i.fads)||void 0===i||null===(i=i.adLoadHB)||void 0===i?void 0:i.setUpGlobalEvents)&&__ez.fads.adLoadHB.setUpGlobalEvents()}function bn(e){var t;e.prebidNumBidsInCache=(null===(t=kr.getPlayerCache(e.getPlayerId()))||void 0===t?void 0:t.size())||0}function gn(e){var t=e||.02;return{currency:"USD",floorsschemaversion:2,modelgroups:[{modelversion:"1.0",currency:"USD",default:t,schema:{delimiter:"|",fields:["mediaType","size"]},values:{"video|*":t,"*|*":t}}]}}function _n(e){var t=this;if(e.isOutstream?"undefined"!=typeof __s2soutstreambidders&&__s2soutstreambidders.length>0:"undefined"!=typeof __s2sinstreambidders&&__s2sinstreambidders.length>0){var r=epbjs.getConfig("s2sConfig");r.forEach((function(r){e.isOutstream&&"outstream"===r.name?r.extPrebid.floors={enabled:!0,enforcement:{enforcepbs:!1},data:ln(cn,t,gn).call(t)}:e.isOutstream||"instream"!==r.name||(r.extPrebid.floors={enabled:!0,enforcement:{enforcepbs:!1},data:ln(cn,t,gn).call(t)})})),epbjs.setConfig({s2sConfig:r})}}function wn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function Bn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?wn(Object(r),!0).forEach((function(t){W(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var kn=function(){function r(e,i,n){if(t(this,r),!e||!i||void 0===n)throw new Error("playerId, contentId, and positionId are required");this.request={playerId:e,contentId:i,positionId:n,videoIndex:0,playerState:{autoplay:!1,floating:!1},adConfig:{adsEnabled:2,adIndex:1,unfilledCount:0},floorConfig:{version:0,previousFloors:{last:-1,outstream:-1,instream:-1,highest:-1}},pageContext:{pageViewId:"undefined"!=typeof _ezaq?_ezaq.page_view_id:"",requestTime:"undefined"!=typeof _ezaq?_ezaq.t_epoch:Date.now()/1e3}}}return o(r,[{key:"withVideoIndex",value:function(e){return this.request.videoIndex=e,this}},{key:"withPlayerState",value:function(e){return this.request.playerState=Bn(Bn({},this.request.playerState),e),this}},{key:"withAdConfig",value:function(e){return this.request.adConfig=Bn(Bn({},this.request.adConfig),e),this}},{key:"withFloorConfig",value:function(e){return e.previousFloors&&(e.previousFloors=Bn(Bn({},this.request.floorConfig.previousFloors),e.previousFloors)),this.request.floorConfig=Bn(Bn({},this.request.floorConfig),e),this}},{key:"withPageContext",value:function(e){return this.request.pageContext=Bn(Bn({},this.request.pageContext),e),this}},{key:"withVideoAdParams",value:function(e){return this.request.videoAdParams=Bn(Bn({},this.request.videoAdParams),e),this}},{key:"withBackfillMode",value:function(e){return this.request.isBackfillMode=e,this}},{key:"fromWindowState",value:function(){"undefined"!=typeof window&&"object"===e(window.lastVideoFloor)&&window.lastVideoFloor.hasOwnProperty("last")&&this.withFloorConfig({previousFloors:{last:window.lastVideoFloor.last,outstream:window.lastVideoFloor.outstream,instream:window.lastVideoFloor.instream,highest:window.lastVideoFloor.highest}});var t=0;if("undefined"!=typeof window&&("ez-o"!==this.request.playerId&&"ez-r-o"!==this.request.playerId||void 0===window.__ezOutstream||!window.__ezOutstream.UnfilledCnt?void 0!==window.__ezInstream&&window.__ezInstream.UnfilledCnt&&(t=window.__ezInstream.UnfilledCnt):t=window.__ezOutstream.UnfilledCnt),this.withAdConfig({unfilledCount:t}),"undefined"!=typeof window&&void 0!==window.__ezOutstream&&(window.__ezOutstream.AdIndex&&this.withAdConfig({adIndex:window.__ezOutstream.AdIndex}),void 0!==window.__ezOutstream.floorVersion&&this.withFloorConfig({version:window.__ezOutstream.floorVersion}),window.__ezOutstream.generatorVersion&&this.withAdConfig({generatorVersion:window.__ezOutstream.generatorVersion}),window.__ezOutstream.rampUp&&this.withFloorConfig({useReducedFloors:!0})),"undefined"!=typeof window&&void 0!==window.__ezInstream&&(window.__ezInstream.EnableVideoDeals&&this.withAdConfig({enableDeals:!0}),window.__ezInstream.rampUp&&this.withFloorConfig({useReducedFloors:!0})),"undefined"!=typeof window&&window.is_humix_app&&this.withPageContext({isHumixApp:!0}),"undefined"!=typeof window&&"1"===new URLSearchParams(window.location.href).get("ez_no_outstream_floor")&&this.withFloorConfig({noOutstreamFloor:!0}),"undefined"!=typeof window&&void 0!==window._ezaq){var r={};window._ezaq.url&&(r.parentUrl=window._ezaq.url),window._ezaq.ab_test_id&&(r.abTestId=window._ezaq.ab_test_id),Object.keys(r).length>0&&this.withPageContext(r)}return this}},{key:"validate",value:function(){var e=this.request,t=e.playerId,r=e.contentId,i=e.positionId;if(e.pageContext,!t||!r||void 0===i)throw new Error("Missing required fields: playerId, contentId, and positionId");if(this.request.videoAdParams){var n=this.request.videoAdParams,o=n.plcmt,a=n.minDuration,s=n.maxDuration;if(void 0!==o&&(o<1||o>4))throw new Error("Invalid plcmt value: must be between 1 and 4");if(void 0!==a&&a<0)throw new Error("Invalid minDuration: must be non-negative");if(void 0!==s&&s<0)throw new Error("Invalid maxDuration: must be non-negative");if(void 0!==a&&void 0!==s&&a>s)throw new Error("Invalid duration range: minDuration cannot exceed maxDuration")}return!0}},{key:"build",value:function(){return this.validate(),JSON.parse(JSON.stringify(this.request))}},{key:"toLegacyParams",value:function(){var e=new URLSearchParams,t=this.request,r=t.playerId,i=t.contentId,n=t.positionId,o=t.videoIndex,a=t.playerState,s=t.adConfig,d=t.floorConfig,u=t.pageContext,l=t.videoAdParams,c=t.isBackfillMode;return e.set("player_id",r),e.set("content_id",i),e.set("position_id",n.toString()),o>0&&e.set("video_index",o.toString()),e.set("autoplay",a.autoplay?"1":"0"),e.set("floating",a.floating?"1":"0"),e.set("ads_enabled",s.adsEnabled.toString()),s.adUnit&&e.set("ad_unit",s.adUnit),1!==s.adIndex&&e.set("ad_index",s.adIndex.toString()),s.isFirstBreak&&e.set("is_first_break","1"),s.enableDeals&&e.set("enable_deals","1"),s.unfilledCount>0&&e.set("unf_c",s.unfilledCount.toString()),s.generatorVersion&&e.set("generator_version",s.generatorVersion),e.set("floor_version",d.version.toString()),e.set("prevfl",d.previousFloors.last.toString()),e.set("prevflo",d.previousFloors.outstream.toString()),e.set("prevfli",d.previousFloors.instream.toString()),e.set("prevflh",d.previousFloors.highest.toString()),d.useReducedFloors&&e.set("reducer","1"),d.noOutstreamFloor&&e.set("ez_no_outstream_floor","1"),e.set("pageview_id",u.pageViewId),e.set("pv_ep",Math.floor(u.requestTime).toString()),u.parentUrl&&e.set("parent_url",u.parentUrl),u.abTestId&&e.set("mod",u.abTestId),u.isHumixApp&&e.set("is_humix_app","1"),l&&(void 0!==l.plcmt&&e.set("plcmt",l.plcmt.toString()),void 0!==l.minDuration&&e.set("min_length",l.minDuration.toString()),void 0!==l.maxDuration&&e.set("max_length",l.maxDuration.toString())),c&&e.set("is_backfill_mode","1"),e}}],[{key:"fromLegacy",value:function(e){var t=new r(e.playerId,e.videoId,e.videoPositionId);if(void 0!==e.videoIndex&&t.withVideoIndex(e.videoIndex),t.withPlayerState({autoplay:e.isAutoPlay||!1,floating:e.isFloating||!1,floatPosition:e.floatPosition}),t.withAdConfig({adsEnabled:e.adsEnabled,adUnit:e.adUnit,isFirstBreak:e.isFirstBreak}),e.paramConfig){var i={};void 0!==e.paramConfig.plcmt&&(i.plcmt=e.paramConfig.plcmt),void 0!==e.paramConfig.minLength&&(i.minDuration=e.paramConfig.minLength),void 0!==e.paramConfig.maxLength&&(i.maxDuration=e.paramConfig.maxLength),Object.keys(i).length>0&&t.withVideoAdParams(i),void 0!==e.paramConfig.isBackfillMode&&t.withBackfillMode(e.paramConfig.isBackfillMode)}return t.fromWindowState()}}])}();function On(e,t,r){return new kn(e,t,r)}const Pn=function(){return o((function e(){t(this,e),W(this,"breaks",{}),W(this,"floatingBreaks",{}),W(this,"target",new EventTarget),W(this,"biddingInProcess",{}),W(this,"bidderTimeoutMS",1800),W(this,"globalBidHistory",{}),W(this,"bidders",{}),W(this,"auctionsRun",0),W(this,"adsShown",0),W(this,"auctionPromiseByImpressionId",{}),W(this,"videoBidderAps",void 0),W(this,"videoBidderPrebid",void 0),this.videoBidderAps=new Nr,this.videoBidderPrebid=new fn,this.initializeBidFilter(),this.initializeVideoBidTracking()}),[{key:"doAuction",value:function(e){var t,r,i,n=this,o=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return(null===(t=e.bidFloorActions)||void 0===t||null===(t=t[0])||void 0===t?void 0:t.prebidFloor)>0&&(e.videoAdBidFloor=e.bidFloorActions[0].prebidFloor),(r=this.auctionPromiseByImpressionId)[i=e.impressionId]||(r[i]=q(K().mark((function t(){var r,i;return K().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.biddingInProcess[e.getPlayerId()]=!0,n.auctionsRun++,(r=n.videoBidderPrebid.fetchBids(e,n.bidderTimeoutMS)).then((function(e){e.bids,e.timedOut&&(n.bidderTimeoutMS+=1200,oe("Prebid timed out, incrementing timeout: ",n.bidderTimeoutMS))})),i=n.videoBidderAps.fetchBids(e,n.bidderTimeoutMS,o),t.abrupt("return",Promise.allSettled([r,i]));case 6:case"end":return t.stop()}}),t)})))())}},{key:"bid",value:(a=q(K().mark((function e(t,r){var i,n=this;return K().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.biddingInProcess[t.getPlayerId()]=!0,!this.shouldConsiderCustomBreaksOutstreamCollision(t)){e.next=6;break}return oe("Handling custom breaks outstream collision"),e.next=5,this.handleCustomBreaksOutstreamCollision(t,r);case 5:return e.abrupt("return");case 6:if(!se()){e.next=12;break}return t.isComplete=!0,t.key&&t.markBreakAsComplete(t.key,t.isFloating),t.vastURL=X,this.dispatchRenderAdBreak(t),e.abrupt("return");case 12:i=r||!de(t.isOutstream),this.doAuction(t,!1).catch((function(e){oe("Error bidding",e),t.isComplete=!0,t.key&&t.markBreakAsComplete(t.key,t.isFloating)})).finally((function(){oe("Bidding finished");var e=t.getHighestBidWithSource();t.isOutstream&&e.source===$&&"video"!==e.format?(t.fillInAdBreakForMultiFormatAd(),n.dispatchRenderMultiformatAd(t)):(t.assembleTagURL(i),n.dispatchRenderAdBreak(t))}));case 14:case"end":return e.stop()}}),e,this)}))),function(e,t){return a.apply(this,arguments)})},{key:"bidWithoutRender",value:(n=q(K().mark((function e(t){var r,i,n,o=this,a=arguments;return K().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=a.length>1&&void 0!==a[1]&&a[1],i=!(a.length>2&&void 0!==a[2])||a[2],this.biddingInProcess[t.getPlayerId()]=!0,t.isRewarded=i,!this.shouldConsiderCustomBreaksOutstreamCollision(t)){e.next=9;break}return oe("Handling custom breaks outstream collision"),e.next=8,this.handleCustomBreaksOutstreamCollision(t,r);case 8:return e.abrupt("return",t);case 9:if(!se()){e.next=14;break}return t.isComplete=!0,t.key&&t.markBreakAsComplete(t.key,t.isFloating),t.vastURL=X,e.abrupt("return",t);case 14:return n=r||!de(t.isOutstream),e.abrupt("return",new Promise((function(e){o.doAuction(t,!1).catch((function(e){oe("Error bidding",e),t.isComplete=!0,t.key&&t.markBreakAsComplete(t.key,t.isFloating)})).finally((function(){oe("Bidding finished without render"),t.assembleTagURL(n),e(t)}))})));case 16:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"bidMultipleBreaks",value:function(e,t){var r,i=this;if(0!==e.length){"true"===(null===(r=__ez)||void 0===r||null===(r=r.tf)||void 0===r?void 0:r.vamauf)&&this.applyUnifiedFloor(e);var n=e.map((function(e){return i.doAuction(e,!0)}));Promise.allSettled(n).finally((function(){var r,n=null,o=-1,a=null;e.forEach((function(e){var t=e.getHighestBidWithSource();t.cpm>o&&(o=t.cpm,n=e,t.source),e.isOutstream||(a=e),e.isComplete=!0,e.isMultiAuction=1}));var s={};if(n){var d=t||!de(n.isOutstream);n.assembleTagURL(d),s.bestBreak=n}if(n&&n.isOutstream&&a){var u=t||!de(a.isOutstream);a.assembleTagURL(u),s.instreamBreak=a}if(!n&&a){var l=t||!de(a.isOutstream);a.assembleTagURL(l),s.bestBreak=a}null!==(r=window.__ezDevtools)&&void 0!==r&&r.addMultiAuction&&__ezDevtools.addMultiAuction(e.map((function(e){var t=e.getHighestBidWithSource(),r=t.cpm,i=t.source;return{impressionId:e.impressionId,cpm:r,source:i,isBest:e===s.bestBreak}}))),i.dispatchRenderMultipleAdBreaks(s)}))}}},{key:"applyUnifiedFloor",value:function(e){var t=-1,r="";e.forEach((function(e){e.videoAdBidFloor>t&&(t=e.videoAdBidFloor,r=e.videoAdBidHash)})),t>0&&(e.forEach((function(e){e.videoAdBidFloor=t,e.videoAdBidHash=r})),oe("Multi-auction using highest floor: ".concat(t," with bid hash: ").concat(r)))}},{key:"addListener",value:function(e,t){this.target.addEventListener(e,t)}},{key:"dispatchRenderAdBreak",value:function(e){var t=new Event("RenderAdBreak");t.AdBreak=e,this.target.dispatchEvent(t)}},{key:"dispatchRenderMultipleAdBreaks",value:function(e){var t=new Event("RenderAdBreak");t.AdBreaks=e,this.target.dispatchEvent(t)}},{key:"dispatchRenderMultiformatAd",value:function(e){var t=new Event("RenderMultiformatAd");t.AdBreak=e,this.target.dispatchEvent(t)}},{key:"processAdBreakData",value:function(e,t,r){var i=this;e.forEach((function(e){var n=new gr(e);n.isFloating=t,null!==r&&(n.floatPosition=r),t?i.floatingBreaks[e.key]=n:i.breaks[e.key]=n}))}},{key:"getBreaks",value:function(e,t){var r=e+"$"+t+"$"+(arguments.length>2&&void 0!==arguments[2]?arguments[2]:0);return Object.values(this.breaks).filter((function(e){return e.key.includes(r)}))}},{key:"getFloatingBreaks",value:function(e,t){var r=e+"$"+t+"$"+(arguments.length>2&&void 0!==arguments[2]?arguments[2]:0);return Object.values(this.floatingBreaks).filter((function(e){return e.key.includes(r)}))}},{key:"getIncompleteBreaks",value:function(e,t){var r=e+"$"+t+"$"+(arguments.length>2&&void 0!==arguments[2]?arguments[2]:0);return Object.values(this.breaks).filter((function(e){return e.key.includes(r)&&!e.isComplete}))}},{key:"clearExistingAdBreaks",value:function(e,t,r,i){var n=this,o=e+"$"+t+"$"+r;i?Object.keys(this.floatingBreaks).forEach((function(e){e.includes(o)&&delete n.floatingBreaks[e]})):Object.keys(this.breaks).forEach((function(e){e.includes(o)&&delete n.breaks[e]}))}},{key:"requestBreaksV2",value:(i=q(K().mark((function e(t){var r,i,n,o,a,s,d,u,l,c,f,p,v,h,m,y,b,g,_,w,B,k,O;return K().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.playerId,i=t.videoId,n=t.adsEnabled,o=t.videoPositionId,a=t.videoIndex,s=void 0===a?0:a,d=t.isAutoPlay,u=void 0!==d&&d,l=t.isFloating,c=void 0!==l&&l,f=t.adUnit,p=void 0===f?null:f,v=t.isFirstBreak,h=void 0!==v&&v,m=t.isFloatingAdBreaks,y=void 0!==m&&m,b=t.floatPosition,g=void 0===b?null:b,_=t.paramConfig,w=void 0===_?{}:_,this.clearExistingAdBreaks(r,i,s,y),B=On(r,i,o).withVideoIndex(s).withPlayerState({autoplay:u,floating:c,floatPosition:g}).withAdConfig({adsEnabled:n,adUnit:p,isFirstBreak:h}).fromWindowState(),w&&Object.keys(w).length>0&&(k={},void 0!==w.plcmt&&(k.plcmt=w.plcmt),void 0!==w.minLength&&(k.minDuration=w.minLength),void 0!==w.maxLength&&(k.maxDuration=w.maxLength),Object.keys(k).length>0&&B.withVideoAdParams(k),void 0!==w.isBackfillMode&&B.withBackfillMode(w.isBackfillMode)),O=B.build(),e.abrupt("return",this.requestBreaksWithJsonPost(O,r,i,s,y,g));case 6:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"getEzVastsBaseURL",value:function(){return window._ez_sa||window._ez_send_requests_through_ezoic||window.hasOwnProperty("ezIntType")&&"wp"===window.ezIntType?"https://g.ezoic.net":window.location.origin}},{key:"requestBreaksWithJsonPost",value:(r=q(K().mark((function e(t,r,i,n,o,a){var s,d,u,l,c;return K().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=this.getEzVastsBaseURL(),d=new URL("/ez-vasts",s),e.next=4,fetch(d,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).catch((function(e){u=e}));case 4:if(l=e.sent,!u){e.next=8;break}return console.error("Error:",u),e.abrupt("return",[]);case 8:return e.next=10,l.json();case 10:if((c=e.sent)&&0!==c.length){e.next=14;break}return console.error("No breaks receieved. Not bidding."),e.abrupt("return",[]);case 14:if(this.processAdBreakData(c,o,a),!o){e.next=17;break}return e.abrupt("return",this.getFloatingBreaks(r,i,n));case 17:return e.abrupt("return",this.getBreaks(r,i,n));case 18:case"end":return e.stop()}}),e,this)}))),function(e,t,i,n,o,a){return r.apply(this,arguments)})},{key:"biddingComplete",value:function(e){this.biddingInProcess[e]=!1}},{key:"getBiddingInProcess",value:function(e){return this.biddingInProcess[e]||!1}},{key:"recordBidders",value:function(e){var t=this;e.forEach((function(e){var r;t.bidders.hasOwnProperty(e.bidder)||(t.bidders[e.bidder]={bidsResponded:0,bidsWon:0,maxBidValue:-1}),t.bidders[e.bidder].bidsResponded++,t.bidders[e.bidder].maxBidValue<e.cpm&&(t.bidders[e.bidder].maxBidValue=e.cpm),t.recordBidInHistory(e.bidder,e.cpm,null!==(r=e.appliedFloor)&&void 0!==r?r:null,!1)}))}},{key:"recordWinForBidder",value:function(e,t){this.adsShown++,this.bidders.hasOwnProperty(e)||(this.bidders[e]={bidsResponded:1,bidsWon:0,maxBidValue:-1}),this.bidders[e].bidsWon++,this.bidders[e].maxBidValue<t&&(this.bidders[e].maxBidValue=t),this.recordBidInHistory(e,t,null,!0)}},{key:"shouldConsiderCustomBreaksOutstreamCollision",value:function(e){var t,r;if(!e.isOutstream&&e.isAdBreakCustomPosition()&&0===e.timeOffsetSeconds)return null===(r=ezVideoAdConductor)||void 0===r||null===(r=r.getVideoAdConductor())||void 0===r||null===(r=r.getOutstreamPlayer())||void 0===r?void 0:r.isAdInProgress();var i=null===(t=window.__ez)||void 0===t||null===(t=t.nextCustomBreak)||void 0===t?void 0:t.break;if(!i)return!1;if(i.isTriggered||i.isComplete||i.IsSkipped)return!1;if(!i.getIsPlayerCurrentlyFloating()&&e.isOutstream){var n=this.getTimeUntilNextBreak(e.getPlayerId(),i);if(n<=-1&&(n=window.__ez.nextCustomBreak.timeUntilBreak||0),n<=15)return!0;if(n<=30&&e.prebidParams&&e.prebidParams.maxduration>=16)return!0}return!1}},{key:"handleCustomBreaksOutstreamCollision",value:(e=q(K().mark((function e(t,r){var i,n,o,a,s;return K().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.isOutstream||!t.isAdBreakCustomPosition()||0!==t.timeOffsetSeconds){e.next=7;break}return oe("Skipping custom break preroll since outstream is currently playing"),t.isTriggered=!0,t.isComplete=!0,t.key&&t.markBreakAsComplete(t.key,t.isFloating),this.biddingComplete(t.getPlayerId()),e.abrupt("return");case 7:i=window.__ez.nextCustomBreak,n=i.break,o=0;try{a=n.getPlayerId(),(o=this.getTimeUntilNextBreak(a,n))<=-1&&null!=i.timeUntilBreak&&(o=i.timeUntilBreak)}catch(e){o=null!==(s=i.timeUntilBreak)&&void 0!==s?s:0}if(!(o<=15)){e.next=16;break}return oe("Waiting for custom break to finish before bidding",t.impressionId),e.next=15,new Promise((function(e){return setTimeout(e,1e3*o)}));case 15:this.bid(t,r);case 16:o<=30&&t.isOutstream&&t.prebidParams&&t.prebidParams.maxduration>=16&&(oe("Updating maxduration to 15 seconds for outstream break",t.impressionId),t.prebidParams.maxduration=15,this.bid(t,r));case 17:case"end":return e.stop()}}),e,this)}))),function(t,r){return e.apply(this,arguments)})},{key:"getTimeUntilNextBreak",value:function(e,t){var r=-1;if(e){var i=le(e);if(i&&"function"==typeof i.getCurrentVideoTime){var n=i.getCurrentVideoTime();null!=t.timeOffsetSeconds&&null!=n&&(r=t.timeOffsetSeconds-n)}}return r}},{key:"recordBidInHistory",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.globalBidHistory[e]||(this.globalBidHistory[e]={bids:[],avgBid:0,maxBid:0,winCount:0,totalBids:0,avgFloor:0,avgPremium:0,totalFloors:0});var n=this.globalBidHistory[e];if(n.bids.push({cpm:t,floor:r,timestamp:Date.now(),wasWinner:i}),n.totalBids++,n.avgBid=(n.avgBid*(n.totalBids-1)+t)/n.totalBids,n.maxBid=Math.max(n.maxBid,t),i&&n.winCount++,"number"==typeof r){n.totalFloors++,n.avgFloor=(n.avgFloor*(n.totalFloors-1)+r)/n.totalFloors;var o=t-r;n.avgPremium=(n.avgPremium*(n.totalFloors-1)+o)/n.totalFloors}n.bids.length>100&&n.bids.shift()}},{key:"getBidderPerformance",value:function(){var e=0,t=0,r=0;return Object.values(this.globalBidHistory).forEach((function(i){i.bids.forEach((function(i){e++,i.wasWinner&&t++,r+=i.cpm}))})),{winRate:e>0?t/e:0,avgBid:e>0?r/e:0}}},{key:"initializeBidFilter",value:function(){epbjs.que.push((function(){var e=Rr.initVideoBidFilter();void 0===window.__ez&&(window.__ez={}),void 0===window.__ez.vbf&&(window.__ez.vbf={}),window.__ez.vbf=e,oe("Video bid filter initialized to prevent low CPM bids from being cached externally")}))}},{key:"initializeVideoBidTracking",value:function(){epbjs.que.push((function(){!function(){var e=window.epbjs;if(e&&e.onEvent){var t=new Set;e.onEvent("auctionEnd",(function(e){var r,i,n;if(e&&!t.has(e.auctionId)&&(t.add(e.auctionId),(null==e||null===(r=e.bidsReceived)||void 0===r?void 0:r.some((function(e){var t;return"video"===e.mediaType||(null===(t=e.mediaTypes)||void 0===t?void 0:t.video)})))||(null==e||null===(i=e.bidderRequests)||void 0===i?void 0:i.some((function(e){var t;return null===(t=e.bids)||void 0===t?void 0:t.some((function(e){var t;return null===(t=e.mediaTypes)||void 0===t?void 0:t.video}))}))))){var o=Object.create(null);(e.bidsReceived||[]).forEach((function(e){o[e.requestId]=e}));var a=[];(e.bidderRequests||[]).forEach((function(e){(e.bids||[]).forEach((function(e){var t=o[e.bidId];if(t&&null!=t.cpm){var r=function(e){if(e&&e.params){var t;if("s2s"===e.src){var r,i=null===(r=e.ortb2Imp)||void 0===r||null===(r=r.ext)||void 0===r||null===(r=r.prebid)||void 0===r?void 0:r.floors;if(i)return"number"==typeof i.floor&&(t=i.floor),"number"==typeof i.floormin&&(t=i.floormin),t}for(var n=0,o=["floor","bidFloor","bidfloor","reserve","floorPrice","floorprice","customFloor","kadfloor"];n<o.length;n++){var a,s=o[n];if(null!==(a=e.params)&&void 0!==a&&a.hasOwnProperty(s)){t=e.params[s];break}}if("string"==typeof t&&(t=parseFloat(t)),"number"==typeof t&&!isNaN(t))return t;if("function"==typeof e.getFloor){var d=e.getFloor();if(d&&d.floor)return d.floor}}}(e);t.appliedFloor=r,t.premium="number"==typeof r&&r>0?t.cpm-r:null,a.push(t)}}))})),a.length&&null!==(n=window.__ez)&&void 0!==n&&null!==(n=n.vhb)&&void 0!==n&&n.recordBidders&&window.__ez.vhb.recordBidders(a)}}))}}()}))}}]);var e,r,i,n,a}();function Sn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function Cn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Sn(Object(r),!0).forEach((function(t){W(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Sn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function xn(){return xn=q(K().mark((function e(){var t,r,i,n,o,a,s,d,u=arguments;return K().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=u.length>0&&void 0!==u[0]?u[0]:{},e.prev=1,t.plcmt){e.next=4;break}throw new Error("plcmt (placement type) is required. Use 1 for true instream, 2 for accompanying content, or 4 for standalone outstream.");case 4:if([1,2,4].includes(t.plcmt)){e.next=7;break}throw new Error("Invalid plcmt value: ".concat(t.plcmt,". Must be 1, 2, or 4."));case 7:if(r=4===t.plcmt,oe("[runEzoicVideoAuction] Starting auction with config:",i=Cn({videoLanguage:"en",isOutstream:r,playerId:r?"ez-o":"ez-i"},t)),window.__ez&&window.__ez.vhb){e.next=13;break}throw new Error("VideoBidder not initialized. Please ensure video header bidding is loaded.");case 13:if(window.__ez.dot){e.next=15;break}throw new Error("Ezoic dot utilities not available. Please ensure Ezoic tracking is loaded.");case 15:return n=window.__ez.vhb,e.next=18,In(n,i);case 18:if(o=e.sent){e.next=21;break}throw new Error("No suitable AdBreak found or could be created for auction");case 21:return oe("[runEzoicVideoAuction] Using AdBreak:",o.key),Fn(o,i),o.isBackfillMode=!0,e.next=26,n.bidWithoutRender(o,r,!1);case 26:return oe("[runEzoicVideoAuction] Auction completed for AdBreak:",(a=e.sent).key),s=jn(a),oe("[runEzoicVideoAuction] Auction result:",d=Tn(a,s,i)),e.abrupt("return",d);case 34:throw e.prev=34,e.t0=e.catch(1),console.error("[runEzoicVideoAuction] Error running auction:",e.t0),e.t0;case 38:case"end":return e.stop()}}),e,null,[[1,34]])}))),xn.apply(this,arguments)}function In(e,t){return An.apply(this,arguments)}function An(){return(An=q(K().mark((function e(t,r){var i,n,o,a,s,d,u;return K().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r.adBreakKey){e.next=5;break}if(!(i=t.breaks[r.adBreakKey]||t.floatingBreaks[r.adBreakKey])){e.next=4;break}return e.abrupt("return",i);case 4:oe("[runEzoicVideoAuction] Specified adBreakKey not found:",r.adBreakKey);case 5:if(n=[].concat(_r(Object.values(t.breaks)),_r(Object.values(t.floatingBreaks))),o=n.filter((function(e){return e.getPlayerId()===r.playerId&&!!e.isOutstream==!!r.isOutstream&&!e.isComplete})),!r.isOutstream&&r.adPosition&&(o=o.filter((function(e){return zn(e.timeOffset,r.adPosition)}))),!(o.length>0)){e.next=10;break}return e.abrupt("return",o[0]);case 10:return oe("[runEzoicVideoAuction] No existing breaks found, requesting new breaks"),a=r.isOutstream?"outstream-default":"3rdpartyvideo",e.next=14,t.requestBreaksV2({playerId:r.playerId,videoId:a,adsEnabled:1,videoPositionId:1,videoIndex:0,isAutoPlay:r.isAutoplay||!0,isFloating:r.isOutstream,adUnit:null,isFirstBreak:!0,isFloatingAdBreaks:r.isOutstream,floatPosition:null,paramConfig:{plcmt:r.plcmt,minLength:r.minLength||null,maxLength:r.maxLength||null,isBackfillMode:!0}});case 14:if(!((s=e.sent)&&s.length>0)){e.next=21;break}return d=s[0],!r.isOutstream&&r.adPosition&&(u=s.filter((function(e){return zn(e.timeOffset,r.adPosition)})),u.length>0?d="midroll"===r.adPosition.toLowerCase()?u.reduce((function(e,t){var r="number"==typeof e.timeOffsetSeconds?e.timeOffsetSeconds:1/0;return("number"==typeof t.timeOffsetSeconds?t.timeOffsetSeconds:1/0)<r?t:e})):u[0]:(oe("[runEzoicVideoAuction] Warning: No breaks match requested adPosition:",r.adPosition),d=s[0])),d.prebidParams?d.prebidParams.plcmt=r.plcmt:d.prebidParams={plcmt:r.plcmt},oe("[runEzoicVideoAuction] Created new AdBreak with key:",d.key),e.abrupt("return",d);case 21:return e.abrupt("return",null);case 22:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function zn(e,t){if(!t)return!0;switch(t.toLowerCase()){case"preroll":return"start"===e||0===e;case"postroll":return"end"===e;case"midroll":return"start"!==e&&"end"!==e;default:return!0}}function Fn(e,t){t.prebidParams&&(e.prebidParams=Cn(Cn({},e.prebidParams),t.prebidParams)),e.prebidParams||(e.prebidParams={}),e.prebidParams.plcmt=t.plcmt,t.minLength&&e.prebidParams&&(e.prebidParams.minduration=t.minLength),t.maxLength&&e.prebidParams&&(e.prebidParams.maxduration=t.maxLength),t.videoLanguage&&"en"!==t.videoLanguage&&(e.params||(e.params={}),e.params.videoLanguage=t.videoLanguage),t.videoTitle&&(e.params||(e.params={}),e.params.videoTitle=t.videoTitle),t.adPosition&&(e.params||(e.params={}),e.params.adPosition=t.adPosition),e.isMultiformatEnabled=!1}function jn(e){var t=e.getHighestBidWithSource(),r=null,i=0,n=null,o=null;if(t&&t.cpm>0)if(i=t.cpm,"prebid"===t.source){var a=t.bid;a&&(r=a.bidder,o=a.ezVideoCacheKey||a.videoCacheKey||a.adId,e.handleWinningAdIdOrHbUUId(o),n=e.statSourceId)}else"aps"===t.source&&(r="amzn",o="aps",e.handleWinningAdIdOrHbUUId(o),n=e.isOutstream?11337:11324);return e.isComplete=!0,e.isTriggered=!0,e.key&&e.markBreakAsComplete(e.key,e.isFloating),{winningBidder:r,winningCpm:i,statSourceId:n,adId:o,source:(null==t?void 0:t.source)||null,hasWinningBid:i>0,bid:(null==t?void 0:t.bid)||null}}function Tn(e,t,r){var i,n=__ez.dot.getEpoch(0),o=__ez.dot.getDID(),a=Rn();if(!t.hasWinningBid&&e.isOutstream)return{encodedQueryParams:"",ezoicVastUrl:"",meta:{adBreakKey:e.key}};var s=e.vastURL;if(e.isOutstream){var d=t.bid;if(t.hasWinningBid&&"prebid"===t.source&&d){var u=d.ezVideoCacheKey||d.videoCacheKey||d.adId;u&&(s="".concat(c(),"?uuid=").concat(u))}else t.hasWinningBid&&"aps"===t.source&&d&&d.amzniid&&d.amznbid&&(s="https://aax.amazon-adsystem.com/e/dtb/vast?b="+d.amzniid+"&rnd="+Math.random().toString(36).substring(2,15)+"&pp="+d.amznbid)}var l={adId:t.adId||"no-fill",vastUrl:s,iid:(null===(i=e.impressionId)||void 0===i?void 0:i.toString())||"",unit:e.adUnit||"",did:o,vid:a,tepoch:n.toString()};t.statSourceId&&(l.ssid=t.statSourceId.toString()),t.winningCpm&&t.winningCpm>0&&(l.cpm=t.winningCpm.toString()),t.winningBidder&&(l.bidder=t.winningBidder),e.videoAdBidFloor&&e.videoAdBidFloor>0&&(l.bf=e.videoAdBidFloor.toString()),r.isOutstream&&(l.os="1"),void 0!==e.timeOffset&&null!==e.timeOffset?l.ad_position=e.timeOffset:l.ad_position="start",r.isOutstream||(l.video_impression_id=Rn());var f=__ez.dot.getPageviewId();f&&(l.pvid=f),"undefined"!=typeof _ezaq&&_ezaq.hasOwnProperty("visit_uuid")&&(l.visit_uuid=_ezaq.visit_uuid),"undefined"!=typeof _ezaq&&_ezaq.hasOwnProperty("ab_test_id")&&(l.ab_test_id=_ezaq.ab_test_id),"undefined"!=typeof _ezaq&&_ezaq.hasOwnProperty("template_id")&&(l.template_id=_ezaq.template_id),"undefined"!=typeof _ezaq&&_ezaq.hasOwnProperty("url")?l.url=_ezaq.url:l.url=window.location.href;var p,v=void 0;e.isOutstream&&"undefined"!=typeof __ezOutstream&&void 0!==__ezOutstream.AdIndex?v=__ezOutstream.AdIndex:e.isOutstream||"undefined"==typeof __ezInstream||void 0===__ezInstream.AdIndex||(v=__ezInstream.AdIndex),void 0!==v&&(l.ad_index=v.toString()),void 0!==e.didS2SBidderWin&&(l.is_winner_s2s=e.didS2SBidderWin?"1":"0","true"===(null===(p=window.__ez)||void 0===p||null===(p=p.tf)||void 0===p?void 0:p.MNetS2S)&&e.didS2SBidderWin&&(l.is_winner_s2s="2")),e.bidders&&Array.isArray(e.bidders)&&e.bidders.length>0?l.bidders="["+e.bidders.join(",")+"]":l.bidders="[]",e.receivedBidders&&Array.isArray(e.receivedBidders)&&e.receivedBidders.length>0?l.received_bidders="["+e.receivedBidders.join(",")+"]":l.received_bidders="[]",e.prebidParams&&void 0!==e.prebidParams.minduration&&(l.min_ad_length=e.prebidParams.minduration.toString()),e.prebidParams&&void 0!==e.prebidParams.maxduration&&(l.max_ad_length=e.prebidParams.maxduration.toString()),void 0!==e.prebidNumBidsInCache&&(l.num_bids_in_client_cache=e.prebidNumBidsInCache.toString());var h,m,y,b,g,_,w,B=(h=JSON.stringify(l),m=btoa(h),y=m.match(/=+$/),b=y?y[0].length:0,g=(m.match(/\+/g)||[]).length,_=(m.match(/\//g)||[]).length,w=m.replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,""),En&&(b||g||_)&&console.log("[runEzoicVideoAuction] base64url sanitized",{removedPaddingLen:b,plusCount:g,slashCount:_,beforeLen:m.length,afterLen:w.length}),w),k="https://vastproxy.ezoic.net/vastenhanced?ezoic_vast_data=".concat(B);return{encodedQueryParams:encodeURIComponent("&ezoic_vast_data=".concat(B,"&ez_vast_bf=1")),ezoicVastUrl:k,meta:{adBreakKey:e.key}}}function Rn(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}"undefined"!=typeof window&&(window.__ez||(window.__ez={}),window.__ez.runEzoicVideoAuction=function(){return xn.apply(this,arguments)});var En=function(){try{if("undefined"!=typeof window&&window.location&&window.location.search)return"1"===new URLSearchParams(window.location.search).get("ez_vast_bf_debug")}catch(e){}return!1}();const Un=function(){return o((function e(){t(this,e)}),[{key:"init",value:function(){var e;(e=__ez).vhb||(e.vhb=new Pn)}}])}();var Mn=new N,Dn=new Un;Mn.init(),Dn.init()})()})();